function FC(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function gT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),n}var gf={exports:{}},ia={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function zC(){if(q0)return ia;q0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,l){var u=null;if(l!==void 0&&(u=""+l),o.key!==void 0&&(u=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:t,type:s,key:u,ref:o!==void 0?o:null,props:l}}return ia.Fragment=e,ia.jsx=n,ia.jsxs=n,ia}var G0;function $C(){return G0||(G0=1,gf.exports=zC()),gf.exports}var S=$C(),yf={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function KC(){if(H0)return De;H0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function w(I){return I===null||typeof I!="object"?null:(I=T&&I[T]||I["@@iterator"],typeof I=="function"?I:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function R(I,J,ie){this.props=I,this.context=J,this.refs=A,this.updater=ie||E}R.prototype.isReactComponent={},R.prototype.setState=function(I,J){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,J,"setState")},R.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function D(){}D.prototype=R.prototype;function N(I,J,ie){this.props=I,this.context=J,this.refs=A,this.updater=ie||E}var G=N.prototype=new D;G.constructor=N,C(G,R.prototype),G.isPureReactComponent=!0;var q=Array.isArray;function z(){}var F={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function te(I,J,ie){var W=ie.ref;return{$$typeof:t,type:I,key:J,ref:W!==void 0?W:null,props:ie}}function ue(I,J){return te(I.type,J,I.props)}function he(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function Te(I){var J={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ie){return J[ie]})}var Pe=/\/+/g;function $e(I,J){return typeof I=="object"&&I!==null&&I.key!=null?Te(""+I.key):J.toString(36)}function Ue(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(z,z):(I.status="pending",I.then(function(J){I.status==="pending"&&(I.status="fulfilled",I.value=J)},function(J){I.status==="pending"&&(I.status="rejected",I.reason=J)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function P(I,J,ie,W,le){var Z=typeof I;(Z==="undefined"||Z==="boolean")&&(I=null);var pe=!1;if(I===null)pe=!0;else switch(Z){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(I.$$typeof){case t:case e:pe=!0;break;case y:return pe=I._init,P(pe(I._payload),J,ie,W,le)}}if(pe)return le=le(I),pe=W===""?"."+$e(I,0):W,q(le)?(ie="",pe!=null&&(ie=pe.replace(Pe,"$&/")+"/"),P(le,J,ie,"",function(On){return On})):le!=null&&(he(le)&&(le=ue(le,ie+(le.key==null||I&&I.key===le.key?"":(""+le.key).replace(Pe,"$&/")+"/")+pe)),J.push(le)),1;pe=0;var je=W===""?".":W+":";if(q(I))for(var Le=0;Le<I.length;Le++)W=I[Le],Z=je+$e(W,Le),pe+=P(W,J,ie,Z,le);else if(Le=w(I),typeof Le=="function")for(I=Le.call(I),Le=0;!(W=I.next()).done;)W=W.value,Z=je+$e(W,Le++),pe+=P(W,J,ie,Z,le);else if(Z==="object"){if(typeof I.then=="function")return P(Ue(I),J,ie,W,le);throw J=String(I),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return pe}function H(I,J,ie){if(I==null)return I;var W=[],le=0;return P(I,W,"","",function(Z){return J.call(ie,Z,le++)}),W}function ne(I){if(I._status===-1){var J=I._result;J=J(),J.then(function(ie){(I._status===0||I._status===-1)&&(I._status=1,I._result=ie)},function(ie){(I._status===0||I._status===-1)&&(I._status=2,I._result=ie)}),I._status===-1&&(I._status=0,I._result=J)}if(I._status===1)return I._result.default;throw I._result}var re=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ce={map:H,forEach:function(I,J,ie){H(I,function(){J.apply(this,arguments)},ie)},count:function(I){var J=0;return H(I,function(){J++}),J},toArray:function(I){return H(I,function(J){return J})||[]},only:function(I){if(!he(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return De.Activity=b,De.Children=ce,De.Component=R,De.Fragment=n,De.Profiler=o,De.PureComponent=N,De.StrictMode=s,De.Suspense=h,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,De.__COMPILER_RUNTIME={__proto__:null,c:function(I){return F.H.useMemoCache(I)}},De.cache=function(I){return function(){return I.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(I,J,ie){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var W=C({},I.props),le=I.key;if(J!=null)for(Z in J.key!==void 0&&(le=""+J.key),J)!ee.call(J,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&J.ref===void 0||(W[Z]=J[Z]);var Z=arguments.length-2;if(Z===1)W.children=ie;else if(1<Z){for(var pe=Array(Z),je=0;je<Z;je++)pe[je]=arguments[je+2];W.children=pe}return te(I.type,le,W)},De.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},De.createElement=function(I,J,ie){var W,le={},Z=null;if(J!=null)for(W in J.key!==void 0&&(Z=""+J.key),J)ee.call(J,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(le[W]=J[W]);var pe=arguments.length-2;if(pe===1)le.children=ie;else if(1<pe){for(var je=Array(pe),Le=0;Le<pe;Le++)je[Le]=arguments[Le+2];le.children=je}if(I&&I.defaultProps)for(W in pe=I.defaultProps,pe)le[W]===void 0&&(le[W]=pe[W]);return te(I,Z,le)},De.createRef=function(){return{current:null}},De.forwardRef=function(I){return{$$typeof:d,render:I}},De.isValidElement=he,De.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:ne}},De.memo=function(I,J){return{$$typeof:f,type:I,compare:J===void 0?null:J}},De.startTransition=function(I){var J=F.T,ie={};F.T=ie;try{var W=I(),le=F.S;le!==null&&le(ie,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(z,re)}catch(Z){re(Z)}finally{J!==null&&ie.types!==null&&(J.types=ie.types),F.T=J}},De.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},De.use=function(I){return F.H.use(I)},De.useActionState=function(I,J,ie){return F.H.useActionState(I,J,ie)},De.useCallback=function(I,J){return F.H.useCallback(I,J)},De.useContext=function(I){return F.H.useContext(I)},De.useDebugValue=function(){},De.useDeferredValue=function(I,J){return F.H.useDeferredValue(I,J)},De.useEffect=function(I,J){return F.H.useEffect(I,J)},De.useEffectEvent=function(I){return F.H.useEffectEvent(I)},De.useId=function(){return F.H.useId()},De.useImperativeHandle=function(I,J,ie){return F.H.useImperativeHandle(I,J,ie)},De.useInsertionEffect=function(I,J){return F.H.useInsertionEffect(I,J)},De.useLayoutEffect=function(I,J){return F.H.useLayoutEffect(I,J)},De.useMemo=function(I,J){return F.H.useMemo(I,J)},De.useOptimistic=function(I,J){return F.H.useOptimistic(I,J)},De.useReducer=function(I,J,ie){return F.H.useReducer(I,J,ie)},De.useRef=function(I){return F.H.useRef(I)},De.useState=function(I){return F.H.useState(I)},De.useSyncExternalStore=function(I,J,ie){return F.H.useSyncExternalStore(I,J,ie)},De.useTransition=function(){return F.H.useTransition()},De.version="19.2.0",De}var j0;function zh(){return j0||(j0=1,yf.exports=KC()),yf.exports}var O=zh();const La=gT(O);var vf={exports:{}},sa={},bf={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function JC(){return F0||(F0=1,(function(t){function e(P,H){var ne=P.length;P.push(H);e:for(;0<ne;){var re=ne-1>>>1,ce=P[re];if(0<o(ce,H))P[re]=H,P[ne]=ce,ne=re;else break e}}function n(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var H=P[0],ne=P.pop();if(ne!==H){P[0]=ne;e:for(var re=0,ce=P.length,I=ce>>>1;re<I;){var J=2*(re+1)-1,ie=P[J],W=J+1,le=P[W];if(0>o(ie,ne))W<ce&&0>o(le,ie)?(P[re]=le,P[W]=ne,re=W):(P[re]=ie,P[J]=ne,re=J);else if(W<ce&&0>o(le,ne))P[re]=le,P[W]=ne,re=W;else break e}}return H}function o(P,H){var ne=P.sortIndex-H.sortIndex;return ne!==0?ne:P.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var h=[],f=[],y=1,b=null,T=3,w=!1,E=!1,C=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function G(P){for(var H=n(f);H!==null;){if(H.callback===null)s(f);else if(H.startTime<=P)s(f),H.sortIndex=H.expirationTime,e(h,H);else break;H=n(f)}}function q(P){if(C=!1,G(P),!E)if(n(h)!==null)E=!0,z||(z=!0,Te());else{var H=n(f);H!==null&&Ue(q,H.startTime-P)}}var z=!1,F=-1,ee=5,te=-1;function ue(){return A?!0:!(t.unstable_now()-te<ee)}function he(){if(A=!1,z){var P=t.unstable_now();te=P;var H=!0;try{e:{E=!1,C&&(C=!1,D(F),F=-1),w=!0;var ne=T;try{t:{for(G(P),b=n(h);b!==null&&!(b.expirationTime>P&&ue());){var re=b.callback;if(typeof re=="function"){b.callback=null,T=b.priorityLevel;var ce=re(b.expirationTime<=P);if(P=t.unstable_now(),typeof ce=="function"){b.callback=ce,G(P),H=!0;break t}b===n(h)&&s(h),G(P)}else s(h);b=n(h)}if(b!==null)H=!0;else{var I=n(f);I!==null&&Ue(q,I.startTime-P),H=!1}}break e}finally{b=null,T=ne,w=!1}H=void 0}}finally{H?Te():z=!1}}}var Te;if(typeof N=="function")Te=function(){N(he)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,$e=Pe.port2;Pe.port1.onmessage=he,Te=function(){$e.postMessage(null)}}else Te=function(){R(he,0)};function Ue(P,H){F=R(function(){P(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(P){switch(T){case 1:case 2:case 3:var H=3;break;default:H=T}var ne=T;T=H;try{return P()}finally{T=ne}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(P,H){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ne=T;T=P;try{return H()}finally{T=ne}},t.unstable_scheduleCallback=function(P,H,ne){var re=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?re+ne:re):ne=re,P){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ne+ce,P={id:y++,callback:H,priorityLevel:P,startTime:ne,expirationTime:ce,sortIndex:-1},ne>re?(P.sortIndex=ne,e(f,P),n(h)===null&&P===n(f)&&(C?(D(F),F=-1):C=!0,Ue(q,ne-re))):(P.sortIndex=ce,e(h,P),E||w||(E=!0,z||(z=!0,Te()))),P},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(P){var H=T;return function(){var ne=T;T=H;try{return P.apply(this,arguments)}finally{T=ne}}}})(Sf)),Sf}var z0;function YC(){return z0||(z0=1,bf.exports=JC()),bf.exports}var Tf={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function WC(){if($0)return Ht;$0=1;var t=zh();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(h,f,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:h,containerInfo:f,implementation:y}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ht.createPortal=function(h,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(h,f,null,y)},Ht.flushSync=function(h){var f=u.T,y=s.p;try{if(u.T=null,s.p=2,h)return h()}finally{u.T=f,s.p=y,s.d.f()}},Ht.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},Ht.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Ht.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var y=f.as,b=d(y,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:w}):y==="script"&&s.d.X(h,{crossOrigin:b,integrity:T,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ht.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=d(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},Ht.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,b=d(y,f.crossOrigin);s.d.L(h,y,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ht.preloadModule=function(h,f){if(typeof h=="string")if(f){var y=d(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},Ht.requestFormReset=function(h){s.d.r(h)},Ht.unstable_batchedUpdates=function(h,f){return h(f)},Ht.useFormState=function(h,f,y){return u.H.useFormState(h,f,y)},Ht.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ht.version="19.2.0",Ht}var K0;function XC(){if(K0)return Tf.exports;K0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tf.exports=WC(),Tf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function QC(){if(J0)return sa;J0=1;var t=YC(),e=zh(),n=XC();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(c=g.return,c!==null){a=c;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return h(g),i;if(v===c)return h(g),r;v=v.sibling}throw Error(s(188))}if(a.return!==c.return)a=g,c=v;else{for(var x=!1,_=g.child;_;){if(_===a){x=!0,a=g,c=v;break}if(_===c){x=!0,c=g,a=v;break}_=_.sibling}if(!x){for(_=v.child;_;){if(_===a){x=!0,a=v,c=g;break}if(_===c){x=!0,c=v,a=g;break}_=_.sibling}if(!x)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),N=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function Te(i){return i===null||typeof i!="object"?null:(i=he&&i[he]||i["@@iterator"],typeof i=="function"?i:null)}var Pe=Symbol.for("react.client.reference");function $e(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Pe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case R:return"Profiler";case A:return"StrictMode";case q:return"Suspense";case z:return"SuspenseList";case te:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case N:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case G:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return r=i.displayName||null,r!==null?r:$e(i.type)||"Memo";case ee:r=i._payload,i=i._init;try{return $e(i(r))}catch{}}return null}var Ue=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},re=[],ce=-1;function I(i){return{current:i}}function J(i){0>ce||(i.current=re[ce],re[ce]=null,ce--)}function ie(i,r){ce++,re[ce]=i.current,i.current=r}var W=I(null),le=I(null),Z=I(null),pe=I(null);function je(i,r){switch(ie(Z,r),ie(le,i),ie(W,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?u0(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=u0(r),i=c0(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(W),ie(W,i)}function Le(){J(W),J(le),J(Z)}function On(i){i.memoizedState!==null&&ie(pe,i);var r=W.current,a=c0(r,i.type);r!==a&&(ie(le,i),ie(W,a))}function Ln(i){le.current===i&&(J(W),J(le)),pe.current===i&&(J(pe),Zo._currentValue=ne)}var ve,Ke;function Ze(i){if(ve===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ve=r&&r[1]||"",Ke=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+i+Ke}var Xt=!1;function mt(i,r){if(!i||Xt)return"";Xt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch($){var j=$}Reflect.construct(i,[],Q)}else{try{Q.call()}catch($){j=$}i.call(Q.prototype)}}else{try{throw Error()}catch($){j=$}(Q=i())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch($){if($&&j&&typeof $.stack=="string")return[$.stack,j.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),x=v[0],_=v[1];if(x&&_){var M=x.split(`
`),B=_.split(`
`);for(g=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(c===M.length||g===B.length)for(c=M.length-1,g=B.length-1;1<=c&&0<=g&&M[c]!==B[g];)g--;for(;1<=c&&0<=g;c--,g--)if(M[c]!==B[g]){if(c!==1||g!==1)do if(c--,g--,0>g||M[c]!==B[g]){var Y=`
`+M[c].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=c&&0<=g);break}}}finally{Xt=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Ze(a):""}function yn(i,r){switch(i.tag){case 26:case 27:case 5:return Ze(i.type);case 16:return Ze("Lazy");case 13:return i.child!==r&&r!==null?Ze("Suspense Fallback"):Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 15:return mt(i.type,!1);case 11:return mt(i.type.render,!1);case 1:return mt(i.type,!0);case 31:return Ze("Activity");default:return""}}function Gt(i){try{var r="",a=null;do r+=yn(i,a),a=i,i=i.return;while(i);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ii=Object.prototype.hasOwnProperty,Ai=t.unstable_scheduleCallback,Ri=t.unstable_cancelCallback,Js=t.unstable_shouldYield,oe=t.unstable_requestPaint,ae=t.unstable_now,Ae=t.unstable_getCurrentPriorityLevel,Fe=t.unstable_ImmediatePriority,Xe=t.unstable_UserBlockingPriority,at=t.unstable_NormalPriority,U=t.unstable_LowPriority,K=t.unstable_IdlePriority,fe=t.log,xe=t.unstable_setDisableYieldValue,Re=null,ge=null;function Ee(i){if(typeof fe=="function"&&xe(i),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(Re,i)}catch{}}var pt=Math.clz32?Math.clz32:nc,$t=Math.log,ja=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-($t(i)/ja|0)|0}var Fa=256,za=262144,$a=4194304;function us(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ka(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var g=0,v=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var _=c&134217727;return _!==0?(c=_&~v,c!==0?g=us(c):(x&=_,x!==0?g=us(x):a||(a=_&~i,a!==0&&(g=us(a))))):(_=c&~v,_!==0?g=us(_):x!==0?g=us(x):a||(a=c&~i,a!==0&&(g=us(a)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:g}function fo(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function I_(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fm(){var i=$a;return $a<<=1,($a&62914560)===0&&($a=4194304),i}function ic(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function ho(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function D_(i,r,a,c,g,v){var x=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var _=i.entanglements,M=i.expirationTimes,B=i.hiddenUpdates;for(a=x&~a;0<a;){var Y=31-pt(a),Q=1<<Y;_[Y]=0,M[Y]=-1;var j=B[Y];if(j!==null)for(B[Y]=null,Y=0;Y<j.length;Y++){var $=j[Y];$!==null&&($.lane&=-536870913)}a&=~Q}c!==0&&zm(i,c,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(x&~r))}function zm(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-pt(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function $m(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-pt(a),g=1<<c;g&r|i[c]&r&&(i[c]|=r),a&=~g}}function Km(i,r){var a=r&-r;return a=(a&42)!==0?1:sc(a),(a&(i.suspendedLanes|r))!==0?0:a}function sc(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function rc(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Jm(){var i=H.p;return i!==0?i:(i=window.event,i===void 0?32:k0(i.type))}function Ym(i,r){var a=H.p;try{return H.p=i,r()}finally{H.p=a}}var Ni=Math.random().toString(36).slice(2),kt="__reactFiber$"+Ni,Qt="__reactProps$"+Ni,Ys="__reactContainer$"+Ni,oc="__reactEvents$"+Ni,k_="__reactListeners$"+Ni,P_="__reactHandles$"+Ni,Wm="__reactResources$"+Ni,mo="__reactMarker$"+Ni;function ac(i){delete i[kt],delete i[Qt],delete i[oc],delete i[k_],delete i[P_]}function Ws(i){var r=i[kt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Ys]||a[kt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=y0(i);i!==null;){if(a=i[kt])return a;i=y0(i)}return r}i=a,a=i.parentNode}return null}function Xs(i){if(i=i[kt]||i[Ys]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function po(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Qs(i){var r=i[Wm];return r||(r=i[Wm]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function It(i){i[mo]=!0}var Xm=new Set,Qm={};function cs(i,r){Zs(i,r),Zs(i+"Capture",r)}function Zs(i,r){for(Qm[i]=r,i=0;i<r.length;i++)Xm.add(r[i])}var O_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zm={},ep={};function L_(i){return ii.call(ep,i)?!0:ii.call(Zm,i)?!1:O_.test(i)?ep[i]=!0:(Zm[i]=!0,!1)}function Ja(i,r,a){if(L_(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Ya(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function si(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}function vn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function tp(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function U_(i,r,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(x){a=""+x,v.call(this,x)}}),Object.defineProperty(i,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function lc(i){if(!i._valueTracker){var r=tp(i)?"checked":"value";i._valueTracker=U_(i,r,""+i[r])}}function np(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=tp(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function Wa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var V_=/[\n"\\]/g;function bn(i){return i.replace(V_,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function uc(i,r,a,c,g,v,x,_){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),r!=null?x==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+vn(r)):i.value!==""+vn(r)&&(i.value=""+vn(r)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),r!=null?cc(i,x,vn(r)):a!=null?cc(i,x,vn(a)):c!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.name=""+vn(_):i.removeAttribute("name")}function ip(i,r,a,c,g,v,x,_){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){lc(i);return}a=a!=null?""+vn(a):"",r=r!=null?""+vn(r):a,_||r===i.value||(i.value=r),i.defaultValue=r}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=_?i.checked:!!c,i.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x),lc(i)}function cc(i,r,a){r==="number"&&Wa(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function er(i,r,a,c){if(i=i.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=r.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&c&&(i[a].defaultSelected=!0)}else{for(a=""+vn(a),r=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,c&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function sp(i,r,a){if(r!=null&&(r=""+vn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+vn(a):""}function rp(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(Ue(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=vn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),lc(i)}function tr(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var B_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function op(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||B_.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function ap(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var g in r)c=r[g],r.hasOwnProperty(g)&&a[g]!==c&&op(i,g,c)}else for(var v in r)r.hasOwnProperty(v)&&op(i,v,r[v])}function dc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),G_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(i){return G_.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ri(){}var fc=null;function hc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var nr=null,ir=null;function lp(i){var r=Xs(i);if(r&&(i=r.stateNode)){var a=i[Qt]||null;e:switch(i=r.stateNode,r.type){case"input":if(uc(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var g=c[Qt]||null;if(!g)throw Error(s(90));uc(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&np(c)}break e;case"textarea":sp(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&er(i,!!a.multiple,r,!1)}}}var mc=!1;function up(i,r,a){if(mc)return i(r,a);mc=!0;try{var c=i(r);return c}finally{if(mc=!1,(nr!==null||ir!==null)&&(Vl(),nr&&(r=nr,i=ir,ir=nr=null,lp(r),i)))for(r=0;r<i.length;r++)lp(i[r])}}function go(i,r){var a=i.stateNode;if(a===null)return null;var c=a[Qt]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=!1;if(oi)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){pc=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{pc=!1}var Mi=null,gc=null,Qa=null;function cp(){if(Qa)return Qa;var i,r=gc,a=r.length,c,g="value"in Mi?Mi.value:Mi.textContent,v=g.length;for(i=0;i<a&&r[i]===g[i];i++);var x=a-i;for(c=1;c<=x&&r[a-c]===g[v-c];c++);return Qa=g.slice(i,1<c?1-c:void 0)}function Za(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function el(){return!0}function dp(){return!1}function Zt(i){function r(a,c,g,v,x){this._reactName=a,this._targetInst=g,this.type=c,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(a=i[_],this[_]=a?a(v):v[_]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?el:dp,this.isPropagationStopped=dp,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),r}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Zt(ds),vo=b({},ds,{view:0,detail:0}),H_=Zt(vo),yc,vc,bo,nl=b({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bo&&(bo&&i.type==="mousemove"?(yc=i.screenX-bo.screenX,vc=i.screenY-bo.screenY):vc=yc=0,bo=i),yc)},movementY:function(i){return"movementY"in i?i.movementY:vc}}),fp=Zt(nl),j_=b({},nl,{dataTransfer:0}),F_=Zt(j_),z_=b({},vo,{relatedTarget:0}),bc=Zt(z_),$_=b({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),K_=Zt($_),J_=b({},ds,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Y_=Zt(J_),W_=b({},ds,{data:0}),hp=Zt(W_),X_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eE(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Z_[i])?!!r[i]:!1}function Sc(){return eE}var tE=b({},vo,{key:function(i){if(i.key){var r=X_[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Za(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Q_[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(i){return i.type==="keypress"?Za(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Za(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),nE=Zt(tE),iE=b({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=Zt(iE),sE=b({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),rE=Zt(sE),oE=b({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),aE=Zt(oE),lE=b({},nl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),uE=Zt(lE),cE=b({},ds,{newState:0,oldState:0}),dE=Zt(cE),fE=[9,13,27,32],Tc=oi&&"CompositionEvent"in window,So=null;oi&&"documentMode"in document&&(So=document.documentMode);var hE=oi&&"TextEvent"in window&&!So,pp=oi&&(!Tc||So&&8<So&&11>=So),gp=" ",yp=!1;function vp(i,r){switch(i){case"keyup":return fE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var sr=!1;function mE(i,r){switch(i){case"compositionend":return bp(r);case"keypress":return r.which!==32?null:(yp=!0,gp);case"textInput":return i=r.data,i===gp&&yp?null:i;default:return null}}function pE(i,r){if(sr)return i==="compositionend"||!Tc&&vp(i,r)?(i=cp(),Qa=gc=Mi=null,sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pp&&r.locale!=="ko"?null:r.data;default:return null}}var gE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!gE[i.type]:r==="textarea"}function Tp(i,r,a,c){nr?ir?ir.push(c):ir=[c]:nr=c,r=zl(r,"onChange"),0<r.length&&(a=new tl("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var To=null,xo=null;function yE(i){i0(i,0)}function il(i){var r=po(i);if(np(r))return i}function xp(i,r){if(i==="change")return r}var wp=!1;if(oi){var xc;if(oi){var wc="oninput"in document;if(!wc){var _p=document.createElement("div");_p.setAttribute("oninput","return;"),wc=typeof _p.oninput=="function"}xc=wc}else xc=!1;wp=xc&&(!document.documentMode||9<document.documentMode)}function Ep(){To&&(To.detachEvent("onpropertychange",Cp),xo=To=null)}function Cp(i){if(i.propertyName==="value"&&il(xo)){var r=[];Tp(r,xo,i,hc(i)),up(yE,r)}}function vE(i,r,a){i==="focusin"?(Ep(),To=r,xo=a,To.attachEvent("onpropertychange",Cp)):i==="focusout"&&Ep()}function bE(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return il(xo)}function SE(i,r){if(i==="click")return il(r)}function TE(i,r){if(i==="input"||i==="change")return il(r)}function xE(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ln=typeof Object.is=="function"?Object.is:xE;function wo(i,r){if(ln(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var g=a[c];if(!ii.call(r,g)||!ln(i[g],r[g]))return!1}return!0}function Ap(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Rp(i,r){var a=Ap(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ap(a)}}function Np(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Np(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Mp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Wa(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Wa(i.document)}return r}function _c(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var wE=oi&&"documentMode"in document&&11>=document.documentMode,rr=null,Ec=null,_o=null,Cc=!1;function Ip(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cc||rr==null||rr!==Wa(c)||(c=rr,"selectionStart"in c&&_c(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),_o&&wo(_o,c)||(_o=c,c=zl(Ec,"onSelect"),0<c.length&&(r=new tl("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=rr)))}function fs(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var or={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Ac={},Dp={};oi&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function hs(i){if(Ac[i])return Ac[i];if(!or[i])return i;var r=or[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in Dp)return Ac[i]=r[a];return i}var kp=hs("animationend"),Pp=hs("animationiteration"),Op=hs("animationstart"),_E=hs("transitionrun"),EE=hs("transitionstart"),CE=hs("transitioncancel"),Lp=hs("transitionend"),Up=new Map,Rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rc.push("scrollEnd");function Un(i,r){Up.set(i,r),cs(r,[i])}var sl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Sn=[],ar=0,Nc=0;function rl(){for(var i=ar,r=Nc=ar=0;r<i;){var a=Sn[r];Sn[r++]=null;var c=Sn[r];Sn[r++]=null;var g=Sn[r];Sn[r++]=null;var v=Sn[r];if(Sn[r++]=null,c!==null&&g!==null){var x=c.pending;x===null?g.next=g:(g.next=x.next,x.next=g),c.pending=g}v!==0&&Vp(a,g,v)}}function ol(i,r,a,c){Sn[ar++]=i,Sn[ar++]=r,Sn[ar++]=a,Sn[ar++]=c,Nc|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Mc(i,r,a,c){return ol(i,r,a,c),al(i)}function ms(i,r){return ol(i,null,null,r),al(i)}function Vp(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var g=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&r!==null&&(g=31-pt(a),i=v.hiddenUpdates,c=i[g],c===null?i[g]=[r]:c.push(r),r.lane=a|536870912),v):null}function al(i){if(50<$o)throw $o=0,Bd=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var lr={};function AE(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(i,r,a,c){return new AE(i,r,a,c)}function Ic(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ai(i,r){var a=i.alternate;return a===null?(a=un(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Bp(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ll(i,r,a,c,g,v){var x=0;if(c=i,typeof i=="function")Ic(i)&&(x=1);else if(typeof i=="string")x=DC(i,a,W.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case te:return i=un(31,a,r,g),i.elementType=te,i.lanes=v,i;case C:return ps(a.children,g,v,r);case A:x=8,g|=24;break;case R:return i=un(12,a,r,g|2),i.elementType=R,i.lanes=v,i;case q:return i=un(13,a,r,g),i.elementType=q,i.lanes=v,i;case z:return i=un(19,a,r,g),i.elementType=z,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:x=10;break e;case D:x=9;break e;case G:x=11;break e;case F:x=14;break e;case ee:x=16,c=null;break e}x=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=un(x,a,r,g),r.elementType=i,r.type=c,r.lanes=v,r}function ps(i,r,a,c){return i=un(7,i,c,r),i.lanes=a,i}function Dc(i,r,a){return i=un(6,i,null,r),i.lanes=a,i}function qp(i){var r=un(18,null,null,0);return r.stateNode=i,r}function kc(i,r,a){return r=un(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Gp=new WeakMap;function Tn(i,r){if(typeof i=="object"&&i!==null){var a=Gp.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Gt(r)},Gp.set(i,r),r)}return{value:i,source:r,stack:Gt(r)}}var ur=[],cr=0,ul=null,Eo=0,xn=[],wn=0,Ii=null,Yn=1,Wn="";function li(i,r){ur[cr++]=Eo,ur[cr++]=ul,ul=i,Eo=r}function Hp(i,r,a){xn[wn++]=Yn,xn[wn++]=Wn,xn[wn++]=Ii,Ii=i;var c=Yn;i=Wn;var g=32-pt(c)-1;c&=~(1<<g),a+=1;var v=32-pt(r)+g;if(30<v){var x=g-g%5;v=(c&(1<<x)-1).toString(32),c>>=x,g-=x,Yn=1<<32-pt(r)+g|a<<g|c,Wn=v+i}else Yn=1<<v|a<<g|c,Wn=i}function Pc(i){i.return!==null&&(li(i,1),Hp(i,1,0))}function Oc(i){for(;i===ul;)ul=ur[--cr],ur[cr]=null,Eo=ur[--cr],ur[cr]=null;for(;i===Ii;)Ii=xn[--wn],xn[wn]=null,Wn=xn[--wn],xn[wn]=null,Yn=xn[--wn],xn[wn]=null}function jp(i,r){xn[wn++]=Yn,xn[wn++]=Wn,xn[wn++]=Ii,Yn=r.id,Wn=r.overflow,Ii=i}var Pt=null,lt=null,He=!1,Di=null,_n=!1,Lc=Error(s(519));function ki(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Co(Tn(r,i)),Lc}function Fp(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[kt]=i,r[Qt]=c,a){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(a=0;a<Jo.length;a++)Be(Jo[a],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),ip(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),rp(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||a0(r.textContent,a)?(c.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),c.onScroll!=null&&Be("scroll",r),c.onScrollEnd!=null&&Be("scrollend",r),c.onClick!=null&&(r.onclick=ri),r=!0):r=!1,r||ki(i,!0)}function zp(i){for(Pt=i.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:Pt=Pt.return}}function dr(i){if(i!==Pt)return!1;if(!He)return zp(i),He=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||ef(i.type,i.memoizedProps)),a=!a),a&&lt&&ki(i),zp(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));lt=g0(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));lt=g0(i)}else r===27?(r=lt,Ki(i.type)?(i=of,of=null,lt=i):lt=r):lt=Pt?Cn(i.stateNode.nextSibling):null;return!0}function gs(){lt=Pt=null,He=!1}function Uc(){var i=Di;return i!==null&&(sn===null?sn=i:sn.push.apply(sn,i),Di=null),i}function Co(i){Di===null?Di=[i]:Di.push(i)}var Vc=I(null),ys=null,ui=null;function Pi(i,r,a){ie(Vc,r._currentValue),r._currentValue=a}function ci(i){i._currentValue=Vc.current,J(Vc)}function Bc(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function qc(i,r,a,c){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var x=g.child;v=v.firstContext;e:for(;v!==null;){var _=v;v=g;for(var M=0;M<r.length;M++)if(_.context===r[M]){v.lanes|=a,_=v.alternate,_!==null&&(_.lanes|=a),Bc(v.return,a,i),c||(x=null);break e}v=_.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(s(341));x.lanes|=a,v=x.alternate,v!==null&&(v.lanes|=a),Bc(x,a,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function fr(i,r,a,c){i=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var _=g.type;ln(g.pendingProps.value,x.value)||(i!==null?i.push(_):i=[_])}}else if(g===pe.current){if(x=g.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Zo):i=[Zo])}g=g.return}i!==null&&qc(r,i,a,c),r.flags|=262144}function cl(i){for(i=i.firstContext;i!==null;){if(!ln(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function vs(i){ys=i,ui=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ot(i){return $p(ys,i)}function dl(i,r){return ys===null&&vs(i),$p(i,r)}function $p(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ui===null){if(i===null)throw Error(s(308));ui=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ui=ui.next=r;return a}var RE=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},NE=t.unstable_scheduleCallback,ME=t.unstable_NormalPriority,wt={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gc(){return{controller:new RE,data:new Map,refCount:0}}function Ao(i){i.refCount--,i.refCount===0&&NE(ME,function(){i.controller.abort()})}var Ro=null,Hc=0,hr=0,mr=null;function IE(i,r){if(Ro===null){var a=Ro=[];Hc=0,hr=zd(),mr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Hc++,r.then(Kp,Kp),r}function Kp(){if(--Hc===0&&Ro!==null){mr!==null&&(mr.status="fulfilled");var i=Ro;Ro=null,hr=0,mr=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function DE(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(c.status="rejected",c.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),c}var Jp=P.S;P.S=function(i,r){Iy=ae(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&IE(i,r),Jp!==null&&Jp(i,r)};var bs=I(null);function jc(){var i=bs.current;return i!==null?i:rt.pooledCache}function fl(i,r){r===null?ie(bs,bs.current):ie(bs,r.pool)}function Yp(){var i=jc();return i===null?null:{parent:wt._currentValue,pool:i}}var pr=Error(s(460)),Fc=Error(s(474)),hl=Error(s(542)),ml={then:function(){}};function Wp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xp(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(ri,ri),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Zp(i),i;default:if(typeof r.status=="string")r.then(ri,ri);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=c}},function(c){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Zp(i),i}throw Ts=r,pr}}function Ss(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ts=a,pr):a}}var Ts=null;function Qp(){if(Ts===null)throw Error(s(459));var i=Ts;return Ts=null,i}function Zp(i){if(i===pr||i===hl)throw Error(s(483))}var gr=null,No=0;function pl(i){var r=No;return No+=1,gr===null&&(gr=[]),Xp(gr,i,r)}function Mo(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function gl(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function eg(i){function r(L,k){if(i){var V=L.deletions;V===null?(L.deletions=[k],L.flags|=16):V.push(k)}}function a(L,k){if(!i)return null;for(;k!==null;)r(L,k),k=k.sibling;return null}function c(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function g(L,k){return L=ai(L,k),L.index=0,L.sibling=null,L}function v(L,k,V){return L.index=V,i?(V=L.alternate,V!==null?(V=V.index,V<k?(L.flags|=67108866,k):V):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function x(L){return i&&L.alternate===null&&(L.flags|=67108866),L}function _(L,k,V,X){return k===null||k.tag!==6?(k=Dc(V,L.mode,X),k.return=L,k):(k=g(k,V),k.return=L,k)}function M(L,k,V,X){var Ce=V.type;return Ce===C?Y(L,k,V.props.children,X,V.key):k!==null&&(k.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ee&&Ss(Ce)===k.type)?(k=g(k,V.props),Mo(k,V),k.return=L,k):(k=ll(V.type,V.key,V.props,null,L.mode,X),Mo(k,V),k.return=L,k)}function B(L,k,V,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==V.containerInfo||k.stateNode.implementation!==V.implementation?(k=kc(V,L.mode,X),k.return=L,k):(k=g(k,V.children||[]),k.return=L,k)}function Y(L,k,V,X,Ce){return k===null||k.tag!==7?(k=ps(V,L.mode,X,Ce),k.return=L,k):(k=g(k,V),k.return=L,k)}function Q(L,k,V){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Dc(""+k,L.mode,V),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return V=ll(k.type,k.key,k.props,null,L.mode,V),Mo(V,k),V.return=L,V;case E:return k=kc(k,L.mode,V),k.return=L,k;case ee:return k=Ss(k),Q(L,k,V)}if(Ue(k)||Te(k))return k=ps(k,L.mode,V,null),k.return=L,k;if(typeof k.then=="function")return Q(L,pl(k),V);if(k.$$typeof===N)return Q(L,dl(L,k),V);gl(L,k)}return null}function j(L,k,V,X){var Ce=k!==null?k.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Ce!==null?null:_(L,k,""+V,X);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return V.key===Ce?M(L,k,V,X):null;case E:return V.key===Ce?B(L,k,V,X):null;case ee:return V=Ss(V),j(L,k,V,X)}if(Ue(V)||Te(V))return Ce!==null?null:Y(L,k,V,X,null);if(typeof V.then=="function")return j(L,k,pl(V),X);if(V.$$typeof===N)return j(L,k,dl(L,V),X);gl(L,V)}return null}function $(L,k,V,X,Ce){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return L=L.get(V)||null,_(k,L,""+X,Ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return L=L.get(X.key===null?V:X.key)||null,M(k,L,X,Ce);case E:return L=L.get(X.key===null?V:X.key)||null,B(k,L,X,Ce);case ee:return X=Ss(X),$(L,k,V,X,Ce)}if(Ue(X)||Te(X))return L=L.get(V)||null,Y(k,L,X,Ce,null);if(typeof X.then=="function")return $(L,k,V,pl(X),Ce);if(X.$$typeof===N)return $(L,k,V,dl(k,X),Ce);gl(k,X)}return null}function me(L,k,V,X){for(var Ce=null,Je=null,be=k,Oe=k=0,Ge=null;be!==null&&Oe<V.length;Oe++){be.index>Oe?(Ge=be,be=null):Ge=be.sibling;var Ye=j(L,be,V[Oe],X);if(Ye===null){be===null&&(be=Ge);break}i&&be&&Ye.alternate===null&&r(L,be),k=v(Ye,k,Oe),Je===null?Ce=Ye:Je.sibling=Ye,Je=Ye,be=Ge}if(Oe===V.length)return a(L,be),He&&li(L,Oe),Ce;if(be===null){for(;Oe<V.length;Oe++)be=Q(L,V[Oe],X),be!==null&&(k=v(be,k,Oe),Je===null?Ce=be:Je.sibling=be,Je=be);return He&&li(L,Oe),Ce}for(be=c(be);Oe<V.length;Oe++)Ge=$(be,L,Oe,V[Oe],X),Ge!==null&&(i&&Ge.alternate!==null&&be.delete(Ge.key===null?Oe:Ge.key),k=v(Ge,k,Oe),Je===null?Ce=Ge:Je.sibling=Ge,Je=Ge);return i&&be.forEach(function(Qi){return r(L,Qi)}),He&&li(L,Oe),Ce}function Ne(L,k,V,X){if(V==null)throw Error(s(151));for(var Ce=null,Je=null,be=k,Oe=k=0,Ge=null,Ye=V.next();be!==null&&!Ye.done;Oe++,Ye=V.next()){be.index>Oe?(Ge=be,be=null):Ge=be.sibling;var Qi=j(L,be,Ye.value,X);if(Qi===null){be===null&&(be=Ge);break}i&&be&&Qi.alternate===null&&r(L,be),k=v(Qi,k,Oe),Je===null?Ce=Qi:Je.sibling=Qi,Je=Qi,be=Ge}if(Ye.done)return a(L,be),He&&li(L,Oe),Ce;if(be===null){for(;!Ye.done;Oe++,Ye=V.next())Ye=Q(L,Ye.value,X),Ye!==null&&(k=v(Ye,k,Oe),Je===null?Ce=Ye:Je.sibling=Ye,Je=Ye);return He&&li(L,Oe),Ce}for(be=c(be);!Ye.done;Oe++,Ye=V.next())Ye=$(be,L,Oe,Ye.value,X),Ye!==null&&(i&&Ye.alternate!==null&&be.delete(Ye.key===null?Oe:Ye.key),k=v(Ye,k,Oe),Je===null?Ce=Ye:Je.sibling=Ye,Je=Ye);return i&&be.forEach(function(jC){return r(L,jC)}),He&&li(L,Oe),Ce}function st(L,k,V,X){if(typeof V=="object"&&V!==null&&V.type===C&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case w:e:{for(var Ce=V.key;k!==null;){if(k.key===Ce){if(Ce=V.type,Ce===C){if(k.tag===7){a(L,k.sibling),X=g(k,V.props.children),X.return=L,L=X;break e}}else if(k.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ee&&Ss(Ce)===k.type){a(L,k.sibling),X=g(k,V.props),Mo(X,V),X.return=L,L=X;break e}a(L,k);break}else r(L,k);k=k.sibling}V.type===C?(X=ps(V.props.children,L.mode,X,V.key),X.return=L,L=X):(X=ll(V.type,V.key,V.props,null,L.mode,X),Mo(X,V),X.return=L,L=X)}return x(L);case E:e:{for(Ce=V.key;k!==null;){if(k.key===Ce)if(k.tag===4&&k.stateNode.containerInfo===V.containerInfo&&k.stateNode.implementation===V.implementation){a(L,k.sibling),X=g(k,V.children||[]),X.return=L,L=X;break e}else{a(L,k);break}else r(L,k);k=k.sibling}X=kc(V,L.mode,X),X.return=L,L=X}return x(L);case ee:return V=Ss(V),st(L,k,V,X)}if(Ue(V))return me(L,k,V,X);if(Te(V)){if(Ce=Te(V),typeof Ce!="function")throw Error(s(150));return V=Ce.call(V),Ne(L,k,V,X)}if(typeof V.then=="function")return st(L,k,pl(V),X);if(V.$$typeof===N)return st(L,k,dl(L,V),X);gl(L,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,k!==null&&k.tag===6?(a(L,k.sibling),X=g(k,V),X.return=L,L=X):(a(L,k),X=Dc(V,L.mode,X),X.return=L,L=X),x(L)):a(L,k)}return function(L,k,V,X){try{No=0;var Ce=st(L,k,V,X);return gr=null,Ce}catch(be){if(be===pr||be===hl)throw be;var Je=un(29,be,null,L.mode);return Je.lanes=X,Je.return=L,Je}finally{}}}var xs=eg(!0),tg=eg(!1),Oi=!1;function zc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Li(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ui(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var g=c.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),c.pending=r,r=al(i),Vp(i,null,a),r}return ol(i,c,r,a),al(i)}function Io(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,$m(i,a)}}function Kc(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=x:v=v.next=x,a=a.next}while(a!==null);v===null?g=v=r:v=v.next=r}else g=v=r;a={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Jc=!1;function Do(){if(Jc){var i=mr;if(i!==null)throw i}}function ko(i,r,a,c){Jc=!1;var g=i.updateQueue;Oi=!1;var v=g.firstBaseUpdate,x=g.lastBaseUpdate,_=g.shared.pending;if(_!==null){g.shared.pending=null;var M=_,B=M.next;M.next=null,x===null?v=B:x.next=B,x=M;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,_=Y.lastBaseUpdate,_!==x&&(_===null?Y.firstBaseUpdate=B:_.next=B,Y.lastBaseUpdate=M))}if(v!==null){var Q=g.baseState;x=0,Y=B=M=null,_=v;do{var j=_.lane&-536870913,$=j!==_.lane;if($?(qe&j)===j:(c&j)===j){j!==0&&j===hr&&(Jc=!0),Y!==null&&(Y=Y.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var me=i,Ne=_;j=r;var st=a;switch(Ne.tag){case 1:if(me=Ne.payload,typeof me=="function"){Q=me.call(st,Q,j);break e}Q=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ne.payload,j=typeof me=="function"?me.call(st,Q,j):me,j==null)break e;Q=b({},Q,j);break e;case 2:Oi=!0}}j=_.callback,j!==null&&(i.flags|=64,$&&(i.flags|=8192),$=g.callbacks,$===null?g.callbacks=[j]:$.push(j))}else $={lane:j,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Y===null?(B=Y=$,M=Q):Y=Y.next=$,x|=j;if(_=_.next,_===null){if(_=g.shared.pending,_===null)break;$=_,_=$.next,$.next=null,g.lastBaseUpdate=$,g.shared.pending=null}}while(!0);Y===null&&(M=Q),g.baseState=M,g.firstBaseUpdate=B,g.lastBaseUpdate=Y,v===null&&(g.shared.lanes=0),Hi|=x,i.lanes=x,i.memoizedState=Q}}function ng(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function ig(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)ng(a[i],r)}var yr=I(null),yl=I(0);function sg(i,r){i=bi,ie(yl,i),ie(yr,r),bi=i|r.baseLanes}function Yc(){ie(yl,bi),ie(yr,yr.current)}function Wc(){bi=yl.current,J(yr),J(yl)}var cn=I(null),En=null;function Vi(i){var r=i.alternate;ie(St,St.current&1),ie(cn,i),En===null&&(r===null||yr.current!==null||r.memoizedState!==null)&&(En=i)}function Xc(i){ie(St,St.current),ie(cn,i),En===null&&(En=i)}function rg(i){i.tag===22?(ie(St,St.current),ie(cn,i),En===null&&(En=i)):Bi()}function Bi(){ie(St,St.current),ie(cn,cn.current)}function dn(i){J(cn),En===i&&(En=null),J(St)}var St=I(0);function vl(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sf(a)||rf(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var di=0,ke=null,nt=null,_t=null,bl=!1,vr=!1,ws=!1,Sl=0,Po=0,br=null,kE=0;function yt(){throw Error(s(321))}function Qc(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!ln(i[a],r[a]))return!1;return!0}function Zc(i,r,a,c,g,v){return di=v,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,P.H=i===null||i.memoizedState===null?Hg:md,ws=!1,v=a(c,g),ws=!1,vr&&(v=ag(r,a,c,g)),og(i),v}function og(i){P.H=Uo;var r=nt!==null&&nt.next!==null;if(di=0,_t=nt=ke=null,bl=!1,Po=0,br=null,r)throw Error(s(300));i===null||Et||(i=i.dependencies,i!==null&&cl(i)&&(Et=!0))}function ag(i,r,a,c){ke=i;var g=0;do{if(vr&&(br=null),Po=0,vr=!1,25<=g)throw Error(s(301));if(g+=1,_t=nt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}P.H=jg,v=r(a,c)}while(vr);return v}function PE(){var i=P.H,r=i.useState()[0];return r=typeof r.then=="function"?Oo(r):r,i=i.useState()[0],(nt!==null?nt.memoizedState:null)!==i&&(ke.flags|=1024),r}function ed(){var i=Sl!==0;return Sl=0,i}function td(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function nd(i){if(bl){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}bl=!1}di=0,_t=nt=ke=null,vr=!1,Po=Sl=0,br=null}function Kt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?ke.memoizedState=_t=i:_t=_t.next=i,_t}function Tt(){if(nt===null){var i=ke.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var r=_t===null?ke.memoizedState:_t.next;if(r!==null)_t=r,nt=i;else{if(i===null)throw ke.alternate===null?Error(s(467)):Error(s(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},_t===null?ke.memoizedState=_t=i:_t=_t.next=i}return _t}function Tl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(i){var r=Po;return Po+=1,br===null&&(br=[]),i=Xp(br,i,r),r=ke,(_t===null?r.memoizedState:_t.next)===null&&(r=r.alternate,P.H=r===null||r.memoizedState===null?Hg:md),i}function xl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Oo(i);if(i.$$typeof===N)return Ot(i)}throw Error(s(438,String(i)))}function id(i){var r=null,a=ke.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Tl(),ke.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=ue;return r.index++,a}function fi(i,r){return typeof r=="function"?r(i):r}function wl(i){var r=Tt();return sd(r,nt,i)}function sd(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var g=i.baseQueue,v=c.pending;if(v!==null){if(g!==null){var x=g.next;g.next=v.next,v.next=x}r.baseQueue=g=v,c.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{r=g.next;var _=x=null,M=null,B=r,Y=!1;do{var Q=B.lane&-536870913;if(Q!==B.lane?(qe&Q)===Q:(di&Q)===Q){var j=B.revertLane;if(j===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Q===hr&&(Y=!0);else if((di&j)===j){B=B.next,j===hr&&(Y=!0);continue}else Q={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(_=M=Q,x=v):M=M.next=Q,ke.lanes|=j,Hi|=j;Q=B.action,ws&&a(v,Q),v=B.hasEagerState?B.eagerState:a(v,Q)}else j={lane:Q,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},M===null?(_=M=j,x=v):M=M.next=j,ke.lanes|=Q,Hi|=Q;B=B.next}while(B!==null&&B!==r);if(M===null?x=v:M.next=_,!ln(v,i.memoizedState)&&(Et=!0,Y&&(a=mr,a!==null)))throw a;i.memoizedState=v,i.baseState=x,i.baseQueue=M,c.lastRenderedState=v}return g===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function rd(i){var r=Tt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,g=a.pending,v=r.memoizedState;if(g!==null){a.pending=null;var x=g=g.next;do v=i(v,x.action),x=x.next;while(x!==g);ln(v,r.memoizedState)||(Et=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,c]}function lg(i,r,a){var c=ke,g=Tt(),v=He;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=r();var x=!ln((nt||g).memoizedState,a);if(x&&(g.memoizedState=a,Et=!0),g=g.queue,ld(dg.bind(null,c,g,i),[i]),g.getSnapshot!==r||x||_t!==null&&_t.memoizedState.tag&1){if(c.flags|=2048,Sr(9,{destroy:void 0},cg.bind(null,c,g,a,r),null),rt===null)throw Error(s(349));v||(di&127)!==0||ug(c,r,a)}return a}function ug(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=ke.updateQueue,r===null?(r=Tl(),ke.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function cg(i,r,a,c){r.value=a,r.getSnapshot=c,fg(r)&&hg(i)}function dg(i,r,a){return a(function(){fg(r)&&hg(i)})}function fg(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!ln(i,a)}catch{return!0}}function hg(i){var r=ms(i,2);r!==null&&rn(r,i,2)}function od(i){var r=Kt();if(typeof i=="function"){var a=i;if(i=a(),ws){Ee(!0);try{a()}finally{Ee(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:i},r}function mg(i,r,a,c){return i.baseState=a,sd(i,nt,typeof c=="function"?c:fi)}function OE(i,r,a,c,g){if(Cl(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){v.listeners.push(x)}};P.T!==null?a(!0):v.isTransition=!1,c(v),a=r.pending,a===null?(v.next=r.pending=v,pg(r,v)):(v.next=a.next,r.pending=a.next=v)}}function pg(i,r){var a=r.action,c=r.payload,g=i.state;if(r.isTransition){var v=P.T,x={};P.T=x;try{var _=a(g,c),M=P.S;M!==null&&M(x,_),gg(i,r,_)}catch(B){ad(i,r,B)}finally{v!==null&&x.types!==null&&(v.types=x.types),P.T=v}}else try{v=a(g,c),gg(i,r,v)}catch(B){ad(i,r,B)}}function gg(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){yg(i,r,c)},function(c){return ad(i,r,c)}):yg(i,r,a)}function yg(i,r,a){r.status="fulfilled",r.value=a,vg(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,pg(i,a)))}function ad(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,vg(r),r=r.next;while(r!==c)}i.action=null}function vg(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function bg(i,r){return r}function Sg(i,r){if(He){var a=rt.formState;if(a!==null){e:{var c=ke;if(He){if(lt){t:{for(var g=lt,v=_n;g.nodeType!==8;){if(!v){g=null;break t}if(g=Cn(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){lt=Cn(g.nextSibling),c=g.data==="F!";break e}}ki(c)}c=!1}c&&(r=a[0])}}return a=Kt(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bg,lastRenderedState:r},a.queue=c,a=Bg.bind(null,ke,c),c.dispatch=a,c=od(!1),v=hd.bind(null,ke,!1,c.queue),c=Kt(),g={state:r,dispatch:null,action:i,pending:null},c.queue=g,a=OE.bind(null,ke,g,v,a),g.dispatch=a,c.memoizedState=i,[r,a,!1]}function Tg(i){var r=Tt();return xg(r,nt,i)}function xg(i,r,a){if(r=sd(i,r,bg)[0],i=wl(fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Oo(r)}catch(x){throw x===pr?hl:x}else c=r;r=Tt();var g=r.queue,v=g.dispatch;return a!==r.memoizedState&&(ke.flags|=2048,Sr(9,{destroy:void 0},LE.bind(null,g,a),null)),[c,v,i]}function LE(i,r){i.action=r}function wg(i){var r=Tt(),a=nt;if(a!==null)return xg(r,a,i);Tt(),r=r.memoizedState,a=Tt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function Sr(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=ke.updateQueue,r===null&&(r=Tl(),ke.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function _g(){return Tt().memoizedState}function _l(i,r,a,c){var g=Kt();ke.flags|=i,g.memoizedState=Sr(1|r,{destroy:void 0},a,c===void 0?null:c)}function El(i,r,a,c){var g=Tt();c=c===void 0?null:c;var v=g.memoizedState.inst;nt!==null&&c!==null&&Qc(c,nt.memoizedState.deps)?g.memoizedState=Sr(r,v,a,c):(ke.flags|=i,g.memoizedState=Sr(1|r,v,a,c))}function Eg(i,r){_l(8390656,8,i,r)}function ld(i,r){El(2048,8,i,r)}function UE(i){ke.flags|=4;var r=ke.updateQueue;if(r===null)r=Tl(),ke.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Cg(i){var r=Tt().memoizedState;return UE({ref:r,nextImpl:i}),function(){if((Qe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ag(i,r){return El(4,2,i,r)}function Rg(i,r){return El(4,4,i,r)}function Ng(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Mg(i,r,a){a=a!=null?a.concat([i]):null,El(4,4,Ng.bind(null,r,i),a)}function ud(){}function Ig(i,r){var a=Tt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Qc(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Dg(i,r){var a=Tt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Qc(r,c[1]))return c[0];if(c=i(),ws){Ee(!0);try{i()}finally{Ee(!1)}}return a.memoizedState=[c,r],c}function cd(i,r,a){return a===void 0||(di&1073741824)!==0&&(qe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=ky(),ke.lanes|=i,Hi|=i,a)}function kg(i,r,a,c){return ln(a,r)?a:yr.current!==null?(i=cd(i,a,c),ln(i,r)||(Et=!0),i):(di&42)===0||(di&1073741824)!==0&&(qe&261930)===0?(Et=!0,i.memoizedState=a):(i=ky(),ke.lanes|=i,Hi|=i,r)}function Pg(i,r,a,c,g){var v=H.p;H.p=v!==0&&8>v?v:8;var x=P.T,_={};P.T=_,hd(i,!1,r,a);try{var M=g(),B=P.S;if(B!==null&&B(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var Y=DE(M,c);Lo(i,r,Y,mn(i))}else Lo(i,r,c,mn(i))}catch(Q){Lo(i,r,{then:function(){},status:"rejected",reason:Q},mn())}finally{H.p=v,x!==null&&_.types!==null&&(x.types=_.types),P.T=x}}function VE(){}function dd(i,r,a,c){if(i.tag!==5)throw Error(s(476));var g=Og(i).queue;Pg(i,g,r,ne,a===null?VE:function(){return Lg(i),a(c)})}function Og(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:ne},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Lg(i){var r=Og(i);r.next===null&&(r=i.alternate.memoizedState),Lo(i,r.next.queue,{},mn())}function fd(){return Ot(Zo)}function Ug(){return Tt().memoizedState}function Vg(){return Tt().memoizedState}function BE(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=mn();i=Li(a);var c=Ui(r,i,a);c!==null&&(rn(c,r,a),Io(c,r,a)),r={cache:Gc()},i.payload=r;return}r=r.return}}function qE(i,r,a){var c=mn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cl(i)?qg(r,a):(a=Mc(i,r,a,c),a!==null&&(rn(a,i,c),Gg(a,r,c)))}function Bg(i,r,a){var c=mn();Lo(i,r,a,c)}function Lo(i,r,a,c){var g={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cl(i))qg(r,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var x=r.lastRenderedState,_=v(x,a);if(g.hasEagerState=!0,g.eagerState=_,ln(_,x))return ol(i,r,g,0),rt===null&&rl(),!1}catch{}finally{}if(a=Mc(i,r,g,c),a!==null)return rn(a,i,c),Gg(a,r,c),!0}return!1}function hd(i,r,a,c){if(c={lane:2,revertLane:zd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Cl(i)){if(r)throw Error(s(479))}else r=Mc(i,a,c,2),r!==null&&rn(r,i,2)}function Cl(i){var r=i.alternate;return i===ke||r!==null&&r===ke}function qg(i,r){vr=bl=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function Gg(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,$m(i,a)}}var Uo={readContext:Ot,use:xl,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Uo.useEffectEvent=yt;var Hg={readContext:Ot,use:xl,useCallback:function(i,r){return Kt().memoizedState=[i,r===void 0?null:r],i},useContext:Ot,useEffect:Eg,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,_l(4194308,4,Ng.bind(null,r,i),a)},useLayoutEffect:function(i,r){return _l(4194308,4,i,r)},useInsertionEffect:function(i,r){_l(4,2,i,r)},useMemo:function(i,r){var a=Kt();r=r===void 0?null:r;var c=i();if(ws){Ee(!0);try{i()}finally{Ee(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=Kt();if(a!==void 0){var g=a(r);if(ws){Ee(!0);try{a(r)}finally{Ee(!1)}}}else g=r;return c.memoizedState=c.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},c.queue=i,i=i.dispatch=qE.bind(null,ke,i),[c.memoizedState,i]},useRef:function(i){var r=Kt();return i={current:i},r.memoizedState=i},useState:function(i){i=od(i);var r=i.queue,a=Bg.bind(null,ke,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:ud,useDeferredValue:function(i,r){var a=Kt();return cd(a,i,r)},useTransition:function(){var i=od(!1);return i=Pg.bind(null,ke,i.queue,!0,!1),Kt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=ke,g=Kt();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rt===null)throw Error(s(349));(qe&127)!==0||ug(c,r,a)}g.memoizedState=a;var v={value:a,getSnapshot:r};return g.queue=v,Eg(dg.bind(null,c,v,i),[i]),c.flags|=2048,Sr(9,{destroy:void 0},cg.bind(null,c,v,a,r),null),a},useId:function(){var i=Kt(),r=rt.identifierPrefix;if(He){var a=Wn,c=Yn;a=(c&~(1<<32-pt(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Sl++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=kE++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:fd,useFormState:Sg,useActionState:Sg,useOptimistic:function(i){var r=Kt();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=hd.bind(null,ke,!0,a),a.dispatch=r,[i,r]},useMemoCache:id,useCacheRefresh:function(){return Kt().memoizedState=BE.bind(null,ke)},useEffectEvent:function(i){var r=Kt(),a={impl:i};return r.memoizedState=a,function(){if((Qe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},md={readContext:Ot,use:xl,useCallback:Ig,useContext:Ot,useEffect:ld,useImperativeHandle:Mg,useInsertionEffect:Ag,useLayoutEffect:Rg,useMemo:Dg,useReducer:wl,useRef:_g,useState:function(){return wl(fi)},useDebugValue:ud,useDeferredValue:function(i,r){var a=Tt();return kg(a,nt.memoizedState,i,r)},useTransition:function(){var i=wl(fi)[0],r=Tt().memoizedState;return[typeof i=="boolean"?i:Oo(i),r]},useSyncExternalStore:lg,useId:Ug,useHostTransitionStatus:fd,useFormState:Tg,useActionState:Tg,useOptimistic:function(i,r){var a=Tt();return mg(a,nt,i,r)},useMemoCache:id,useCacheRefresh:Vg};md.useEffectEvent=Cg;var jg={readContext:Ot,use:xl,useCallback:Ig,useContext:Ot,useEffect:ld,useImperativeHandle:Mg,useInsertionEffect:Ag,useLayoutEffect:Rg,useMemo:Dg,useReducer:rd,useRef:_g,useState:function(){return rd(fi)},useDebugValue:ud,useDeferredValue:function(i,r){var a=Tt();return nt===null?cd(a,i,r):kg(a,nt.memoizedState,i,r)},useTransition:function(){var i=rd(fi)[0],r=Tt().memoizedState;return[typeof i=="boolean"?i:Oo(i),r]},useSyncExternalStore:lg,useId:Ug,useHostTransitionStatus:fd,useFormState:wg,useActionState:wg,useOptimistic:function(i,r){var a=Tt();return nt!==null?mg(a,nt,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:id,useCacheRefresh:Vg};jg.useEffectEvent=Cg;function pd(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:b({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var gd={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=mn(),g=Li(c);g.payload=r,a!=null&&(g.callback=a),r=Ui(i,g,c),r!==null&&(rn(r,i,c),Io(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=mn(),g=Li(c);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=Ui(i,g,c),r!==null&&(rn(r,i,c),Io(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=mn(),c=Li(a);c.tag=2,r!=null&&(c.callback=r),r=Ui(i,c,a),r!==null&&(rn(r,i,a),Io(r,i,a))}};function Fg(i,r,a,c,g,v,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,x):r.prototype&&r.prototype.isPureReactComponent?!wo(a,c)||!wo(g,v):!0}function zg(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&gd.enqueueReplaceState(r,r.state,null)}function _s(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=b({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function $g(i){sl(i)}function Kg(i){console.error(i)}function Jg(i){sl(i)}function Al(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Yg(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function yd(i,r,a){return a=Li(a),a.tag=3,a.payload={element:null},a.callback=function(){Al(i,r)},a}function Wg(i){return i=Li(i),i.tag=3,i}function Xg(i,r,a,c){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=c.value;i.payload=function(){return g(v)},i.callback=function(){Yg(r,a,c)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){Yg(r,a,c),typeof g!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function GE(i,r,a,c,g){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&fr(r,a,g,!0),a=cn.current,a!==null){switch(a.tag){case 31:case 13:return En===null?Bl():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,c===ml?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Hd(i,c,g)),!1;case 22:return a.flags|=65536,c===ml?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Hd(i,c,g)),!1}throw Error(s(435,a.tag))}return Hd(i,c,g),Bl(),!1}if(He)return r=cn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,c!==Lc&&(i=Error(s(422),{cause:c}),Co(Tn(i,a)))):(c!==Lc&&(r=Error(s(423),{cause:c}),Co(Tn(r,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,c=Tn(c,a),g=yd(i.stateNode,c,g),Kc(i,g),vt!==4&&(vt=2)),!1;var v=Error(s(520),{cause:c});if(v=Tn(v,a),zo===null?zo=[v]:zo.push(v),vt!==4&&(vt=2),r===null)return!0;c=Tn(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=yd(a.stateNode,c,i),Kc(a,i),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ji===null||!ji.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Wg(g),Xg(g,i,a,c),Kc(a,g),!1}a=a.return}while(a!==null);return!1}var vd=Error(s(461)),Et=!1;function Lt(i,r,a,c){r.child=i===null?tg(r,null,a,c):xs(r,i.child,a,c)}function Qg(i,r,a,c,g){a=a.render;var v=r.ref;if("ref"in c){var x={};for(var _ in c)_!=="ref"&&(x[_]=c[_])}else x=c;return vs(r),c=Zc(i,r,a,x,v,g),_=ed(),i!==null&&!Et?(td(i,r,g),hi(i,r,g)):(He&&_&&Pc(r),r.flags|=1,Lt(i,r,c,g),r.child)}function Zg(i,r,a,c,g){if(i===null){var v=a.type;return typeof v=="function"&&!Ic(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,ey(i,r,v,c,g)):(i=ll(a.type,null,c,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!Cd(i,g)){var x=v.memoizedProps;if(a=a.compare,a=a!==null?a:wo,a(x,c)&&i.ref===r.ref)return hi(i,r,g)}return r.flags|=1,i=ai(v,c),i.ref=r.ref,i.return=r,r.child=i}function ey(i,r,a,c,g){if(i!==null){var v=i.memoizedProps;if(wo(v,c)&&i.ref===r.ref)if(Et=!1,r.pendingProps=c=v,Cd(i,g))(i.flags&131072)!==0&&(Et=!0);else return r.lanes=i.lanes,hi(i,r,g)}return bd(i,r,a,c,g)}function ty(i,r,a,c){var g=c.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=r.child=i.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~v}else c=0,r.child=null;return ny(i,r,v,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&fl(r,v!==null?v.cachePool:null),v!==null?sg(r,v):Yc(),rg(r);else return c=r.lanes=536870912,ny(i,r,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(fl(r,v.cachePool),sg(r,v),Bi(),r.memoizedState=null):(i!==null&&fl(r,null),Yc(),Bi());return Lt(i,r,g,a),r.child}function Vo(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ny(i,r,a,c,g){var v=jc();return v=v===null?null:{parent:wt._currentValue,pool:v},r.memoizedState={baseLanes:a,cachePool:v},i!==null&&fl(r,null),Yc(),rg(r),i!==null&&fr(i,r,c,!0),r.childLanes=g,null}function Rl(i,r){return r=Ml({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function iy(i,r,a){return xs(r,i.child,null,a),i=Rl(r,r.pendingProps),i.flags|=2,dn(r),r.memoizedState=null,i}function HE(i,r,a){var c=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(He){if(c.mode==="hidden")return i=Rl(r,c),r.lanes=536870912,Vo(null,i);if(Xc(r),(i=lt)?(i=p0(i,_n),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ii!==null?{id:Yn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},a=qp(i),a.return=r,r.child=a,Pt=r,lt=null)):i=null,i===null)throw ki(r);return r.lanes=536870912,null}return Rl(r,c)}var v=i.memoizedState;if(v!==null){var x=v.dehydrated;if(Xc(r),g)if(r.flags&256)r.flags&=-257,r=iy(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Et||fr(i,r,a,!1),g=(a&i.childLanes)!==0,Et||g){if(c=rt,c!==null&&(x=Km(c,a),x!==0&&x!==v.retryLane))throw v.retryLane=x,ms(i,x),rn(c,i,x),vd;Bl(),r=iy(i,r,a)}else i=v.treeContext,lt=Cn(x.nextSibling),Pt=r,He=!0,Di=null,_n=!1,i!==null&&jp(r,i),r=Rl(r,c),r.flags|=4096;return r}return i=ai(i.child,{mode:c.mode,children:c.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Nl(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function bd(i,r,a,c,g){return vs(r),a=Zc(i,r,a,c,void 0,g),c=ed(),i!==null&&!Et?(td(i,r,g),hi(i,r,g)):(He&&c&&Pc(r),r.flags|=1,Lt(i,r,a,g),r.child)}function sy(i,r,a,c,g,v){return vs(r),r.updateQueue=null,a=ag(r,c,a,g),og(i),c=ed(),i!==null&&!Et?(td(i,r,v),hi(i,r,v)):(He&&c&&Pc(r),r.flags|=1,Lt(i,r,a,v),r.child)}function ry(i,r,a,c,g){if(vs(r),r.stateNode===null){var v=lr,x=a.contextType;typeof x=="object"&&x!==null&&(v=Ot(x)),v=new a(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=gd,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},zc(r),x=a.contextType,v.context=typeof x=="object"&&x!==null?Ot(x):lr,v.state=r.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(pd(r,a,x,c),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(x=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),x!==v.state&&gd.enqueueReplaceState(v,v.state,null),ko(r,c,v,g),Do(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){v=r.stateNode;var _=r.memoizedProps,M=_s(a,_);v.props=M;var B=v.context,Y=a.contextType;x=lr,typeof Y=="object"&&Y!==null&&(x=Ot(Y));var Q=a.getDerivedStateFromProps;Y=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function",_=r.pendingProps!==_,Y||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(_||B!==x)&&zg(r,v,c,x),Oi=!1;var j=r.memoizedState;v.state=j,ko(r,c,v,g),Do(),B=r.memoizedState,_||j!==B||Oi?(typeof Q=="function"&&(pd(r,a,Q,c),B=r.memoizedState),(M=Oi||Fg(r,a,M,c,j,B,x))?(Y||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=B),v.props=c,v.state=B,v.context=x,c=M):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,$c(i,r),x=r.memoizedProps,Y=_s(a,x),v.props=Y,Q=r.pendingProps,j=v.context,B=a.contextType,M=lr,typeof B=="object"&&B!==null&&(M=Ot(B)),_=a.getDerivedStateFromProps,(B=typeof _=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==Q||j!==M)&&zg(r,v,c,M),Oi=!1,j=r.memoizedState,v.state=j,ko(r,c,v,g),Do();var $=r.memoizedState;x!==Q||j!==$||Oi||i!==null&&i.dependencies!==null&&cl(i.dependencies)?(typeof _=="function"&&(pd(r,a,_,c),$=r.memoizedState),(Y=Oi||Fg(r,a,Y,c,j,$,M)||i!==null&&i.dependencies!==null&&cl(i.dependencies))?(B||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,$,M),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,$,M)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&j===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&j===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=$),v.props=c,v.state=$,v.context=M,c=Y):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&j===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&j===i.memoizedState||(r.flags|=1024),c=!1)}return v=c,Nl(i,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&c?(r.child=xs(r,i.child,null,g),r.child=xs(r,null,a,g)):Lt(i,r,a,g),r.memoizedState=v.state,i=r.child):i=hi(i,r,g),i}function oy(i,r,a,c){return gs(),r.flags|=256,Lt(i,r,a,c),r.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(i){return{baseLanes:i,cachePool:Yp()}}function xd(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=hn),i}function ay(i,r,a){var c=r.pendingProps,g=!1,v=(r.flags&128)!==0,x;if((x=v)||(x=i!==null&&i.memoizedState===null?!1:(St.current&2)!==0),x&&(g=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,i===null){if(He){if(g?Vi(r):Bi(),(i=lt)?(i=p0(i,_n),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ii!==null?{id:Yn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},a=qp(i),a.return=r,r.child=a,Pt=r,lt=null)):i=null,i===null)throw ki(r);return rf(i)?r.lanes=32:r.lanes=536870912,null}var _=c.children;return c=c.fallback,g?(Bi(),g=r.mode,_=Ml({mode:"hidden",children:_},g),c=ps(c,g,a,null),_.return=r,c.return=r,_.sibling=c,r.child=_,c=r.child,c.memoizedState=Td(a),c.childLanes=xd(i,x,a),r.memoizedState=Sd,Vo(null,c)):(Vi(r),wd(r,_))}var M=i.memoizedState;if(M!==null&&(_=M.dehydrated,_!==null)){if(v)r.flags&256?(Vi(r),r.flags&=-257,r=_d(i,r,a)):r.memoizedState!==null?(Bi(),r.child=i.child,r.flags|=128,r=null):(Bi(),_=c.fallback,g=r.mode,c=Ml({mode:"visible",children:c.children},g),_=ps(_,g,a,null),_.flags|=2,c.return=r,_.return=r,c.sibling=_,r.child=c,xs(r,i.child,null,a),c=r.child,c.memoizedState=Td(a),c.childLanes=xd(i,x,a),r.memoizedState=Sd,r=Vo(null,c));else if(Vi(r),rf(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var B=x.dgst;x=B,c=Error(s(419)),c.stack="",c.digest=x,Co({value:c,source:null,stack:null}),r=_d(i,r,a)}else if(Et||fr(i,r,a,!1),x=(a&i.childLanes)!==0,Et||x){if(x=rt,x!==null&&(c=Km(x,a),c!==0&&c!==M.retryLane))throw M.retryLane=c,ms(i,c),rn(x,i,c),vd;sf(_)||Bl(),r=_d(i,r,a)}else sf(_)?(r.flags|=192,r.child=i.child,r=null):(i=M.treeContext,lt=Cn(_.nextSibling),Pt=r,He=!0,Di=null,_n=!1,i!==null&&jp(r,i),r=wd(r,c.children),r.flags|=4096);return r}return g?(Bi(),_=c.fallback,g=r.mode,M=i.child,B=M.sibling,c=ai(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,B!==null?_=ai(B,_):(_=ps(_,g,a,null),_.flags|=2),_.return=r,c.return=r,c.sibling=_,r.child=c,Vo(null,c),c=r.child,_=i.child.memoizedState,_===null?_=Td(a):(g=_.cachePool,g!==null?(M=wt._currentValue,g=g.parent!==M?{parent:M,pool:M}:g):g=Yp(),_={baseLanes:_.baseLanes|a,cachePool:g}),c.memoizedState=_,c.childLanes=xd(i,x,a),r.memoizedState=Sd,Vo(i.child,c)):(Vi(r),a=i.child,i=a.sibling,a=ai(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(x=r.deletions,x===null?(r.deletions=[i],r.flags|=16):x.push(i)),r.child=a,r.memoizedState=null,a)}function wd(i,r){return r=Ml({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Ml(i,r){return i=un(22,i,null,r),i.lanes=0,i}function _d(i,r,a){return xs(r,i.child,null,a),i=wd(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function ly(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Bc(i.return,r,a)}function Ed(i,r,a,c,g,v){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:g,treeForkCount:v}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=a,x.tailMode=g,x.treeForkCount=v)}function uy(i,r,a){var c=r.pendingProps,g=c.revealOrder,v=c.tail;c=c.children;var x=St.current,_=(x&2)!==0;if(_?(x=x&1|2,r.flags|=128):x&=1,ie(St,x),Lt(i,r,c,a),c=He?Eo:0,!_&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ly(i,a,r);else if(i.tag===19)ly(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=r.child,g=null;a!==null;)i=a.alternate,i!==null&&vl(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),Ed(r,!1,g,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&vl(i)===null){r.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Ed(r,!0,a,null,v,c);break;case"together":Ed(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function hi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Hi|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(fr(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=ai(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=ai(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Cd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&cl(i)))}function jE(i,r,a){switch(r.tag){case 3:je(r,r.stateNode.containerInfo),Pi(r,wt,i.memoizedState.cache),gs();break;case 27:case 5:On(r);break;case 4:je(r,r.stateNode.containerInfo);break;case 10:Pi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Xc(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Vi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?ay(i,r,a):(Vi(r),i=hi(i,r,a),i!==null?i.sibling:null);Vi(r);break;case 19:var g=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(fr(i,r,a,!1),c=(a&r.childLanes)!==0),g){if(c)return uy(i,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ie(St,St.current),c)break;return null;case 22:return r.lanes=0,ty(i,r,a,r.pendingProps);case 24:Pi(r,wt,i.memoizedState.cache)}return hi(i,r,a)}function cy(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Et=!0;else{if(!Cd(i,a)&&(r.flags&128)===0)return Et=!1,jE(i,r,a);Et=(i.flags&131072)!==0}else Et=!1,He&&(r.flags&1048576)!==0&&Hp(r,Eo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(i=Ss(r.elementType),r.type=i,typeof i=="function")Ic(i)?(c=_s(i,c),r.tag=1,r=ry(null,r,i,c,a)):(r.tag=0,r=bd(null,r,i,c,a));else{if(i!=null){var g=i.$$typeof;if(g===G){r.tag=11,r=Qg(null,r,i,c,a);break e}else if(g===F){r.tag=14,r=Zg(null,r,i,c,a);break e}}throw r=$e(i)||i,Error(s(306,r,""))}}return r;case 0:return bd(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,g=_s(c,r.pendingProps),ry(i,r,c,g,a);case 3:e:{if(je(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var v=r.memoizedState;g=v.element,$c(i,r),ko(r,c,null,a);var x=r.memoizedState;if(c=x.cache,Pi(r,wt,c),c!==v.cache&&qc(r,[wt],a,!0),Do(),c=x.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=oy(i,r,c,a);break e}else if(c!==g){g=Tn(Error(s(424)),r),Co(g),r=oy(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(lt=Cn(i.firstChild),Pt=r,He=!0,Di=null,_n=!0,a=tg(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gs(),c===g){r=hi(i,r,a);break e}Lt(i,r,c,a)}r=r.child}return r;case 26:return Nl(i,r),i===null?(a=T0(r.type,null,r.pendingProps,null))?r.memoizedState=a:He||(a=r.type,i=r.pendingProps,c=$l(Z.current).createElement(a),c[kt]=r,c[Qt]=i,Ut(c,a,i),It(c),r.stateNode=c):r.memoizedState=T0(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return On(r),i===null&&He&&(c=r.stateNode=v0(r.type,r.pendingProps,Z.current),Pt=r,_n=!0,g=lt,Ki(r.type)?(of=g,lt=Cn(c.firstChild)):lt=g),Lt(i,r,r.pendingProps.children,a),Nl(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&He&&((g=c=lt)&&(c=bC(c,r.type,r.pendingProps,_n),c!==null?(r.stateNode=c,Pt=r,lt=Cn(c.firstChild),_n=!1,g=!0):g=!1),g||ki(r)),On(r),g=r.type,v=r.pendingProps,x=i!==null?i.memoizedProps:null,c=v.children,ef(g,v)?c=null:x!==null&&ef(g,x)&&(r.flags|=32),r.memoizedState!==null&&(g=Zc(i,r,PE,null,null,a),Zo._currentValue=g),Nl(i,r),Lt(i,r,c,a),r.child;case 6:return i===null&&He&&((i=a=lt)&&(a=SC(a,r.pendingProps,_n),a!==null?(r.stateNode=a,Pt=r,lt=null,i=!0):i=!1),i||ki(r)),null;case 13:return ay(i,r,a);case 4:return je(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=xs(r,null,c,a):Lt(i,r,c,a),r.child;case 11:return Qg(i,r,r.type,r.pendingProps,a);case 7:return Lt(i,r,r.pendingProps,a),r.child;case 8:return Lt(i,r,r.pendingProps.children,a),r.child;case 12:return Lt(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Pi(r,r.type,c.value),Lt(i,r,c.children,a),r.child;case 9:return g=r.type._context,c=r.pendingProps.children,vs(r),g=Ot(g),c=c(g),r.flags|=1,Lt(i,r,c,a),r.child;case 14:return Zg(i,r,r.type,r.pendingProps,a);case 15:return ey(i,r,r.type,r.pendingProps,a);case 19:return uy(i,r,a);case 31:return HE(i,r,a);case 22:return ty(i,r,a,r.pendingProps);case 24:return vs(r),c=Ot(wt),i===null?(g=jc(),g===null&&(g=rt,v=Gc(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),r.memoizedState={parent:c,cache:g},zc(r),Pi(r,wt,g)):((i.lanes&a)!==0&&($c(i,r),ko(r,null,null,a),Do()),g=i.memoizedState,v=r.memoizedState,g.parent!==c?(g={parent:c,cache:c},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Pi(r,wt,c)):(c=v.cache,Pi(r,wt,c),c!==g.cache&&qc(r,[wt],a,!0))),Lt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function mi(i){i.flags|=4}function Ad(i,r,a,c,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Uy())i.flags|=8192;else throw Ts=ml,Fc}else i.flags&=-16777217}function dy(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C0(r))if(Uy())i.flags|=8192;else throw Ts=ml,Fc}function Il(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Fm():536870912,i.lanes|=r,_r|=r)}function Bo(i,r){if(!He)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ut(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function FE(i,r,a){var c=r.pendingProps;switch(Oc(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ci(wt),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(dr(r)?mi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Uc())),ut(r),null;case 26:var g=r.type,v=r.memoizedState;return i===null?(mi(r),v!==null?(ut(r),dy(r,v)):(ut(r),Ad(r,g,null,c,a))):v?v!==i.memoizedState?(mi(r),ut(r),dy(r,v)):(ut(r),r.flags&=-16777217):(i=i.memoizedProps,i!==c&&mi(r),ut(r),Ad(r,g,i,c,a)),null;case 27:if(Ln(r),a=Z.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&mi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ut(r),null}i=W.current,dr(r)?Fp(r):(i=v0(g,c,a),r.stateNode=i,mi(r))}return ut(r),null;case 5:if(Ln(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&mi(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(v=W.current,dr(r))Fp(r);else{var x=$l(Z.current);switch(v){case 1:v=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=x.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?x.createElement(g,{is:c.is}):x.createElement(g)}}v[kt]=r,v[Qt]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)v.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=v;e:switch(Ut(v,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&mi(r)}}return ut(r),Ad(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&mi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=Z.current,dr(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,g=Pt,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}i[kt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||a0(i.nodeValue,a)),i||ki(r,!0)}else i=$l(i).createTextNode(c),i[kt]=r,r.stateNode=i}return ut(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(c=dr(r),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[kt]=r}else gs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),i=!1}else a=Uc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(dn(r),r):(dn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ut(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=dr(r),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[kt]=r}else gs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),g=!1}else g=Uc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(dn(r),r):(dn(r),null)}return dn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=r.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),Il(r,r.updateQueue),ut(r),null);case 4:return Le(),i===null&&Yd(r.stateNode.containerInfo),ut(r),null;case 10:return ci(r.type),ut(r),null;case 19:if(J(St),c=r.memoizedState,c===null)return ut(r),null;if(g=(r.flags&128)!==0,v=c.rendering,v===null)if(g)Bo(c,!1);else{if(vt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=vl(i),v!==null){for(r.flags|=128,Bo(c,!1),i=v.updateQueue,r.updateQueue=i,Il(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Bp(a,i),a=a.sibling;return ie(St,St.current&1|2),He&&li(r,c.treeForkCount),r.child}i=i.sibling}c.tail!==null&&ae()>Ll&&(r.flags|=128,g=!0,Bo(c,!1),r.lanes=4194304)}else{if(!g)if(i=vl(v),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,Il(r,i),Bo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!He)return ut(r),null}else 2*ae()-c.renderingStartTime>Ll&&a!==536870912&&(r.flags|=128,g=!0,Bo(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(i=c.last,i!==null?i.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=ae(),i.sibling=null,a=St.current,ie(St,g?a&1|2:a&1),He&&li(r,c.treeForkCount),i):(ut(r),null);case 22:case 23:return dn(r),Wc(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&Il(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&J(bs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ci(wt),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function zE(i,r){switch(Oc(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ci(wt),Le(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ln(r),null;case 31:if(r.memoizedState!==null){if(dn(r),r.alternate===null)throw Error(s(340));gs()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(dn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));gs()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return J(St),null;case 4:return Le(),null;case 10:return ci(r.type),null;case 22:case 23:return dn(r),Wc(),i!==null&&J(bs),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ci(wt),null;case 25:return null;default:return null}}function fy(i,r){switch(Oc(r),r.tag){case 3:ci(wt),Le();break;case 26:case 27:case 5:Ln(r);break;case 4:Le();break;case 31:r.memoizedState!==null&&dn(r);break;case 13:dn(r);break;case 19:J(St);break;case 10:ci(r.type);break;case 22:case 23:dn(r),Wc(),i!==null&&J(bs);break;case 24:ci(wt)}}function qo(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var g=c.next;a=g;do{if((a.tag&i)===i){c=void 0;var v=a.create,x=a.inst;c=v(),x.destroy=c}a=a.next}while(a!==g)}}catch(_){tt(r,r.return,_)}}function qi(i,r,a){try{var c=r.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var v=g.next;c=v;do{if((c.tag&i)===i){var x=c.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,g=r;var M=a,B=_;try{B()}catch(Y){tt(g,M,Y)}}}c=c.next}while(c!==v)}}catch(Y){tt(r,r.return,Y)}}function hy(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{ig(r,a)}catch(c){tt(i,i.return,c)}}}function my(i,r,a){a.props=_s(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){tt(i,r,c)}}function Go(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(g){tt(i,r,g)}}function Xn(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(g){tt(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){tt(i,r,g)}else a.current=null}function py(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(g){tt(i,i.return,g)}}function Rd(i,r,a){try{var c=i.stateNode;hC(c,i.type,a,r),c[Qt]=r}catch(g){tt(i,i.return,g)}}function gy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ki(i.type)||i.tag===4}function Nd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||gy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ki(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Md(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ri));else if(c!==4&&(c===27&&Ki(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Md(i,r,a),i=i.sibling;i!==null;)Md(i,r,a),i=i.sibling}function Dl(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&Ki(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Dl(i,r,a),i=i.sibling;i!==null;)Dl(i,r,a),i=i.sibling}function yy(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Ut(r,c,a),r[kt]=i,r[Qt]=a}catch(v){tt(i,i.return,v)}}var pi=!1,Ct=!1,Id=!1,vy=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function $E(i,r){if(i=i.containerInfo,Qd=Zl,i=Mp(i),_c(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var g=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var x=0,_=-1,M=-1,B=0,Y=0,Q=i,j=null;t:for(;;){for(var $;Q!==a||g!==0&&Q.nodeType!==3||(_=x+g),Q!==v||c!==0&&Q.nodeType!==3||(M=x+c),Q.nodeType===3&&(x+=Q.nodeValue.length),($=Q.firstChild)!==null;)j=Q,Q=$;for(;;){if(Q===i)break t;if(j===a&&++B===g&&(_=x),j===v&&++Y===c&&(M=x),($=Q.nextSibling)!==null)break;Q=j,j=Q.parentNode}Q=$}a=_===-1||M===-1?null:{start:_,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zd={focusedElem:i,selectionRange:a},Zl=!1,Dt=r;Dt!==null;)if(r=Dt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Dt=i;else for(;Dt!==null;){switch(r=Dt,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=r,g=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var me=_s(a.type,g);i=c.getSnapshotBeforeUpdate(me,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){tt(a,a.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)nf(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":nf(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Dt=i;break}Dt=r.return}}function by(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:yi(i,a),c&4&&qo(5,a);break;case 1:if(yi(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(x){tt(a,a.return,x)}else{var g=_s(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(x){tt(a,a.return,x)}}c&64&&hy(a),c&512&&Go(a,a.return);break;case 3:if(yi(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ig(i,r)}catch(x){tt(a,a.return,x)}}break;case 27:r===null&&c&4&&yy(a);case 26:case 5:yi(i,a),r===null&&c&4&&py(a),c&512&&Go(a,a.return);break;case 12:yi(i,a);break;case 31:yi(i,a),c&4&&xy(i,a);break;case 13:yi(i,a),c&4&&wy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=tC.bind(null,a),TC(i,a))));break;case 22:if(c=a.memoizedState!==null||pi,!c){r=r!==null&&r.memoizedState!==null||Ct,g=pi;var v=Ct;pi=c,(Ct=r)&&!v?vi(i,a,(a.subtreeFlags&8772)!==0):yi(i,a),pi=g,Ct=v}break;case 30:break;default:yi(i,a)}}function Sy(i){var r=i.alternate;r!==null&&(i.alternate=null,Sy(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&ac(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ft=null,en=!1;function gi(i,r,a){for(a=a.child;a!==null;)Ty(i,r,a),a=a.sibling}function Ty(i,r,a){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(Re,a)}catch{}switch(a.tag){case 26:Ct||Xn(a,r),gi(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||Xn(a,r);var c=ft,g=en;Ki(a.type)&&(ft=a.stateNode,en=!1),gi(i,r,a),Wo(a.stateNode),ft=c,en=g;break;case 5:Ct||Xn(a,r);case 6:if(c=ft,g=en,ft=null,gi(i,r,a),ft=c,en=g,ft!==null)if(en)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(v){tt(a,r,v)}else try{ft.removeChild(a.stateNode)}catch(v){tt(a,r,v)}break;case 18:ft!==null&&(en?(i=ft,h0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Dr(i)):h0(ft,a.stateNode));break;case 4:c=ft,g=en,ft=a.stateNode.containerInfo,en=!0,gi(i,r,a),ft=c,en=g;break;case 0:case 11:case 14:case 15:qi(2,a,r),Ct||qi(4,a,r),gi(i,r,a);break;case 1:Ct||(Xn(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&my(a,r,c)),gi(i,r,a);break;case 21:gi(i,r,a);break;case 22:Ct=(c=Ct)||a.memoizedState!==null,gi(i,r,a),Ct=c;break;default:gi(i,r,a)}}function xy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Dr(i)}catch(a){tt(r,r.return,a)}}}function wy(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Dr(i)}catch(a){tt(r,r.return,a)}}function KE(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new vy),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new vy),r;default:throw Error(s(435,i.tag))}}function kl(i,r){var a=KE(i);r.forEach(function(c){if(!a.has(c)){a.add(c);var g=nC.bind(null,i,c);c.then(g,g)}})}function tn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var g=a[c],v=i,x=r,_=x;e:for(;_!==null;){switch(_.tag){case 27:if(Ki(_.type)){ft=_.stateNode,en=!1;break e}break;case 5:ft=_.stateNode,en=!1;break e;case 3:case 4:ft=_.stateNode.containerInfo,en=!0;break e}_=_.return}if(ft===null)throw Error(s(160));Ty(v,x,g),ft=null,en=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)_y(r,i),r=r.sibling}var Vn=null;function _y(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:tn(r,i),nn(i),c&4&&(qi(3,i,i.return),qo(3,i),qi(5,i,i.return));break;case 1:tn(r,i),nn(i),c&512&&(Ct||a===null||Xn(a,a.return)),c&64&&pi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var g=Vn;if(tn(r,i),nn(i),c&512&&(Ct||a===null||Xn(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":v=g.getElementsByTagName("title")[0],(!v||v[mo]||v[kt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(c),g.head.insertBefore(v,g.querySelector("head > title"))),Ut(v,c,a),v[kt]=i,It(v),c=v;break e;case"link":var x=_0("link","href",g).get(c+(a.href||""));if(x){for(var _=0;_<x.length;_++)if(v=x[_],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(_,1);break t}}v=g.createElement(c),Ut(v,c,a),g.head.appendChild(v);break;case"meta":if(x=_0("meta","content",g).get(c+(a.content||""))){for(_=0;_<x.length;_++)if(v=x[_],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(_,1);break t}}v=g.createElement(c),Ut(v,c,a),g.head.appendChild(v);break;default:throw Error(s(468,c))}v[kt]=i,It(v),c=v}i.stateNode=c}else E0(g,i.type,i.stateNode);else i.stateNode=w0(g,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?E0(g,i.type,i.stateNode):w0(g,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Rd(i,i.memoizedProps,a.memoizedProps)}break;case 27:tn(r,i),nn(i),c&512&&(Ct||a===null||Xn(a,a.return)),a!==null&&c&4&&Rd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(tn(r,i),nn(i),c&512&&(Ct||a===null||Xn(a,a.return)),i.flags&32){g=i.stateNode;try{tr(g,"")}catch(me){tt(i,i.return,me)}}c&4&&i.stateNode!=null&&(g=i.memoizedProps,Rd(i,g,a!==null?a.memoizedProps:g)),c&1024&&(Id=!0);break;case 6:if(tn(r,i),nn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(me){tt(i,i.return,me)}}break;case 3:if(Yl=null,g=Vn,Vn=Kl(r.containerInfo),tn(r,i),Vn=g,nn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Dr(r.containerInfo)}catch(me){tt(i,i.return,me)}Id&&(Id=!1,Ey(i));break;case 4:c=Vn,Vn=Kl(i.stateNode.containerInfo),tn(r,i),nn(i),Vn=c;break;case 12:tn(r,i),nn(i);break;case 31:tn(r,i),nn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,kl(i,c)));break;case 13:tn(r,i),nn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ol=ae()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,kl(i,c)));break;case 22:g=i.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,B=pi,Y=Ct;if(pi=B||g,Ct=Y||M,tn(r,i),Ct=Y,pi=B,nn(i),c&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||M||pi||Ct||Es(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){M=a=r;try{if(v=M.stateNode,g)x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=M.stateNode;var Q=M.memoizedProps.style,j=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;_.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(me){tt(M,M.return,me)}}}else if(r.tag===6){if(a===null){M=r;try{M.stateNode.nodeValue=g?"":M.memoizedProps}catch(me){tt(M,M.return,me)}}}else if(r.tag===18){if(a===null){M=r;try{var $=M.stateNode;g?m0($,!0):m0(M.stateNode,!1)}catch(me){tt(M,M.return,me)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,kl(i,a))));break;case 19:tn(r,i),nn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,kl(i,c)));break;case 30:break;case 21:break;default:tn(r,i),nn(i)}}function nn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(gy(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,v=Nd(i);Dl(i,v,g);break;case 5:var x=a.stateNode;a.flags&32&&(tr(x,""),a.flags&=-33);var _=Nd(i);Dl(i,_,x);break;case 3:case 4:var M=a.stateNode.containerInfo,B=Nd(i);Md(i,B,M);break;default:throw Error(s(161))}}catch(Y){tt(i,i.return,Y)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Ey(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Ey(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function yi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)by(i,r.alternate,r),r=r.sibling}function Es(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:qi(4,r,r.return),Es(r);break;case 1:Xn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&my(r,r.return,a),Es(r);break;case 27:Wo(r.stateNode);case 26:case 5:Xn(r,r.return),Es(r);break;case 22:r.memoizedState===null&&Es(r);break;case 30:Es(r);break;default:Es(r)}i=i.sibling}}function vi(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,g=i,v=r,x=v.flags;switch(v.tag){case 0:case 11:case 15:vi(g,v,a),qo(4,v);break;case 1:if(vi(g,v,a),c=v,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){tt(c,c.return,B)}if(c=v,g=c.updateQueue,g!==null){var _=c.stateNode;try{var M=g.shared.hiddenCallbacks;if(M!==null)for(g.shared.hiddenCallbacks=null,g=0;g<M.length;g++)ng(M[g],_)}catch(B){tt(c,c.return,B)}}a&&x&64&&hy(v),Go(v,v.return);break;case 27:yy(v);case 26:case 5:vi(g,v,a),a&&c===null&&x&4&&py(v),Go(v,v.return);break;case 12:vi(g,v,a);break;case 31:vi(g,v,a),a&&x&4&&xy(g,v);break;case 13:vi(g,v,a),a&&x&4&&wy(g,v);break;case 22:v.memoizedState===null&&vi(g,v,a),Go(v,v.return);break;case 30:break;default:vi(g,v,a)}r=r.sibling}}function Dd(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ao(a))}function kd(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ao(i))}function Bn(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cy(i,r,a,c),r=r.sibling}function Cy(i,r,a,c){var g=r.flags;switch(r.tag){case 0:case 11:case 15:Bn(i,r,a,c),g&2048&&qo(9,r);break;case 1:Bn(i,r,a,c);break;case 3:Bn(i,r,a,c),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ao(i)));break;case 12:if(g&2048){Bn(i,r,a,c),i=r.stateNode;try{var v=r.memoizedProps,x=v.id,_=v.onPostCommit;typeof _=="function"&&_(x,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(M){tt(r,r.return,M)}}else Bn(i,r,a,c);break;case 31:Bn(i,r,a,c);break;case 13:Bn(i,r,a,c);break;case 23:break;case 22:v=r.stateNode,x=r.alternate,r.memoizedState!==null?v._visibility&2?Bn(i,r,a,c):Ho(i,r):v._visibility&2?Bn(i,r,a,c):(v._visibility|=2,Tr(i,r,a,c,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Dd(x,r);break;case 24:Bn(i,r,a,c),g&2048&&kd(r.alternate,r);break;default:Bn(i,r,a,c)}}function Tr(i,r,a,c,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,x=r,_=a,M=c,B=x.flags;switch(x.tag){case 0:case 11:case 15:Tr(v,x,_,M,g),qo(8,x);break;case 23:break;case 22:var Y=x.stateNode;x.memoizedState!==null?Y._visibility&2?Tr(v,x,_,M,g):Ho(v,x):(Y._visibility|=2,Tr(v,x,_,M,g)),g&&B&2048&&Dd(x.alternate,x);break;case 24:Tr(v,x,_,M,g),g&&B&2048&&kd(x.alternate,x);break;default:Tr(v,x,_,M,g)}r=r.sibling}}function Ho(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,g=c.flags;switch(c.tag){case 22:Ho(a,c),g&2048&&Dd(c.alternate,c);break;case 24:Ho(a,c),g&2048&&kd(c.alternate,c);break;default:Ho(a,c)}r=r.sibling}}var jo=8192;function xr(i,r,a){if(i.subtreeFlags&jo)for(i=i.child;i!==null;)Ay(i,r,a),i=i.sibling}function Ay(i,r,a){switch(i.tag){case 26:xr(i,r,a),i.flags&jo&&i.memoizedState!==null&&kC(a,Vn,i.memoizedState,i.memoizedProps);break;case 5:xr(i,r,a);break;case 3:case 4:var c=Vn;Vn=Kl(i.stateNode.containerInfo),xr(i,r,a),Vn=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=jo,jo=16777216,xr(i,r,a),jo=c):xr(i,r,a));break;default:xr(i,r,a)}}function Ry(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Fo(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Dt=c,My(c,i)}Ry(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ny(i),i=i.sibling}function Ny(i){switch(i.tag){case 0:case 11:case 15:Fo(i),i.flags&2048&&qi(9,i,i.return);break;case 3:Fo(i);break;case 12:Fo(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Pl(i)):Fo(i);break;default:Fo(i)}}function Pl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Dt=c,My(c,i)}Ry(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:qi(8,r,r.return),Pl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pl(r));break;default:Pl(r)}i=i.sibling}}function My(i,r){for(;Dt!==null;){var a=Dt;switch(a.tag){case 0:case 11:case 15:qi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ao(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Dt=c;else e:for(a=i;Dt!==null;){c=Dt;var g=c.sibling,v=c.return;if(Sy(c),c===a){Dt=null;break e}if(g!==null){g.return=v,Dt=g;break e}Dt=v}}}var JE={getCacheForType:function(i){var r=Ot(wt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Ot(wt).controller.signal}},YE=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,Ve=null,qe=0,et=0,fn=null,Gi=!1,wr=!1,Pd=!1,bi=0,vt=0,Hi=0,Cs=0,Od=0,hn=0,_r=0,zo=null,sn=null,Ld=!1,Ol=0,Iy=0,Ll=1/0,Ul=null,ji=null,Nt=0,Fi=null,Er=null,Si=0,Ud=0,Vd=null,Dy=null,$o=0,Bd=null;function mn(){return(Qe&2)!==0&&qe!==0?qe&-qe:P.T!==null?zd():Jm()}function ky(){if(hn===0)if((qe&536870912)===0||He){var i=za;za<<=1,(za&3932160)===0&&(za=262144),hn=i}else hn=536870912;return i=cn.current,i!==null&&(i.flags|=32),hn}function rn(i,r,a){(i===rt&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(Cr(i,0),zi(i,qe,hn,!1)),ho(i,a),((Qe&2)===0||i!==rt)&&(i===rt&&((Qe&2)===0&&(Cs|=a),vt===4&&zi(i,qe,hn,!1)),Qn(i))}function Py(i,r,a){if((Qe&6)!==0)throw Error(s(327));var c=!a&&(r&127)===0&&(r&i.expiredLanes)===0||fo(i,r),g=c?QE(i,r):Gd(i,r,!0),v=c;do{if(g===0){wr&&!c&&zi(i,r,0,!1);break}else{if(a=i.current.alternate,v&&!WE(a)){g=Gd(i,r,!1),v=!1;continue}if(g===2){if(v=r,i.errorRecoveryDisabledLanes&v)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var _=i;g=zo;var M=_.current.memoizedState.isDehydrated;if(M&&(Cr(_,x).flags|=256),x=Gd(_,x,!1),x!==2){if(Pd&&!M){_.errorRecoveryDisabledLanes|=v,Cs|=v,g=4;break e}v=sn,sn=g,v!==null&&(sn===null?sn=v:sn.push.apply(sn,v))}g=x}if(v=!1,g!==2)continue}}if(g===1){Cr(i,0),zi(i,r,0,!0);break}e:{switch(c=i,v=g,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:zi(c,r,hn,!Gi);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=Ol+300-ae(),10<g)){if(zi(c,r,hn,!Gi),Ka(c,0,!0)!==0)break e;Si=r,c.timeoutHandle=d0(Oy.bind(null,c,a,sn,Ul,Ld,r,hn,Cs,_r,Gi,v,"Throttled",-0,0),g);break e}Oy(c,a,sn,Ul,Ld,r,hn,Cs,_r,Gi,v,null,-0,0)}}break}while(!0);Qn(i)}function Oy(i,r,a,c,g,v,x,_,M,B,Y,Q,j,$){if(i.timeoutHandle=-1,Q=r.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},Ay(r,v,Q);var me=(v&62914560)===v?Ol-ae():(v&4194048)===v?Iy-ae():0;if(me=PC(Q,me),me!==null){Si=v,i.cancelPendingCommit=me(jy.bind(null,i,r,v,a,c,g,x,_,M,Y,Q,null,j,$)),zi(i,v,x,!B);return}}jy(i,r,v,a,c,g,x,_,M)}function WE(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var g=a[c],v=g.getSnapshot;g=g.value;try{if(!ln(v(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zi(i,r,a,c){r&=~Od,r&=~Cs,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var g=r;0<g;){var v=31-pt(g),x=1<<v;c[v]=-1,g&=~x}a!==0&&zm(i,a,r)}function Vl(){return(Qe&6)===0?(Ko(0),!1):!0}function qd(){if(Ve!==null){if(et===0)var i=Ve.return;else i=Ve,ui=ys=null,nd(i),gr=null,No=0,i=Ve;for(;i!==null;)fy(i.alternate,i),i=i.return;Ve=null}}function Cr(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,gC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Si=0,qd(),rt=i,Ve=a=ai(i.current,null),qe=r,et=0,fn=null,Gi=!1,wr=fo(i,r),Pd=!1,_r=hn=Od=Cs=Hi=vt=0,sn=zo=null,Ld=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var g=31-pt(c),v=1<<g;r|=i[g],c&=~v}return bi=r,rl(),a}function Ly(i,r){ke=null,P.H=Uo,r===pr||r===hl?(r=Qp(),et=3):r===Fc?(r=Qp(),et=4):et=r===vd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,fn=r,Ve===null&&(vt=1,Al(i,Tn(r,i.current)))}function Uy(){var i=cn.current;return i===null?!0:(qe&4194048)===qe?En===null:(qe&62914560)===qe||(qe&536870912)!==0?i===En:!1}function Vy(){var i=P.H;return P.H=Uo,i===null?Uo:i}function By(){var i=P.A;return P.A=JE,i}function Bl(){vt=4,Gi||(qe&4194048)!==qe&&cn.current!==null||(wr=!0),(Hi&134217727)===0&&(Cs&134217727)===0||rt===null||zi(rt,qe,hn,!1)}function Gd(i,r,a){var c=Qe;Qe|=2;var g=Vy(),v=By();(rt!==i||qe!==r)&&(Ul=null,Cr(i,r)),r=!1;var x=vt;e:do try{if(et!==0&&Ve!==null){var _=Ve,M=fn;switch(et){case 8:qd(),x=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(r=!0);var B=et;if(et=0,fn=null,Ar(i,_,M,B),a&&wr){x=0;break e}break;default:B=et,et=0,fn=null,Ar(i,_,M,B)}}XE(),x=vt;break}catch(Y){Ly(i,Y)}while(!0);return r&&i.shellSuspendCounter++,ui=ys=null,Qe=c,P.H=g,P.A=v,Ve===null&&(rt=null,qe=0,rl()),x}function XE(){for(;Ve!==null;)qy(Ve)}function QE(i,r){var a=Qe;Qe|=2;var c=Vy(),g=By();rt!==i||qe!==r?(Ul=null,Ll=ae()+500,Cr(i,r)):wr=fo(i,r);e:do try{if(et!==0&&Ve!==null){r=Ve;var v=fn;t:switch(et){case 1:et=0,fn=null,Ar(i,r,v,1);break;case 2:case 9:if(Wp(v)){et=0,fn=null,Gy(r);break}r=function(){et!==2&&et!==9||rt!==i||(et=7),Qn(i)},v.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Wp(v)?(et=0,fn=null,Gy(r)):(et=0,fn=null,Ar(i,r,v,7));break;case 5:var x=null;switch(Ve.tag){case 26:x=Ve.memoizedState;case 5:case 27:var _=Ve;if(x?C0(x):_.stateNode.complete){et=0,fn=null;var M=_.sibling;if(M!==null)Ve=M;else{var B=_.return;B!==null?(Ve=B,ql(B)):Ve=null}break t}}et=0,fn=null,Ar(i,r,v,5);break;case 6:et=0,fn=null,Ar(i,r,v,6);break;case 8:qd(),vt=6;break e;default:throw Error(s(462))}}ZE();break}catch(Y){Ly(i,Y)}while(!0);return ui=ys=null,P.H=c,P.A=g,Qe=a,Ve!==null?0:(rt=null,qe=0,rl(),vt)}function ZE(){for(;Ve!==null&&!Js();)qy(Ve)}function qy(i){var r=cy(i.alternate,i,bi);i.memoizedProps=i.pendingProps,r===null?ql(i):Ve=r}function Gy(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=sy(a,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=sy(a,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:nd(r);default:fy(a,r),r=Ve=Bp(r,bi),r=cy(a,r,bi)}i.memoizedProps=i.pendingProps,r===null?ql(i):Ve=r}function Ar(i,r,a,c){ui=ys=null,nd(r),gr=null,No=0;var g=r.return;try{if(GE(i,g,r,a,qe)){vt=1,Al(i,Tn(a,i.current)),Ve=null;return}}catch(v){if(g!==null)throw Ve=g,v;vt=1,Al(i,Tn(a,i.current)),Ve=null;return}r.flags&32768?(He||c===1?i=!0:wr||(qe&536870912)!==0?i=!1:(Gi=i=!0,(c===2||c===9||c===3||c===6)&&(c=cn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Hy(r,i)):ql(r)}function ql(i){var r=i;do{if((r.flags&32768)!==0){Hy(r,Gi);return}i=r.return;var a=FE(r.alternate,r,bi);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=i}while(r!==null);vt===0&&(vt=5)}function Hy(i,r){do{var a=zE(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);vt=6,Ve=null}function jy(i,r,a,c,g,v,x,_,M){i.cancelPendingCommit=null;do Gl();while(Nt!==0);if((Qe&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Nc,D_(i,a,v,x,_,M),i===rt&&(Ve=rt=null,qe=0),Er=r,Fi=i,Si=a,Ud=v,Vd=g,Dy=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,iC(at,function(){return Jy(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=P.T,P.T=null,g=H.p,H.p=2,x=Qe,Qe|=4;try{$E(i,r,a)}finally{Qe=x,H.p=g,P.T=c}}Nt=1,Fy(),zy(),$y()}}function Fy(){if(Nt===1){Nt=0;var i=Fi,r=Er,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=P.T,P.T=null;var c=H.p;H.p=2;var g=Qe;Qe|=4;try{_y(r,i);var v=Zd,x=Mp(i.containerInfo),_=v.focusedElem,M=v.selectionRange;if(x!==_&&_&&_.ownerDocument&&Np(_.ownerDocument.documentElement,_)){if(M!==null&&_c(_)){var B=M.start,Y=M.end;if(Y===void 0&&(Y=B),"selectionStart"in _)_.selectionStart=B,_.selectionEnd=Math.min(Y,_.value.length);else{var Q=_.ownerDocument||document,j=Q&&Q.defaultView||window;if(j.getSelection){var $=j.getSelection(),me=_.textContent.length,Ne=Math.min(M.start,me),st=M.end===void 0?Ne:Math.min(M.end,me);!$.extend&&Ne>st&&(x=st,st=Ne,Ne=x);var L=Rp(_,Ne),k=Rp(_,st);if(L&&k&&($.rangeCount!==1||$.anchorNode!==L.node||$.anchorOffset!==L.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var V=Q.createRange();V.setStart(L.node,L.offset),$.removeAllRanges(),Ne>st?($.addRange(V),$.extend(k.node,k.offset)):(V.setEnd(k.node,k.offset),$.addRange(V))}}}}for(Q=[],$=_;$=$.parentNode;)$.nodeType===1&&Q.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Q.length;_++){var X=Q[_];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Zl=!!Qd,Zd=Qd=null}finally{Qe=g,H.p=c,P.T=a}}i.current=r,Nt=2}}function zy(){if(Nt===2){Nt=0;var i=Fi,r=Er,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=P.T,P.T=null;var c=H.p;H.p=2;var g=Qe;Qe|=4;try{by(i,r.alternate,r)}finally{Qe=g,H.p=c,P.T=a}}Nt=3}}function $y(){if(Nt===4||Nt===3){Nt=0,oe();var i=Fi,r=Er,a=Si,c=Dy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Nt=5:(Nt=0,Er=Fi=null,Ky(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ji=null),rc(a),r=r.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(Re,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=P.T,g=H.p,H.p=2,P.T=null;try{for(var v=i.onRecoverableError,x=0;x<c.length;x++){var _=c[x];v(_.value,{componentStack:_.stack})}}finally{P.T=r,H.p=g}}(Si&3)!==0&&Gl(),Qn(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Bd?$o++:($o=0,Bd=i):$o=0,Ko(0)}}function Ky(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Ao(r)))}function Gl(){return Fy(),zy(),$y(),Jy()}function Jy(){if(Nt!==5)return!1;var i=Fi,r=Ud;Ud=0;var a=rc(Si),c=P.T,g=H.p;try{H.p=32>a?32:a,P.T=null,a=Vd,Vd=null;var v=Fi,x=Si;if(Nt=0,Er=Fi=null,Si=0,(Qe&6)!==0)throw Error(s(331));var _=Qe;if(Qe|=4,Ny(v.current),Cy(v,v.current,x,a),Qe=_,Ko(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(Re,v)}catch{}return!0}finally{H.p=g,P.T=c,Ky(i,r)}}function Yy(i,r,a){r=Tn(a,r),r=yd(i.stateNode,r,2),i=Ui(i,r,2),i!==null&&(ho(i,2),Qn(i))}function tt(i,r,a){if(i.tag===3)Yy(i,i,a);else for(;r!==null;){if(r.tag===3){Yy(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ji===null||!ji.has(c))){i=Tn(a,i),a=Wg(2),c=Ui(r,a,2),c!==null&&(Xg(a,c,r,i),ho(c,2),Qn(c));break}}r=r.return}}function Hd(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new YE;var g=new Set;c.set(r,g)}else g=c.get(r),g===void 0&&(g=new Set,c.set(r,g));g.has(a)||(Pd=!0,g.add(a),i=eC.bind(null,i,r,a),r.then(i,i))}function eC(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(qe&a)===a&&(vt===4||vt===3&&(qe&62914560)===qe&&300>ae()-Ol?(Qe&2)===0&&Cr(i,0):Od|=a,_r===qe&&(_r=0)),Qn(i)}function Wy(i,r){r===0&&(r=Fm()),i=ms(i,r),i!==null&&(ho(i,r),Qn(i))}function tC(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),Wy(i,a)}function nC(i,r){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),Wy(i,a)}function iC(i,r){return Ai(i,r)}var Hl=null,Rr=null,jd=!1,jl=!1,Fd=!1,$i=0;function Qn(i){i!==Rr&&i.next===null&&(Rr===null?Hl=Rr=i:Rr=Rr.next=i),jl=!0,jd||(jd=!0,rC())}function Ko(i,r){if(!Fd&&jl){Fd=!0;do for(var a=!1,c=Hl;c!==null;){if(i!==0){var g=c.pendingLanes;if(g===0)var v=0;else{var x=c.suspendedLanes,_=c.pingedLanes;v=(1<<31-pt(42|i)+1)-1,v&=g&~(x&~_),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,e0(c,v))}else v=qe,v=Ka(c,c===rt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||fo(c,v)||(a=!0,e0(c,v));c=c.next}while(a);Fd=!1}}function sC(){Xy()}function Xy(){jl=jd=!1;var i=0;$i!==0&&pC()&&(i=$i);for(var r=ae(),a=null,c=Hl;c!==null;){var g=c.next,v=Qy(c,r);v===0?(c.next=null,a===null?Hl=g:a.next=g,g===null&&(Rr=a)):(a=c,(i!==0||(v&3)!==0)&&(jl=!0)),c=g}Nt!==0&&Nt!==5||Ko(i),$i!==0&&($i=0)}function Qy(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var x=31-pt(v),_=1<<x,M=g[x];M===-1?((_&a)===0||(_&c)!==0)&&(g[x]=I_(_,r)):M<=r&&(i.expiredLanes|=_),v&=~_}if(r=rt,a=qe,a=Ka(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(et===2||et===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ri(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||fo(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Ri(c),rc(a)){case 2:case 8:a=Xe;break;case 32:a=at;break;case 268435456:a=K;break;default:a=at}return c=Zy.bind(null,i),a=Ai(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Ri(c),i.callbackPriority=2,i.callbackNode=null,2}function Zy(i,r){if(Nt!==0&&Nt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Gl()&&i.callbackNode!==a)return null;var c=qe;return c=Ka(i,i===rt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Py(i,c,r),Qy(i,ae()),i.callbackNode!=null&&i.callbackNode===a?Zy.bind(null,i):null)}function e0(i,r){if(Gl())return null;Py(i,r,!0)}function rC(){yC(function(){(Qe&6)!==0?Ai(Fe,sC):Xy()})}function zd(){if($i===0){var i=hr;i===0&&(i=Fa,Fa<<=1,(Fa&261888)===0&&(Fa=256)),$i=i}return $i}function t0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Xa(""+i)}function n0(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function oC(i,r,a,c,g){if(r==="submit"&&a&&a.stateNode===g){var v=t0((g[Qt]||null).action),x=c.submitter;x&&(r=(r=x[Qt]||null)?t0(r.formAction):x.getAttribute("formAction"),r!==null&&(v=r,x=null));var _=new tl("action","action",null,c,g);i.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if($i!==0){var M=x?n0(g,x):new FormData(g);dd(a,{pending:!0,data:M,method:g.method,action:v},null,M)}}else typeof v=="function"&&(_.preventDefault(),M=x?n0(g,x):new FormData(g),dd(a,{pending:!0,data:M,method:g.method,action:v},v,M))},currentTarget:g}]})}}for(var $d=0;$d<Rc.length;$d++){var Kd=Rc[$d],aC=Kd.toLowerCase(),lC=Kd[0].toUpperCase()+Kd.slice(1);Un(aC,"on"+lC)}Un(kp,"onAnimationEnd"),Un(Pp,"onAnimationIteration"),Un(Op,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(_E,"onTransitionRun"),Un(EE,"onTransitionStart"),Un(CE,"onTransitionCancel"),Un(Lp,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jo));function i0(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],g=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var x=c.length-1;0<=x;x--){var _=c[x],M=_.instance,B=_.currentTarget;if(_=_.listener,M!==v&&g.isPropagationStopped())break e;v=_,g.currentTarget=B;try{v(g)}catch(Y){sl(Y)}g.currentTarget=null,v=M}else for(x=0;x<c.length;x++){if(_=c[x],M=_.instance,B=_.currentTarget,_=_.listener,M!==v&&g.isPropagationStopped())break e;v=_,g.currentTarget=B;try{v(g)}catch(Y){sl(Y)}g.currentTarget=null,v=M}}}}function Be(i,r){var a=r[oc];a===void 0&&(a=r[oc]=new Set);var c=i+"__bubble";a.has(c)||(s0(r,i,2,!1),a.add(c))}function Jd(i,r,a){var c=0;r&&(c|=4),s0(a,i,c,r)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function Yd(i){if(!i[Fl]){i[Fl]=!0,Xm.forEach(function(a){a!=="selectionchange"&&(uC.has(a)||Jd(a,!1,i),Jd(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Fl]||(r[Fl]=!0,Jd("selectionchange",!1,r))}}function s0(i,r,a,c){switch(k0(r)){case 2:var g=UC;break;case 8:g=VC;break;default:g=df}a=g.bind(null,r,a,i),g=void 0,!pc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),c?g!==void 0?i.addEventListener(r,a,{capture:!0,passive:g}):i.addEventListener(r,a,!0):g!==void 0?i.addEventListener(r,a,{passive:g}):i.addEventListener(r,a,!1)}function Wd(i,r,a,c,g){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var _=c.stateNode.containerInfo;if(_===g)break;if(x===4)for(x=c.return;x!==null;){var M=x.tag;if((M===3||M===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;_!==null;){if(x=Ws(_),x===null)return;if(M=x.tag,M===5||M===6||M===26||M===27){c=v=x;continue e}_=_.parentNode}}c=c.return}up(function(){var B=v,Y=hc(a),Q=[];e:{var j=Up.get(i);if(j!==void 0){var $=tl,me=i;switch(i){case"keypress":if(Za(a)===0)break e;case"keydown":case"keyup":$=nE;break;case"focusin":me="focus",$=bc;break;case"focusout":me="blur",$=bc;break;case"beforeblur":case"afterblur":$=bc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=F_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=rE;break;case kp:case Pp:case Op:$=K_;break;case Lp:$=aE;break;case"scroll":case"scrollend":$=H_;break;case"wheel":$=uE;break;case"copy":case"cut":case"paste":$=Y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=mp;break;case"toggle":case"beforetoggle":$=dE}var Ne=(r&4)!==0,st=!Ne&&(i==="scroll"||i==="scrollend"),L=Ne?j!==null?j+"Capture":null:j;Ne=[];for(var k=B,V;k!==null;){var X=k;if(V=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||V===null||L===null||(X=go(k,L),X!=null&&Ne.push(Yo(k,X,V))),st)break;k=k.return}0<Ne.length&&(j=new $(j,me,null,a,Y),Q.push({event:j,listeners:Ne}))}}if((r&7)===0){e:{if(j=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",j&&a!==fc&&(me=a.relatedTarget||a.fromElement)&&(Ws(me)||me[Ys]))break e;if(($||j)&&(j=Y.window===Y?Y:(j=Y.ownerDocument)?j.defaultView||j.parentWindow:window,$?(me=a.relatedTarget||a.toElement,$=B,me=me?Ws(me):null,me!==null&&(st=l(me),Ne=me.tag,me!==st||Ne!==5&&Ne!==27&&Ne!==6)&&(me=null)):($=null,me=B),$!==me)){if(Ne=fp,X="onMouseLeave",L="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=mp,X="onPointerLeave",L="onPointerEnter",k="pointer"),st=$==null?j:po($),V=me==null?j:po(me),j=new Ne(X,k+"leave",$,a,Y),j.target=st,j.relatedTarget=V,X=null,Ws(Y)===B&&(Ne=new Ne(L,k+"enter",me,a,Y),Ne.target=V,Ne.relatedTarget=st,X=Ne),st=X,$&&me)t:{for(Ne=cC,L=$,k=me,V=0,X=L;X;X=Ne(X))V++;X=0;for(var Ce=k;Ce;Ce=Ne(Ce))X++;for(;0<V-X;)L=Ne(L),V--;for(;0<X-V;)k=Ne(k),X--;for(;V--;){if(L===k||k!==null&&L===k.alternate){Ne=L;break t}L=Ne(L),k=Ne(k)}Ne=null}else Ne=null;$!==null&&r0(Q,j,$,Ne,!1),me!==null&&st!==null&&r0(Q,st,me,Ne,!0)}}e:{if(j=B?po(B):window,$=j.nodeName&&j.nodeName.toLowerCase(),$==="select"||$==="input"&&j.type==="file")var Je=xp;else if(Sp(j))if(wp)Je=TE;else{Je=bE;var be=vE}else $=j.nodeName,!$||$.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?B&&dc(B.elementType)&&(Je=xp):Je=SE;if(Je&&(Je=Je(i,B))){Tp(Q,Je,a,Y);break e}be&&be(i,j,B),i==="focusout"&&B&&j.type==="number"&&B.memoizedProps.value!=null&&cc(j,"number",j.value)}switch(be=B?po(B):window,i){case"focusin":(Sp(be)||be.contentEditable==="true")&&(rr=be,Ec=B,_o=null);break;case"focusout":_o=Ec=rr=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,Ip(Q,a,Y);break;case"selectionchange":if(wE)break;case"keydown":case"keyup":Ip(Q,a,Y)}var Oe;if(Tc)e:{switch(i){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else sr?vp(i,a)&&(Ge="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(pp&&a.locale!=="ko"&&(sr||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&sr&&(Oe=cp()):(Mi=Y,gc="value"in Mi?Mi.value:Mi.textContent,sr=!0)),be=zl(B,Ge),0<be.length&&(Ge=new hp(Ge,i,null,a,Y),Q.push({event:Ge,listeners:be}),Oe?Ge.data=Oe:(Oe=bp(a),Oe!==null&&(Ge.data=Oe)))),(Oe=hE?mE(i,a):pE(i,a))&&(Ge=zl(B,"onBeforeInput"),0<Ge.length&&(be=new hp("onBeforeInput","beforeinput",null,a,Y),Q.push({event:be,listeners:Ge}),be.data=Oe)),oC(Q,i,B,a,Y)}i0(Q,r)})}function Yo(i,r,a){return{instance:i,listener:r,currentTarget:a}}function zl(i,r){for(var a=r+"Capture",c=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=go(i,a),g!=null&&c.unshift(Yo(i,g,v)),g=go(i,r),g!=null&&c.push(Yo(i,g,v))),i.tag===3)return c;i=i.return}return[]}function cC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function r0(i,r,a,c,g){for(var v=r._reactName,x=[];a!==null&&a!==c;){var _=a,M=_.alternate,B=_.stateNode;if(_=_.tag,M!==null&&M===c)break;_!==5&&_!==26&&_!==27||B===null||(M=B,g?(B=go(a,v),B!=null&&x.unshift(Yo(a,B,M))):g||(B=go(a,v),B!=null&&x.push(Yo(a,B,M)))),a=a.return}x.length!==0&&i.push({event:r,listeners:x})}var dC=/\r\n?/g,fC=/\u0000|\uFFFD/g;function o0(i){return(typeof i=="string"?i:""+i).replace(dC,`
`).replace(fC,"")}function a0(i,r){return r=o0(r),o0(i)===r}function it(i,r,a,c,g,v){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||tr(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&tr(i,""+c);break;case"className":Ya(i,"class",c);break;case"tabIndex":Ya(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ya(i,a,c);break;case"style":ap(i,c,v);break;case"data":if(r!=="object"){Ya(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Xa(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&it(i,r,"name",g.name,g,null),it(i,r,"formEncType",g.formEncType,g,null),it(i,r,"formMethod",g.formMethod,g,null),it(i,r,"formTarget",g.formTarget,g,null)):(it(i,r,"encType",g.encType,g,null),it(i,r,"method",g.method,g,null),it(i,r,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Xa(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=ri);break;case"onScroll":c!=null&&Be("scroll",i);break;case"onScrollEnd":c!=null&&Be("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Xa(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Be("beforetoggle",i),Be("toggle",i),Ja(i,"popover",c);break;case"xlinkActuate":si(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":si(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":si(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":si(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":si(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":si(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":si(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":si(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":si(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ja(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=q_.get(a)||a,Ja(i,a,c))}}function Xd(i,r,a,c,g,v){switch(a){case"style":ap(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?tr(i,c):(typeof c=="number"||typeof c=="bigint")&&tr(i,""+c);break;case"onScroll":c!=null&&Be("scroll",i);break;case"onScrollEnd":c!=null&&Be("scrollend",i);break;case"onClick":c!=null&&(i.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),v=i[Qt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(r,v,g),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,g);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Ja(i,a,c)}}}function Ut(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",i),Be("load",i);var c=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var x=a[v];if(x!=null)switch(v){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(i,r,v,x,a,null)}}g&&it(i,r,"srcSet",a.srcSet,a,null),c&&it(i,r,"src",a.src,a,null);return;case"input":Be("invalid",i);var _=v=x=g=null,M=null,B=null;for(c in a)if(a.hasOwnProperty(c)){var Y=a[c];if(Y!=null)switch(c){case"name":g=Y;break;case"type":x=Y;break;case"checked":M=Y;break;case"defaultChecked":B=Y;break;case"value":v=Y;break;case"defaultValue":_=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:it(i,r,c,Y,a,null)}}ip(i,v,_,M,B,x,g,!1);return;case"select":Be("invalid",i),c=x=v=null;for(g in a)if(a.hasOwnProperty(g)&&(_=a[g],_!=null))switch(g){case"value":v=_;break;case"defaultValue":x=_;break;case"multiple":c=_;default:it(i,r,g,_,a,null)}r=v,a=x,i.multiple=!!c,r!=null?er(i,!!c,r,!1):a!=null&&er(i,!!c,a,!0);return;case"textarea":Be("invalid",i),v=g=c=null;for(x in a)if(a.hasOwnProperty(x)&&(_=a[x],_!=null))switch(x){case"value":c=_;break;case"defaultValue":g=_;break;case"children":v=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:it(i,r,x,_,a,null)}rp(i,c,g,v);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(c=a[M],c!=null))switch(M){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(i,r,M,c,a,null)}return;case"dialog":Be("beforetoggle",i),Be("toggle",i),Be("cancel",i),Be("close",i);break;case"iframe":case"object":Be("load",i);break;case"video":case"audio":for(c=0;c<Jo.length;c++)Be(Jo[c],i);break;case"image":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"embed":case"source":case"link":Be("error",i),Be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(c=a[B],c!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(i,r,B,c,a,null)}return;default:if(dc(r)){for(Y in a)a.hasOwnProperty(Y)&&(c=a[Y],c!==void 0&&Xd(i,r,Y,c,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(c=a[_],c!=null&&it(i,r,_,c,a,null))}function hC(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,x=null,_=null,M=null,B=null,Y=null;for($ in a){var Q=a[$];if(a.hasOwnProperty($)&&Q!=null)switch($){case"checked":break;case"value":break;case"defaultValue":M=Q;default:c.hasOwnProperty($)||it(i,r,$,null,c,Q)}}for(var j in c){var $=c[j];if(Q=a[j],c.hasOwnProperty(j)&&($!=null||Q!=null))switch(j){case"type":v=$;break;case"name":g=$;break;case"checked":B=$;break;case"defaultChecked":Y=$;break;case"value":x=$;break;case"defaultValue":_=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==Q&&it(i,r,j,$,c,Q)}}uc(i,x,_,M,B,Y,v,g);return;case"select":$=x=_=j=null;for(v in a)if(M=a[v],a.hasOwnProperty(v)&&M!=null)switch(v){case"value":break;case"multiple":$=M;default:c.hasOwnProperty(v)||it(i,r,v,null,c,M)}for(g in c)if(v=c[g],M=a[g],c.hasOwnProperty(g)&&(v!=null||M!=null))switch(g){case"value":j=v;break;case"defaultValue":_=v;break;case"multiple":x=v;default:v!==M&&it(i,r,g,v,c,M)}r=_,a=x,c=$,j!=null?er(i,!!a,j,!1):!!c!=!!a&&(r!=null?er(i,!!a,r,!0):er(i,!!a,a?[]:"",!1));return;case"textarea":$=j=null;for(_ in a)if(g=a[_],a.hasOwnProperty(_)&&g!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:it(i,r,_,null,c,g)}for(x in c)if(g=c[x],v=a[x],c.hasOwnProperty(x)&&(g!=null||v!=null))switch(x){case"value":j=g;break;case"defaultValue":$=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==v&&it(i,r,x,g,c,v)}sp(i,j,$);return;case"option":for(var me in a)if(j=a[me],a.hasOwnProperty(me)&&j!=null&&!c.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:it(i,r,me,null,c,j)}for(M in c)if(j=c[M],$=a[M],c.hasOwnProperty(M)&&j!==$&&(j!=null||$!=null))switch(M){case"selected":i.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:it(i,r,M,j,c,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in a)j=a[Ne],a.hasOwnProperty(Ne)&&j!=null&&!c.hasOwnProperty(Ne)&&it(i,r,Ne,null,c,j);for(B in c)if(j=c[B],$=a[B],c.hasOwnProperty(B)&&j!==$&&(j!=null||$!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,r));break;default:it(i,r,B,j,c,$)}return;default:if(dc(r)){for(var st in a)j=a[st],a.hasOwnProperty(st)&&j!==void 0&&!c.hasOwnProperty(st)&&Xd(i,r,st,void 0,c,j);for(Y in c)j=c[Y],$=a[Y],!c.hasOwnProperty(Y)||j===$||j===void 0&&$===void 0||Xd(i,r,Y,j,c,$);return}}for(var L in a)j=a[L],a.hasOwnProperty(L)&&j!=null&&!c.hasOwnProperty(L)&&it(i,r,L,null,c,j);for(Q in c)j=c[Q],$=a[Q],!c.hasOwnProperty(Q)||j===$||j==null&&$==null||it(i,r,Q,j,c,$)}function l0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var g=a[c],v=g.transferSize,x=g.initiatorType,_=g.duration;if(v&&_&&l0(x)){for(x=0,_=g.responseEnd,c+=1;c<a.length;c++){var M=a[c],B=M.startTime;if(B>_)break;var Y=M.transferSize,Q=M.initiatorType;Y&&l0(Q)&&(M=M.responseEnd,x+=Y*(M<_?1:(_-B)/(M-B)))}if(--c,r+=8*(v+x)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Qd=null,Zd=null;function $l(i){return i.nodeType===9?i:i.ownerDocument}function u0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function c0(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function ef(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var tf=null;function pC(){var i=window.event;return i&&i.type==="popstate"?i===tf?!1:(tf=i,!0):(tf=null,!1)}var d0=typeof setTimeout=="function"?setTimeout:void 0,gC=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,yC=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(i){return f0.resolve(null).then(i).catch(vC)}:d0;function vC(i){setTimeout(function(){throw i})}function Ki(i){return i==="head"}function h0(i,r){var a=r,c=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(g),Dr(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Wo(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Wo(a);for(var v=a.firstChild;v;){var x=v.nextSibling,_=v.nodeName;v[mo]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=x}}else a==="body"&&Wo(i.ownerDocument.body);a=g}while(a);Dr(r)}function m0(i,r){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function nf(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nf(a),ac(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function bC(i,r,a,c){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[mo])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Cn(i.nextSibling),i===null)break}return null}function SC(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Cn(i.nextSibling),i===null))return null;return i}function p0(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Cn(i.nextSibling),i===null))return null;return i}function sf(i){return i.data==="$?"||i.data==="$~"}function rf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function TC(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Cn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var of=null;function g0(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return Cn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function y0(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function v0(i,r,a){switch(r=$l(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Wo(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);ac(i)}var An=new Map,b0=new Set;function Kl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ti=H.d;H.d={f:xC,r:wC,D:_C,C:EC,L:CC,m:AC,X:NC,S:RC,M:MC};function xC(){var i=Ti.f(),r=Vl();return i||r}function wC(i){var r=Xs(i);r!==null&&r.tag===5&&r.type==="form"?Lg(r):Ti.r(i)}var Nr=typeof document>"u"?null:document;function S0(i,r,a){var c=Nr;if(c&&typeof r=="string"&&r){var g=bn(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),b0.has(g)||(b0.add(g),i={rel:i,crossOrigin:a,href:r},c.querySelector(g)===null&&(r=c.createElement("link"),Ut(r,"link",i),It(r),c.head.appendChild(r)))}}function _C(i){Ti.D(i),S0("dns-prefetch",i,null)}function EC(i,r){Ti.C(i,r),S0("preconnect",i,r)}function CC(i,r,a){Ti.L(i,r,a);var c=Nr;if(c&&i&&r){var g='link[rel="preload"][as="'+bn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+bn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+bn(a.imageSizes)+'"]')):g+='[href="'+bn(i)+'"]';var v=g;switch(r){case"style":v=Mr(i);break;case"script":v=Ir(i)}An.has(v)||(i=b({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),An.set(v,i),c.querySelector(g)!==null||r==="style"&&c.querySelector(Xo(v))||r==="script"&&c.querySelector(Qo(v))||(r=c.createElement("link"),Ut(r,"link",i),It(r),c.head.appendChild(r)))}}function AC(i,r){Ti.m(i,r);var a=Nr;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+bn(c)+'"][href="'+bn(i)+'"]',v=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ir(i)}if(!An.has(v)&&(i=b({rel:"modulepreload",href:i},r),An.set(v,i),a.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Qo(v)))return}c=a.createElement("link"),Ut(c,"link",i),It(c),a.head.appendChild(c)}}}function RC(i,r,a){Ti.S(i,r,a);var c=Nr;if(c&&i){var g=Qs(c).hoistableStyles,v=Mr(i);r=r||"default";var x=g.get(v);if(!x){var _={loading:0,preload:null};if(x=c.querySelector(Xo(v)))_.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":r},a),(a=An.get(v))&&af(i,a);var M=x=c.createElement("link");It(M),Ut(M,"link",i),M._p=new Promise(function(B,Y){M.onload=B,M.onerror=Y}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Jl(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:_},g.set(v,x)}}}function NC(i,r){Ti.X(i,r);var a=Nr;if(a&&i){var c=Qs(a).hoistableScripts,g=Ir(i),v=c.get(g);v||(v=a.querySelector(Qo(g)),v||(i=b({src:i,async:!0},r),(r=An.get(g))&&lf(i,r),v=a.createElement("script"),It(v),Ut(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function MC(i,r){Ti.M(i,r);var a=Nr;if(a&&i){var c=Qs(a).hoistableScripts,g=Ir(i),v=c.get(g);v||(v=a.querySelector(Qo(g)),v||(i=b({src:i,async:!0,type:"module"},r),(r=An.get(g))&&lf(i,r),v=a.createElement("script"),It(v),Ut(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(g,v))}}function T0(i,r,a,c){var g=(g=Z.current)?Kl(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Mr(a.href),a=Qs(g).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Mr(a.href);var v=Qs(g).hoistableStyles,x=v.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,x),(v=g.querySelector(Xo(i)))&&!v._p&&(x.instance=v,x.state.loading=5),An.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},An.set(i,a),v||IC(g,i,a,x.state))),r&&c===null)throw Error(s(528,""));return x}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ir(a),a=Qs(g).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Mr(i){return'href="'+bn(i)+'"'}function Xo(i){return'link[rel="stylesheet"]['+i+"]"}function x0(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function IC(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Ut(r,"link",a),It(r),i.head.appendChild(r))}function Ir(i){return'[src="'+bn(i)+'"]'}function Qo(i){return"script[async]"+i}function w0(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+bn(a.href)+'"]');if(c)return r.instance=c,It(c),c;var g=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),It(c),Ut(c,"style",g),Jl(c,a.precedence,i),r.instance=c;case"stylesheet":g=Mr(a.href);var v=i.querySelector(Xo(g));if(v)return r.state.loading|=4,r.instance=v,It(v),v;c=x0(a),(g=An.get(g))&&af(c,g),v=(i.ownerDocument||i).createElement("link"),It(v);var x=v;return x._p=new Promise(function(_,M){x.onload=_,x.onerror=M}),Ut(v,"link",c),r.state.loading|=4,Jl(v,a.precedence,i),r.instance=v;case"script":return v=Ir(a.src),(g=i.querySelector(Qo(v)))?(r.instance=g,It(g),g):(c=a,(g=An.get(v))&&(c=b({},a),lf(c,g)),i=i.ownerDocument||i,g=i.createElement("script"),It(g),Ut(g,"link",c),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Jl(c,a.precedence,i));return r.instance}function Jl(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,v=g,x=0;x<c.length;x++){var _=c[x];if(_.dataset.precedence===r)v=_;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function af(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function lf(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Yl=null;function _0(i,r,a){if(Yl===null){var c=new Map,g=Yl=new Map;g.set(a,c)}else g=Yl,c=g.get(a),c||(c=new Map,g.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var v=a[g];if(!(v[mo]||v[kt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var x=v.getAttribute(r)||"";x=i+x;var _=c.get(x);_?_.push(v):c.set(x,[v])}}return c}function E0(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function DC(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function C0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function kC(i,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Mr(c.href),v=r.querySelector(Xo(g));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Wl.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=v,It(v);return}v=r.ownerDocument||r,c=x0(c),(g=An.get(g))&&af(c,g),v=v.createElement("link"),It(v);var x=v;x._p=new Promise(function(_,M){x.onload=_,x.onerror=M}),Ut(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Wl.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var uf=0;function PC(i,r){return i.stylesheets&&i.count===0&&Ql(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Ql(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&uf===0&&(uf=62500*mC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ql(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>uf?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function Wl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ql(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xl=null;function Ql(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xl=new Map,r.forEach(OC,i),Xl=null,Wl.call(i))}function OC(i,r){if(!(r.state.loading&4)){var a=Xl.get(i);if(a)var c=a.get(null);else{a=new Map,Xl.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var x=g[v];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),c=x)}c&&a.set(null,c)}g=r.instance,x=g.getAttribute("data-precedence"),v=a.get(x)||c,v===c&&a.set(null,g),a.set(x,g),this.count++,c=Wl.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Zo={$$typeof:N,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function LC(i,r,a,c,g,v,x,_,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ic(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.hiddenUpdates=ic(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function A0(i,r,a,c,g,v,x,_,M,B,Y,Q){return i=new LC(i,r,a,x,M,B,Y,Q,_),r=1,v===!0&&(r|=24),v=un(3,null,null,r),i.current=v,v.stateNode=i,r=Gc(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:r},zc(v),i}function R0(i){return i?(i=lr,i):lr}function N0(i,r,a,c,g,v){g=R0(g),c.context===null?c.context=g:c.pendingContext=g,c=Li(r),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Ui(i,c,r),a!==null&&(rn(a,i,r),Io(a,i,r))}function M0(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function cf(i,r){M0(i,r),(i=i.alternate)&&M0(i,r)}function I0(i){if(i.tag===13||i.tag===31){var r=ms(i,67108864);r!==null&&rn(r,i,67108864),cf(i,67108864)}}function D0(i){if(i.tag===13||i.tag===31){var r=mn();r=sc(r);var a=ms(i,r);a!==null&&rn(a,i,r),cf(i,r)}}var Zl=!0;function UC(i,r,a,c){var g=P.T;P.T=null;var v=H.p;try{H.p=2,df(i,r,a,c)}finally{H.p=v,P.T=g}}function VC(i,r,a,c){var g=P.T;P.T=null;var v=H.p;try{H.p=8,df(i,r,a,c)}finally{H.p=v,P.T=g}}function df(i,r,a,c){if(Zl){var g=ff(c);if(g===null)Wd(i,r,c,eu,a),P0(i,c);else if(qC(g,i,r,a,c))c.stopPropagation();else if(P0(i,c),r&4&&-1<BC.indexOf(i)){for(;g!==null;){var v=Xs(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var x=us(v.pendingLanes);if(x!==0){var _=v;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var M=1<<31-pt(x);_.entanglements[1]|=M,x&=~M}Qn(v),(Qe&6)===0&&(Ll=ae()+500,Ko(0))}}break;case 31:case 13:_=ms(v,2),_!==null&&rn(_,v,2),Vl(),cf(v,2)}if(v=ff(c),v===null&&Wd(i,r,c,eu,a),v===g)break;g=v}g!==null&&c.stopPropagation()}else Wd(i,r,c,null,a)}}function ff(i){return i=hc(i),hf(i)}var eu=null;function hf(i){if(eu=null,i=Ws(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=u(r),i!==null)return i;i=null}else if(a===31){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return eu=i,null}function k0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case Fe:return 2;case Xe:return 8;case at:case U:return 32;case K:return 268435456;default:return 32}default:return 32}}var mf=!1,Ji=null,Yi=null,Wi=null,ea=new Map,ta=new Map,Xi=[],BC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P0(i,r){switch(i){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":ea.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(r.pointerId)}}function na(i,r,a,c,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[g]},r!==null&&(r=Xs(r),r!==null&&I0(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function qC(i,r,a,c,g){switch(r){case"focusin":return Ji=na(Ji,i,r,a,c,g),!0;case"dragenter":return Yi=na(Yi,i,r,a,c,g),!0;case"mouseover":return Wi=na(Wi,i,r,a,c,g),!0;case"pointerover":var v=g.pointerId;return ea.set(v,na(ea.get(v)||null,i,r,a,c,g)),!0;case"gotpointercapture":return v=g.pointerId,ta.set(v,na(ta.get(v)||null,i,r,a,c,g)),!0}return!1}function O0(i){var r=Ws(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=u(a),r!==null){i.blockedOn=r,Ym(i.priority,function(){D0(a)});return}}else if(r===31){if(r=d(a),r!==null){i.blockedOn=r,Ym(i.priority,function(){D0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function tu(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=ff(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);fc=c,a.target.dispatchEvent(c),fc=null}else return r=Xs(a),r!==null&&I0(r),i.blockedOn=a,!1;r.shift()}return!0}function L0(i,r,a){tu(i)&&a.delete(r)}function GC(){mf=!1,Ji!==null&&tu(Ji)&&(Ji=null),Yi!==null&&tu(Yi)&&(Yi=null),Wi!==null&&tu(Wi)&&(Wi=null),ea.forEach(L0),ta.forEach(L0)}function nu(i,r){i.blockedOn===r&&(i.blockedOn=null,mf||(mf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,GC)))}var iu=null;function U0(i){iu!==i&&(iu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){iu===i&&(iu=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],g=i[r+2];if(typeof c!="function"){if(hf(c||a)===null)continue;break}var v=Xs(a);v!==null&&(i.splice(r,3),r-=3,dd(v,{pending:!0,data:g,method:a.method,action:c},c,g))}}))}function Dr(i){function r(M){return nu(M,i)}Ji!==null&&nu(Ji,i),Yi!==null&&nu(Yi,i),Wi!==null&&nu(Wi,i),ea.forEach(r),ta.forEach(r);for(var a=0;a<Xi.length;a++){var c=Xi[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Xi.length&&(a=Xi[0],a.blockedOn===null);)O0(a),a.blockedOn===null&&Xi.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var g=a[c],v=a[c+1],x=g[Qt]||null;if(typeof v=="function")x||U0(a);else if(x){var _=null;if(v&&v.hasAttribute("formAction")){if(g=v,x=v[Qt]||null)_=x.formAction;else if(hf(g)!==null)continue}else _=x.action;typeof _=="function"?a[c+1]=_:(a.splice(c,3),c-=3),U0(a)}}}function V0(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function pf(i){this._internalRoot=i}su.prototype.render=pf.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=mn();N0(a,c,i,r,null,null)},su.prototype.unmount=pf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;N0(i.current,2,null,i,null,null),Vl(),r[Ys]=null}};function su(i){this._internalRoot=i}su.prototype.unstable_scheduleHydration=function(i){if(i){var r=Jm();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Xi.length&&r!==0&&r<Xi[a].priority;a++);Xi.splice(a,0,i),a===0&&O0(i)}};var B0=e.version;if(B0!=="19.2.0")throw Error(s(527,B0,"19.2.0"));H.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var HC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{Re=ru.inject(HC),ge=ru}catch{}}return sa.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",g=$g,v=Kg,x=Jg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=A0(i,1,!1,null,null,a,c,null,g,v,x,V0),i[Ys]=r.current,Yd(i),new pf(r)},sa.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,g="",v=$g,x=Kg,_=Jg,M=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),r=A0(i,1,!0,r,a??null,c,g,M,v,x,_,V0),r.context=R0(null),a=r.current,c=mn(),c=sc(c),g=Li(c),g.callback=null,Ui(a,g,c),a=c,r.current.lanes=a,ho(r,a),Qn(r),i[Ys]=r.current,Yd(i),new su(r)},sa.version="19.2.0",sa}var Y0;function ZC(){if(Y0)return vf.exports;Y0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vf.exports=QC(),vf.exports}var eA=ZC();const $h=O.createContext({});function Hs(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Kh=typeof window<"u",Jh=Kh?O.useLayoutEffect:O.useEffect,Fu=O.createContext(null);function Yh(t,e){t.indexOf(e)===-1&&t.push(e)}function Wh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function tA([...t],e,n){const s=e<0?t.length+e:e;if(s>=0&&s<t.length){const o=n<0?t.length+n:n,[l]=t.splice(e,1);t.splice(o,0,l)}return t}const wi=(t,e,n)=>n>e?e:n<t?t:n;let Xh=()=>{};const _i={},vT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function bT(t){return typeof t=="object"&&t!==null}const ST=t=>/^0[^.\s]+$/u.test(t);function Qh(t){let e;return()=>(e===void 0&&(e=t()),e)}const kn=t=>t,nA=(t,e)=>n=>e(t(n)),Ua=(...t)=>t.reduce(nA),Ea=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Zh{constructor(){this.subscriptions=[]}add(e){return Yh(this.subscriptions,e),()=>Wh(this.subscriptions,e)}notify(e,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,s);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ti=t=>t*1e3,Dn=t=>t/1e3;function TT(t,e){return e?t*(1e3/e):0}const xT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,iA=1e-7,sA=12;function rA(t,e,n,s,o){let l,u,d=0;do u=e+(n-e)/2,l=xT(u,s,o)-t,l>0?n=u:e=u;while(Math.abs(l)>iA&&++d<sA);return u}function Va(t,e,n,s){if(t===e&&n===s)return kn;const o=l=>rA(l,0,1,t,n);return l=>l===0||l===1?l:xT(o(l),e,s)}const wT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_T=t=>e=>1-t(1-e),ET=Va(.33,1.53,.69,.99),em=_T(ET),CT=wT(em),AT=t=>(t*=2)<1?.5*em(t):.5*(2-Math.pow(2,-10*(t-1))),tm=t=>1-Math.sin(Math.acos(t)),RT=_T(tm),NT=wT(tm),oA=Va(.42,0,1,1),aA=Va(0,0,.58,1),MT=Va(.42,0,.58,1),lA=t=>Array.isArray(t)&&typeof t[0]!="number",IT=t=>Array.isArray(t)&&typeof t[0]=="number",uA={linear:kn,easeIn:oA,easeInOut:MT,easeOut:aA,circIn:tm,circInOut:NT,circOut:RT,backIn:em,backInOut:CT,backOut:ET,anticipate:AT},cA=t=>typeof t=="string",W0=t=>{if(IT(t)){Xh(t.length===4);const[e,n,s,o]=t;return Va(e,n,s,o)}else if(cA(t))return uA[t];return t},ou=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function dA(t,e){let n=new Set,s=new Set,o=!1,l=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function h(y){u.has(y)&&(f.schedule(y),t()),y(d)}const f={schedule:(y,b=!1,T=!1)=>{const E=T&&o?n:s;return b&&u.add(y),E.has(y)||E.add(y),y},cancel:y=>{s.delete(y),u.delete(y)},process:y=>{if(d=y,o){l=!0;return}o=!0,[n,s]=[s,n],n.forEach(h),n.clear(),o=!1,l&&(l=!1,f.process(y))}};return f}const fA=40;function DT(t,e){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=ou.reduce((N,G)=>(N[G]=dA(l),N),{}),{setup:d,read:h,resolveKeyframes:f,preUpdate:y,update:b,preRender:T,render:w,postRender:E}=u,C=()=>{const N=_i.useManualTiming?o.timestamp:performance.now();n=!1,_i.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(N-o.timestamp,fA),1)),o.timestamp=N,o.isProcessing=!0,d.process(o),h.process(o),f.process(o),y.process(o),b.process(o),T.process(o),w.process(o),E.process(o),o.isProcessing=!1,n&&e&&(s=!1,t(C))},A=()=>{n=!0,s=!0,o.isProcessing||t(C)};return{schedule:ou.reduce((N,G)=>{const q=u[G];return N[G]=(z,F=!1,ee=!1)=>(n||A(),q.schedule(z,F,ee)),N},{}),cancel:N=>{for(let G=0;G<ou.length;G++)u[ou[G]].cancel(N)},state:o,steps:u}}const{schedule:dt,cancel:Ei,state:Vt,steps:xf}=DT(typeof requestAnimationFrame<"u"?requestAnimationFrame:kn,!0);let Tu;function hA(){Tu=void 0}const on={now:()=>(Tu===void 0&&on.set(Vt.isProcessing||_i.useManualTiming?Vt.timestamp:performance.now()),Tu),set:t=>{Tu=t,queueMicrotask(hA)}},kT=t=>e=>typeof e=="string"&&e.startsWith(t),nm=kT("--"),mA=kT("var(--"),im=t=>mA(t)?pA.test(t.split("/*")[0].trim()):!1,pA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,io={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ca={...io,transform:t=>wi(0,1,t)},au={...io,default:1},da=t=>Math.round(t*1e5)/1e5,sm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gA(t){return t==null}const yA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rm=(t,e)=>n=>!!(typeof n=="string"&&yA.test(n)&&n.startsWith(t)||e&&!gA(n)&&Object.prototype.hasOwnProperty.call(n,e)),PT=(t,e,n)=>s=>{if(typeof s!="string")return s;const[o,l,u,d]=s.match(sm);return{[t]:parseFloat(o),[e]:parseFloat(l),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},vA=t=>wi(0,255,t),wf={...io,transform:t=>Math.round(vA(t))},Ps={test:rm("rgb","red"),parse:PT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+wf.transform(t)+", "+wf.transform(e)+", "+wf.transform(n)+", "+da(Ca.transform(s))+")"};function bA(t){let e="",n="",s="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const Yf={test:rm("#"),parse:bA,transform:Ps.transform},Ba=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ns=Ba("deg"),ni=Ba("%"),Ie=Ba("px"),SA=Ba("vh"),TA=Ba("vw"),X0={...ni,parse:t=>ni.parse(t)/100,transform:t=>ni.transform(t*100)},qr={test:rm("hsl","hue"),parse:PT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+ni.transform(da(e))+", "+ni.transform(da(n))+", "+da(Ca.transform(s))+")"},Rt={test:t=>Ps.test(t)||Yf.test(t)||qr.test(t),parse:t=>Ps.test(t)?Ps.parse(t):qr.test(t)?qr.parse(t):Yf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ps.transform(t):qr.transform(t),getAnimatableNone:t=>{const e=Rt.parse(t);return e.alpha=0,Rt.transform(e)}},xA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wA(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sm))==null?void 0:e.length)||0)+(((n=t.match(xA))==null?void 0:n.length)||0)>0}const OT="number",LT="color",_A="var",EA="var(",Q0="${}",CA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Aa(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},o=[];let l=0;const d=e.replace(CA,h=>(Rt.test(h)?(s.color.push(l),o.push(LT),n.push(Rt.parse(h))):h.startsWith(EA)?(s.var.push(l),o.push(_A),n.push(h)):(s.number.push(l),o.push(OT),n.push(parseFloat(h))),++l,Q0)).split(Q0);return{values:n,split:d,indexes:s,types:o}}function UT(t){return Aa(t).values}function VT(t){const{split:e,types:n}=Aa(t),s=e.length;return o=>{let l="";for(let u=0;u<s;u++)if(l+=e[u],o[u]!==void 0){const d=n[u];d===OT?l+=da(o[u]):d===LT?l+=Rt.transform(o[u]):l+=o[u]}return l}}const AA=t=>typeof t=="number"?0:Rt.test(t)?Rt.getAnimatableNone(t):t;function RA(t){const e=UT(t);return VT(t)(e.map(AA))}const ss={test:wA,parse:UT,createTransformer:VT,getAnimatableNone:RA};function _f(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function NA({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let o=0,l=0,u=0;if(!e)o=l=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,h=2*n-d;o=_f(h,d,t+1/3),l=_f(h,d,t),u=_f(h,d,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:s}}function Au(t,e){return n=>n>0?e:t}const ht=(t,e,n)=>t+(e-t)*n,Ef=(t,e,n)=>{const s=t*t,o=n*(e*e-s)+s;return o<0?0:Math.sqrt(o)},MA=[Yf,Ps,qr],IA=t=>MA.find(e=>e.test(t));function Z0(t){const e=IA(t);if(!e)return!1;let n=e.parse(t);return e===qr&&(n=NA(n)),n}const ev=(t,e)=>{const n=Z0(t),s=Z0(e);if(!n||!s)return Au(t,e);const o={...n};return l=>(o.red=Ef(n.red,s.red,l),o.green=Ef(n.green,s.green,l),o.blue=Ef(n.blue,s.blue,l),o.alpha=ht(n.alpha,s.alpha,l),Ps.transform(o))},Wf=new Set(["none","hidden"]);function DA(t,e){return Wf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function kA(t,e){return n=>ht(t,e,n)}function om(t){return typeof t=="number"?kA:typeof t=="string"?im(t)?Au:Rt.test(t)?ev:LA:Array.isArray(t)?BT:typeof t=="object"?Rt.test(t)?ev:PA:Au}function BT(t,e){const n=[...t],s=n.length,o=t.map((l,u)=>om(l)(l,e[u]));return l=>{for(let u=0;u<s;u++)n[u]=o[u](l);return n}}function PA(t,e){const n={...t,...e},s={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(s[o]=om(t[o])(t[o],e[o]));return o=>{for(const l in s)n[l]=s[l](o);return n}}function OA(t,e){const n=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][s[l]],d=t.values[u]??0;n[o]=d,s[l]++}return n}const LA=(t,e)=>{const n=ss.createTransformer(e),s=Aa(t),o=Aa(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?Wf.has(t)&&!o.values.length||Wf.has(e)&&!s.values.length?DA(t,e):Ua(BT(OA(s,o),o.values),n):Au(t,e)};function qT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ht(t,e,n):om(t)(t,e)}const UA=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>dt.update(e,n),stop:()=>Ei(e),now:()=>Vt.isProcessing?Vt.timestamp:on.now()}},GT=(t,e,n=10)=>{let s="";const o=Math.max(Math.round(e/n),2);for(let l=0;l<o;l++)s+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Ru=2e4;function am(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Ru;)e+=n,s=t.next(e);return e>=Ru?1/0:e}function VA(t,e=100,n){const s=n({...t,keyframes:[0,e]}),o=Math.min(am(s),Ru);return{type:"keyframes",ease:l=>s.next(o*l).value/e,duration:Dn(o)}}const BA=5;function HT(t,e,n){const s=Math.max(e-BA,0);return TT(n-t(s),e-s)}const bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cf=.001;function qA({duration:t=bt.duration,bounce:e=bt.bounce,velocity:n=bt.velocity,mass:s=bt.mass}){let o,l,u=1-e;u=wi(bt.minDamping,bt.maxDamping,u),t=wi(bt.minDuration,bt.maxDuration,Dn(t)),u<1?(o=f=>{const y=f*u,b=y*t,T=y-n,w=Xf(f,u),E=Math.exp(-b);return Cf-T/w*E},l=f=>{const b=f*u*t,T=b*n+n,w=Math.pow(u,2)*Math.pow(f,2)*t,E=Math.exp(-b),C=Xf(Math.pow(f,2),u);return(-o(f)+Cf>0?-1:1)*((T-w)*E)/C}):(o=f=>{const y=Math.exp(-f*t),b=(f-n)*t+1;return-Cf+y*b},l=f=>{const y=Math.exp(-f*t),b=(n-f)*(t*t);return y*b});const d=5/t,h=HA(o,l,d);if(t=ti(t),isNaN(h))return{stiffness:bt.stiffness,damping:bt.damping,duration:t};{const f=Math.pow(h,2)*s;return{stiffness:f,damping:u*2*Math.sqrt(s*f),duration:t}}}const GA=12;function HA(t,e,n){let s=n;for(let o=1;o<GA;o++)s=s-t(s)/e(s);return s}function Xf(t,e){return t*Math.sqrt(1-e*e)}const jA=["duration","bounce"],FA=["stiffness","damping","mass"];function tv(t,e){return e.some(n=>t[n]!==void 0)}function zA(t){let e={velocity:bt.velocity,stiffness:bt.stiffness,damping:bt.damping,mass:bt.mass,isResolvedFromDuration:!1,...t};if(!tv(t,FA)&&tv(t,jA))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,l=2*wi(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:bt.mass,stiffness:o,damping:l}}else{const n=qA(t);e={...e,...n,mass:bt.mass},e.isResolvedFromDuration=!0}return e}function Nu(t=bt.visualDuration,e=bt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:o}=n;const l=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:h,damping:f,mass:y,duration:b,velocity:T,isResolvedFromDuration:w}=zA({...n,velocity:-Dn(n.velocity||0)}),E=T||0,C=f/(2*Math.sqrt(h*y)),A=u-l,R=Dn(Math.sqrt(h/y)),D=Math.abs(A)<5;s||(s=D?bt.restSpeed.granular:bt.restSpeed.default),o||(o=D?bt.restDelta.granular:bt.restDelta.default);let N;if(C<1){const q=Xf(R,C);N=z=>{const F=Math.exp(-C*R*z);return u-F*((E+C*R*A)/q*Math.sin(q*z)+A*Math.cos(q*z))}}else if(C===1)N=q=>u-Math.exp(-R*q)*(A+(E+R*A)*q);else{const q=R*Math.sqrt(C*C-1);N=z=>{const F=Math.exp(-C*R*z),ee=Math.min(q*z,300);return u-F*((E+C*R*A)*Math.sinh(ee)+q*A*Math.cosh(ee))/q}}const G={calculatedDuration:w&&b||null,next:q=>{const z=N(q);if(w)d.done=q>=b;else{let F=q===0?E:0;C<1&&(F=q===0?ti(E):HT(N,q,z));const ee=Math.abs(F)<=s,te=Math.abs(u-z)<=o;d.done=ee&&te}return d.value=d.done?u:z,d},toString:()=>{const q=Math.min(am(G),Ru),z=GT(F=>G.next(q*F).value,q,30);return q+"ms "+z},toTransition:()=>{}};return G}Nu.applyToOptions=t=>{const e=VA(t,100,Nu);return t.ease=e.ease,t.duration=ti(e.duration),t.type="keyframes",t};function Qf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:d,max:h,restDelta:f=.5,restSpeed:y}){const b=t[0],T={done:!1,value:b},w=ee=>d!==void 0&&ee<d||h!==void 0&&ee>h,E=ee=>d===void 0?h:h===void 0||Math.abs(d-ee)<Math.abs(h-ee)?d:h;let C=n*e;const A=b+C,R=u===void 0?A:u(A);R!==A&&(C=R-b);const D=ee=>-C*Math.exp(-ee/s),N=ee=>R+D(ee),G=ee=>{const te=D(ee),ue=N(ee);T.done=Math.abs(te)<=f,T.value=T.done?R:ue};let q,z;const F=ee=>{w(T.value)&&(q=ee,z=Nu({keyframes:[T.value,E(T.value)],velocity:HT(N,ee,T.value),damping:o,stiffness:l,restDelta:f,restSpeed:y}))};return F(0),{calculatedDuration:null,next:ee=>{let te=!1;return!z&&q===void 0&&(te=!0,G(ee),F(ee)),q!==void 0&&ee>=q?z.next(ee-q):(!te&&G(ee),T)}}}function $A(t,e,n){const s=[],o=n||_i.mix||qT,l=t.length-1;for(let u=0;u<l;u++){let d=o(t[u],t[u+1]);if(e){const h=Array.isArray(e)?e[u]||kn:e;d=Ua(h,d)}s.push(d)}return s}function jT(t,e,{clamp:n=!0,ease:s,mixer:o}={}){const l=t.length;if(Xh(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=$A(e,s,o),h=d.length,f=y=>{if(u&&y<t[0])return e[0];let b=0;if(h>1)for(;b<t.length-2&&!(y<t[b+1]);b++);const T=Ea(t[b],t[b+1],y);return d[b](T)};return n?y=>f(wi(t[0],t[l-1],y)):f}function KA(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const o=Ea(0,e,s);t.push(ht(n,1,o))}}function JA(t){const e=[0];return KA(e,t.length-1),e}function YA(t,e){return t.map(n=>n*e)}function WA(t,e){return t.map(()=>e||MT).splice(0,t.length-1)}function fa({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const o=lA(s)?s.map(W0):W0(s),l={done:!1,value:e[0]},u=YA(n&&n.length===e.length?n:JA(e),t),d=jT(u,e,{ease:Array.isArray(o)?o:WA(e,o)});return{calculatedDuration:t,next:h=>(l.value=d(h),l.done=h>=t,l)}}const XA=t=>t!==null;function lm(t,{repeat:e,repeatType:n="loop"},s,o=1){const l=t.filter(XA),d=o<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!d||s===void 0?l[d]:s}const QA={decay:Qf,inertia:Qf,tween:fa,keyframes:fa,spring:Nu};function FT(t){typeof t.type=="string"&&(t.type=QA[t.type])}class um{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ZA=t=>t/100;class cm extends um{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,o;const{motionValue:n}=this.options;n&&n.updatedAt!==on.now()&&this.tick(on.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(s=this.options).onStop)==null||o.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;FT(e);const{type:n=fa,repeat:s=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=e;let{keyframes:d}=e;const h=n||fa;h!==fa&&typeof d[0]!="number"&&(this.mixKeyframes=Ua(ZA,qT(d[0],d[1])),d=[0,100]);const f=h({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...d].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=am(f));const{calculatedDuration:y}=f;this.calculatedDuration=y,this.resolvedDuration=y+o,this.totalDuration=this.resolvedDuration*(s+1)-o,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:o,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:d,calculatedDuration:h}=this;if(this.startTime===null)return s.next(0);const{delay:f=0,keyframes:y,repeat:b,repeatType:T,repeatDelay:w,type:E,onUpdate:C,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const R=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?R<0:R>o;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let N=this.currentTime,G=s;if(b){const ee=Math.min(this.currentTime,o)/d;let te=Math.floor(ee),ue=ee%1;!ue&&ee>=1&&(ue=1),ue===1&&te--,te=Math.min(te,b+1),!!(te%2)&&(T==="reverse"?(ue=1-ue,w&&(ue-=w/d)):T==="mirror"&&(G=u)),N=wi(0,1,ue)*d}const q=D?{done:!1,value:y[0]}:G.next(N);l&&(q.value=l(q.value));let{done:z}=q;!D&&h!==null&&(z=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return F&&E!==Qf&&(q.value=lm(y,this.options,A,this.speed)),C&&C(q.value),F&&this.finish(),q}then(e,n){return this.finished.then(e,n)}get duration(){return Dn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Dn(e)}get time(){return Dn(this.currentTime)}set time(e){var n;e=ti(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(on.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Dn(this.currentTime))}play(){var o,l;if(this.isStopped)return;const{driver:e=UA,startTime:n}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),(l=(o=this.options).onPlay)==null||l.call(o);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(on.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function eR(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Os=t=>t*180/Math.PI,Zf=t=>{const e=Os(Math.atan2(t[1],t[0]));return eh(e)},tR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Zf,rotateZ:Zf,skewX:t=>Os(Math.atan(t[1])),skewY:t=>Os(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},eh=t=>(t=t%360,t<0&&(t+=360),t),nv=Zf,iv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),sv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),nR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iv,scaleY:sv,scale:t=>(iv(t)+sv(t))/2,rotateX:t=>eh(Os(Math.atan2(t[6],t[5]))),rotateY:t=>eh(Os(Math.atan2(-t[2],t[0]))),rotateZ:nv,rotate:nv,skewX:t=>Os(Math.atan(t[4])),skewY:t=>Os(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function th(t){return t.includes("scale")?1:0}function nh(t,e){if(!t||t==="none")return th(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,o;if(n)s=nR,o=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=tR,o=d}if(!o)return th(e);const l=s[e],u=o[1].split(",").map(sR);return typeof l=="function"?l(u):u[l]}const iR=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return nh(n,e)};function sR(t){return parseFloat(t.trim())}const so=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ro=new Set(so),rv=t=>t===io||t===Ie,rR=new Set(["x","y","z"]),oR=so.filter(t=>!rR.has(t));function aR(t){const e=[];return oR.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Vs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>nh(e,"x"),y:(t,{transform:e})=>nh(e,"y")};Vs.translateX=Vs.x;Vs.translateY=Vs.y;const Bs=new Set;let ih=!1,sh=!1,rh=!1;function zT(){if(sh){const t=Array.from(Bs).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const o=aR(s);o.length&&(n.set(s,o),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([l,u])=>{var d;(d=s.getValue(l))==null||d.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}sh=!1,ih=!1,Bs.forEach(t=>t.complete(rh)),Bs.clear()}function $T(){Bs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(sh=!0)})}function lR(){rh=!0,$T(),zT(),rh=!1}class dm{constructor(e,n,s,o,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Bs.add(this),ih||(ih=!0,dt.read($T),dt.resolveKeyframes(zT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:o}=this;if(e[0]===null){const l=o==null?void 0:o.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&n){const d=s.readValue(n,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),o&&l===void 0&&o.set(e[0])}eR(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Bs.delete(this)}cancel(){this.state==="scheduled"&&(Bs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const uR=t=>t.startsWith("--");function cR(t,e,n){uR(e)?t.style.setProperty(e,n):t.style[e]=n}const dR=Qh(()=>window.ScrollTimeline!==void 0),fR={};function hR(t,e){const n=Qh(t);return()=>fR[e]??n()}const KT=hR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),la=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,ov={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:la([0,.65,.55,1]),circOut:la([.55,0,1,.45]),backIn:la([.31,.01,.66,-.59]),backOut:la([.33,1.53,.69,.99])};function JT(t,e){if(t)return typeof t=="function"?KT()?GT(t,e):"ease-out":IT(t)?la(t):Array.isArray(t)?t.map(n=>JT(n,e)||ov.easeOut):ov[t]}function mR(t,e,n,{delay:s=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:d="easeOut",times:h}={},f=void 0){const y={[e]:n};h&&(y.offset=h);const b=JT(d,o);Array.isArray(b)&&(y.easing=b);const T={delay:s,duration:o,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return f&&(T.pseudoElement=f),t.animate(y,T)}function YT(t){return typeof t=="function"&&"applyToOptions"in t}function pR({type:t,...e}){return YT(t)&&KT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class gR extends um{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:o,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:d,onComplete:h}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,Xh(typeof e.type!="string");const f=pR(e);this.animation=mR(n,s,o,f,l),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=lm(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(y):cR(n,s,y),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Dn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Dn(e)}get time(){return Dn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ti(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&dR()?(this.animation.timeline=e,kn):n(this)}}const WT={anticipate:AT,backInOut:CT,circInOut:NT};function yR(t){return t in WT}function vR(t){typeof t.ease=="string"&&yR(t.ease)&&(t.ease=WT[t.ease])}const av=10;class bR extends gR{constructor(e){vR(e),FT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:o,element:l,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new cm({...u,autoplay:!1}),h=ti(this.finishedTime??this.time);n.setWithVelocity(d.sample(h-av).value,d.sample(h).value,av),d.stop()}}const lv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ss.test(t)||t==="0")&&!t.startsWith("url("));function SR(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function TR(t,e,n,s){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=lv(o,e),d=lv(l,e);return!u||!d?!1:SR(t)||(n==="spring"||YT(n))&&s}function oh(t){t.duration=0,t.type="keyframes"}const xR=new Set(["opacity","clipPath","filter","transform"]),wR=Qh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _R(t){var y;const{motionValue:e,name:n,repeatDelay:s,repeatType:o,damping:l,type:u}=t;if(!(((y=e==null?void 0:e.owner)==null?void 0:y.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return wR()&&n&&xR.has(n)&&(n!=="transform"||!f)&&!h&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}const ER=40;class CR extends um{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",keyframes:d,name:h,motionValue:f,element:y,...b}){var E;super(),this.stop=()=>{var C,A;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=on.now();const T={autoplay:e,delay:n,type:s,repeat:o,repeatDelay:l,repeatType:u,name:h,motionValue:f,element:y,...b},w=(y==null?void 0:y.KeyframeResolver)||dm;this.keyframeResolver=new w(d,(C,A,R)=>this.onKeyframesResolved(C,A,T,!R),h,f,y),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,s,o){this.keyframeResolver=void 0;const{name:l,type:u,velocity:d,delay:h,isHandoff:f,onUpdate:y}=s;this.resolvedAt=on.now(),TR(e,l,u,d)||((_i.instantAnimations||!h)&&(y==null||y(lm(e,s,n))),e[0]=e[e.length-1],oh(s),s.repeat=0);const T={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>ER?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},w=!f&&_R(T)?new bR({...T,element:T.motionValue.owner.current}):new cm(T);w.finished.then(()=>this.notifyFinished()).catch(kn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),lR()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const AR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RR(t){const e=AR.exec(t);if(!e)return[,];const[,n,s,o]=e;return[`--${n??s}`,o]}function XT(t,e,n=1){const[s,o]=RR(t);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const u=l.trim();return vT(u)?parseFloat(u):u}return im(o)?XT(o,e,n+1):o}function fm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const QT=new Set(["width","height","top","left","right","bottom",...so]),NR={test:t=>t==="auto",parse:t=>t},ZT=t=>e=>e.test(t),ex=[io,Ie,ni,ns,TA,SA,NR],uv=t=>ex.find(ZT(t));function MR(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ST(t):!0}const IR=new Set(["brightness","contrast","saturate","opacity"]);function DR(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(sm)||[];if(!s)return t;const o=n.replace(s,"");let l=IR.has(e)?1:0;return s!==n&&(l*=100),e+"("+l+o+")"}const kR=/\b([a-z-]*)\(.*?\)/gu,ah={...ss,getAnimatableNone:t=>{const e=t.match(kR);return e?e.map(DR).join(" "):t}},cv={...io,transform:Math.round},PR={rotate:ns,rotateX:ns,rotateY:ns,rotateZ:ns,scale:au,scaleX:au,scaleY:au,scaleZ:au,skew:ns,skewX:ns,skewY:ns,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Ca,originX:X0,originY:X0,originZ:Ie},hm={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...PR,zIndex:cv,fillOpacity:Ca,strokeOpacity:Ca,numOctaves:cv},OR={...hm,color:Rt,backgroundColor:Rt,outlineColor:Rt,fill:Rt,stroke:Rt,borderColor:Rt,borderTopColor:Rt,borderRightColor:Rt,borderBottomColor:Rt,borderLeftColor:Rt,filter:ah,WebkitFilter:ah},tx=t=>OR[t];function nx(t,e){let n=tx(t);return n!==ah&&(n=ss),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const LR=new Set(["auto","none","0"]);function UR(t,e,n){let s=0,o;for(;s<t.length&&!o;){const l=t[s];typeof l=="string"&&!LR.has(l)&&Aa(l).values.length&&(o=t[s]),s++}if(o&&n)for(const l of e)t[l]=nx(n,o)}class VR extends dm{constructor(e,n,s,o,l){super(e,n,s,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),im(f))){const y=XT(f,n.current);y!==void 0&&(e[h]=y),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!QT.has(s)||e.length!==2)return;const[o,l]=e,u=uv(o),d=uv(l);if(u!==d)if(rv(u)&&rv(d))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else Vs[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let o=0;o<e.length;o++)(e[o]===null||MR(e[o]))&&s.push(o);s.length&&UR(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vs[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){var d;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=Vs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function BR(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const o=(n==null?void 0:n[t])??s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const ix=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function sx(t){return bT(t)&&"offsetHeight"in t}const dv=30,qR=t=>!isNaN(parseFloat(t)),ha={current:void 0};class GR{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var l;const o=on.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=on.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Zh);const s=this.events[e].add(n);return e==="change"?()=>{s(),dt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ha.current&&ha.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=on.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dv);return TT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qs(t,e){return new GR(t,e)}const{schedule:mm}=DT(queueMicrotask,!1),jn={x:!1,y:!1};function rx(){return jn.x||jn.y}function HR(t){return t==="x"||t==="y"?jn[t]?null:(jn[t]=!0,()=>{jn[t]=!1}):jn.x||jn.y?null:(jn.x=jn.y=!0,()=>{jn.x=jn.y=!1})}function ox(t,e){const n=BR(t),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[n,o,()=>s.abort()]}function fv(t){return!(t.pointerType==="touch"||rx())}function jR(t,e,n={}){const[s,o,l]=ox(t,n),u=d=>{if(!fv(d))return;const{target:h}=d,f=e(h,d);if(typeof f!="function"||!h)return;const y=b=>{fv(b)&&(f(b),h.removeEventListener("pointerleave",y))};h.addEventListener("pointerleave",y,o)};return s.forEach(d=>{d.addEventListener("pointerenter",u,o)}),l}const ax=(t,e)=>e?t===e?!0:ax(t,e.parentElement):!1,pm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zR(t){return FR.has(t.tagName)||t.tabIndex!==-1}const xu=new WeakSet;function hv(t){return e=>{e.key==="Enter"&&t(e)}}function Af(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $R=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=hv(()=>{if(xu.has(n))return;Af(n,"down");const o=hv(()=>{Af(n,"up")}),l=()=>Af(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function mv(t){return pm(t)&&!rx()}function KR(t,e,n={}){const[s,o,l]=ox(t,n),u=d=>{const h=d.currentTarget;if(!mv(d))return;xu.add(h);const f=e(h,d),y=(w,E)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",T),xu.has(h)&&xu.delete(h),mv(w)&&typeof f=="function"&&f(w,{success:E})},b=w=>{y(w,h===window||h===document||n.useGlobalTarget||ax(h,w.target))},T=w=>{y(w,!1)};window.addEventListener("pointerup",b,o),window.addEventListener("pointercancel",T,o)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,o),sx(d)&&(d.addEventListener("focus",f=>$R(f,o)),!zR(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function lx(t){return bT(t)&&"ownerSVGElement"in t}function JR(t){return lx(t)&&t.tagName==="svg"}function YR(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],o=t[1+n],l=t[2+n],u=t[3+n],d=jT(o,l,u);return e?d(s):d}const qt=t=>!!(t&&t.getVelocity),WR=[...ex,Rt,ss],XR=t=>WR.find(ZT(t)),zu=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function pv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function QR(...t){return e=>{let n=!1;const s=t.map(o=>{const l=pv(o,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<s.length;o++){const l=s[o];typeof l=="function"?l():pv(t[o],null)}}}}function ZR(...t){return O.useCallback(QR(...t),t)}class eN extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=sx(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=o-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tN({children:t,isPresent:e,anchorX:n,root:s}){const o=O.useId(),l=O.useRef(null),u=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=O.useContext(zu),h=ZR(l,t==null?void 0:t.ref);return O.useInsertionEffect(()=>{const{width:f,height:y,top:b,left:T,right:w}=u.current;if(e||!l.current||!f||!y)return;const E=n==="left"?`left: ${T}`:`right: ${w}`;l.current.dataset.motionPopId=o;const C=document.createElement("style");d&&(C.nonce=d);const A=s??document.head;return A.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${y}px !important;
            ${E}px !important;
            top: ${b}px !important;
          }
        `),()=>{A.contains(C)&&A.removeChild(C)}},[e]),S.jsx(eN,{isPresent:e,childRef:l,sizeRef:u,children:O.cloneElement(t,{ref:h})})}const nN=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:l,mode:u,anchorX:d,root:h})=>{const f=Hs(iN),y=O.useId();let b=!0,T=O.useMemo(()=>(b=!1,{id:y,initial:e,isPresent:n,custom:o,onExitComplete:w=>{f.set(w,!0);for(const E of f.values())if(!E)return;s&&s()},register:w=>(f.set(w,!1),()=>f.delete(w))}),[n,f,s]);return l&&b&&(T={...T}),O.useMemo(()=>{f.forEach((w,E)=>f.set(E,!1))},[n]),O.useEffect(()=>{!n&&!f.size&&s&&s()},[n]),u==="popLayout"&&(t=S.jsx(tN,{isPresent:n,anchorX:d,root:h,children:t})),S.jsx(Fu.Provider,{value:T,children:t})};function iN(){return new Map}function ux(t=!0){const e=O.useContext(Fu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=e,l=O.useId();O.useEffect(()=>{if(t)return o(l)},[t]);const u=O.useCallback(()=>t&&s&&s(l),[l,s,t]);return!n&&s?[!1,u]:[!0]}const lu=t=>t.key||"";function gv(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Ra=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:l="sync",propagate:u=!1,anchorX:d="left",root:h})=>{const[f,y]=ux(u),b=O.useMemo(()=>gv(t),[t]),T=u&&!f?[]:b.map(lu),w=O.useRef(!0),E=O.useRef(b),C=Hs(()=>new Map),[A,R]=O.useState(b),[D,N]=O.useState(b);Jh(()=>{w.current=!1,E.current=b;for(let z=0;z<D.length;z++){const F=lu(D[z]);T.includes(F)?C.delete(F):C.get(F)!==!0&&C.set(F,!1)}},[D,T.length,T.join("-")]);const G=[];if(b!==A){let z=[...b];for(let F=0;F<D.length;F++){const ee=D[F],te=lu(ee);T.includes(te)||(z.splice(F,0,ee),G.push(ee))}return l==="wait"&&G.length&&(z=G),N(gv(z)),R(b),null}const{forceRender:q}=O.useContext($h);return S.jsx(S.Fragment,{children:D.map(z=>{const F=lu(z),ee=u&&!f?!1:b===D||T.includes(F),te=()=>{if(C.has(F))C.set(F,!0);else return;let ue=!0;C.forEach(he=>{he||(ue=!1)}),ue&&(q==null||q(),N(E.current),u&&(y==null||y()),s&&s())};return S.jsx(nN,{isPresent:ee,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:l,root:h,onExitComplete:ee?void 0:te,anchorX:d,children:z},F)})})},cx=O.createContext({strict:!1}),yv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},eo={};for(const t in yv)eo[t]={isEnabled:e=>yv[t].some(n=>!!e[n])};function sN(t){for(const e in t)eo[e]={...eo[e],...t[e]}}const rN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rN.has(t)}let dx=t=>!Mu(t);function oN(t){typeof t=="function"&&(dx=e=>e.startsWith("on")?!Mu(e):t(e))}try{oN(require("@emotion/is-prop-valid").default)}catch{}function aN(t,e,n){const s={};for(const o in t)o==="values"&&typeof t.values=="object"||(dx(o)||n===!0&&Mu(o)||!e&&!Mu(o)||t.draggable&&o.startsWith("onDrag"))&&(s[o]=t[o]);return s}const $u=O.createContext({});function Ku(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Na(t){return typeof t=="string"||Array.isArray(t)}const gm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ym=["initial",...gm];function Ju(t){return Ku(t.animate)||ym.some(e=>Na(t[e]))}function fx(t){return!!(Ju(t)||t.variants)}function lN(t,e){if(Ju(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Na(n)?n:void 0,animate:Na(s)?s:void 0}}return t.inherit!==!1?e:{}}function uN(t){const{initial:e,animate:n}=lN(t,O.useContext($u));return O.useMemo(()=>({initial:e,animate:n}),[vv(e),vv(n)])}function vv(t){return Array.isArray(t)?t.join(" "):t}const Ma={};function cN(t){for(const e in t)Ma[e]=t[e],nm(e)&&(Ma[e].isCSSVariable=!0)}function hx(t,{layout:e,layoutId:n}){return ro.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ma[t]||t==="opacity")}const dN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fN=so.length;function hN(t,e,n){let s="",o=!0;for(let l=0;l<fN;l++){const u=so[l],d=t[u];if(d===void 0)continue;let h=!0;if(typeof d=="number"?h=d===(u.startsWith("scale")?1:0):h=parseFloat(d)===0,!h||n){const f=ix(d,hm[u]);if(!h){o=!1;const y=dN[u]||u;s+=`${y}(${f}) `}n&&(e[u]=f)}}return s=s.trim(),n?s=n(e,o?"":s):o&&(s="none"),s}function vm(t,e,n){const{style:s,vars:o,transformOrigin:l}=t;let u=!1,d=!1;for(const h in e){const f=e[h];if(ro.has(h)){u=!0;continue}else if(nm(h)){o[h]=f;continue}else{const y=ix(f,hm[h]);h.startsWith("origin")?(d=!0,l[h]=y):s[h]=y}}if(e.transform||(u||n?s.transform=hN(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:y=0}=l;s.transformOrigin=`${h} ${f} ${y}`}}const bm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mx(t,e,n){for(const s in e)!qt(e[s])&&!hx(s,n)&&(t[s]=e[s])}function mN({transformTemplate:t},e){return O.useMemo(()=>{const n=bm();return vm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function pN(t,e){const n=t.style||{},s={};return mx(s,n,t),Object.assign(s,mN(t,e)),s}function gN(t,e){const n={},s=pN(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const yN={offset:"stroke-dashoffset",array:"stroke-dasharray"},vN={offset:"strokeDashoffset",array:"strokeDasharray"};function bN(t,e,n=1,s=0,o=!0){t.pathLength=1;const l=o?yN:vN;t[l.offset]=Ie.transform(-s);const u=Ie.transform(e),d=Ie.transform(n);t[l.array]=`${u} ${d}`}function px(t,{attrX:e,attrY:n,attrScale:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},h,f,y){if(vm(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:b,style:T}=t;b.transform&&(T.transform=b.transform,delete b.transform),(T.transform||b.transformOrigin)&&(T.transformOrigin=b.transformOrigin??"50% 50%",delete b.transformOrigin),T.transform&&(T.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete b.transformBox),e!==void 0&&(b.x=e),n!==void 0&&(b.y=n),s!==void 0&&(b.scale=s),o!==void 0&&bN(b,o,l,u,!1)}const gx=()=>({...bm(),attrs:{}}),yx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function SN(t,e,n,s){const o=O.useMemo(()=>{const l=gx();return px(l,e,yx(s),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};mx(l,t.style,t),o.style={...l,...o.style}}return o}const TN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sm(t){return typeof t!="string"||t.includes("-")?!1:!!(TN.indexOf(t)>-1||/[A-Z]/u.test(t))}function xN(t,e,n,{latestValues:s},o,l=!1){const d=(Sm(t)?SN:gN)(e,s,o,t),h=aN(e,typeof t=="string",l),f=t!==O.Fragment?{...h,...d,ref:n}:{},{children:y}=e,b=O.useMemo(()=>qt(y)?y.get():y,[y]);return O.createElement(t,{...f,children:b})}function bv(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Tm(t,e,n,s){if(typeof e=="function"){const[o,l]=bv(s);e=e(n!==void 0?n:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=bv(s);e=e(n!==void 0?n:t.custom,o,l)}return e}function wu(t){return qt(t)?t.get():t}function wN({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,o){return{latestValues:_N(n,s,o,t),renderState:e()}}function _N(t,e,n,s){const o={},l=s(t,{});for(const T in l)o[T]=wu(l[T]);let{initial:u,animate:d}=t;const h=Ju(t),f=fx(t);e&&f&&!h&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let y=n?n.initial===!1:!1;y=y||u===!1;const b=y?d:u;if(b&&typeof b!="boolean"&&!Ku(b)){const T=Array.isArray(b)?b:[b];for(let w=0;w<T.length;w++){const E=Tm(t,T[w]);if(E){const{transitionEnd:C,transition:A,...R}=E;for(const D in R){let N=R[D];if(Array.isArray(N)){const G=y?N.length-1:0;N=N[G]}N!==null&&(o[D]=N)}for(const D in C)o[D]=C[D]}}}return o}const vx=t=>(e,n)=>{const s=O.useContext($u),o=O.useContext(Fu),l=()=>wN(t,e,s,o);return n?l():Hs(l)};function xm(t,e,n){var l;const{style:s}=t,o={};for(const u in s)(qt(s[u])||e.style&&qt(e.style[u])||hx(u,t)||((l=n==null?void 0:n.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(o[u]=s[u]);return o}const EN=vx({scrapeMotionValuesFromProps:xm,createRenderState:bm});function bx(t,e,n){const s=xm(t,e,n);for(const o in t)if(qt(t[o])||qt(e[o])){const l=so.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[l]=t[o]}return s}const CN=vx({scrapeMotionValuesFromProps:bx,createRenderState:gx}),AN=Symbol.for("motionComponentSymbol");function Gr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function RN(t,e,n){return O.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Gr(n)&&(n.current=s))},[e])}const wm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),NN="framerAppearId",Sx="data-"+wm(NN),Tx=O.createContext({});function MN(t,e,n,s,o){var C,A;const{visualElement:l}=O.useContext($u),u=O.useContext(cx),d=O.useContext(Fu),h=O.useContext(zu).reducedMotion,f=O.useRef(null);s=s||u.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const y=f.current,b=O.useContext(Tx);y&&!y.projection&&o&&(y.type==="html"||y.type==="svg")&&IN(f.current,n,o,b);const T=O.useRef(!1);O.useInsertionEffect(()=>{y&&T.current&&y.update(n,d)});const w=n[Sx],E=O.useRef(!!w&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,w))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,w)));return Jh(()=>{y&&(T.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),E.current&&y.animationState&&y.animationState.animateChanges())}),O.useEffect(()=>{y&&(!E.current&&y.animationState&&y.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)==null||R.call(window,w)}),E.current=!1),y.enteringChildren=void 0)}),y}function IN(t,e,n,s){const{layoutId:o,layout:l,drag:u,dragConstraints:d,layoutScroll:h,layoutRoot:f,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xx(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||d&&Gr(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:y,layoutScroll:h,layoutRoot:f})}function xx(t){if(t)return t.options.allowProjection!==!1?t.projection:xx(t.parent)}function Rf(t,{forwardMotionProps:e=!1}={},n,s){n&&sN(n);const o=Sm(t)?CN:EN;function l(d,h){let f;const y={...O.useContext(zu),...d,layoutId:DN(d)},{isStatic:b}=y,T=uN(d),w=o(d,b);if(!b&&Kh){kN();const E=PN(y);f=E.MeasureLayout,T.visualElement=MN(t,w,y,s,E.ProjectionNode)}return S.jsxs($u.Provider,{value:T,children:[f&&T.visualElement?S.jsx(f,{visualElement:T.visualElement,...y}):null,xN(t,d,RN(w,T.visualElement,h),w,b,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=O.forwardRef(l);return u[AN]=t,u}function DN({layoutId:t}){const e=O.useContext($h).id;return e&&t!==void 0?e+"-"+t:t}function kN(t,e){O.useContext(cx).strict}function PN(t){const{drag:e,layout:n}=eo;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function ON(t,e){if(typeof Proxy>"u")return Rf;const n=new Map,s=(l,u)=>Rf(l,u,t,e),o=(l,u)=>s(l,u);return new Proxy(o,{get:(l,u)=>u==="create"?s:(n.has(u)||n.set(u,Rf(u,void 0,t,e)),n.get(u))})}function wx({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function LN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function UN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Nf(t){return t===void 0||t===1}function lh({scale:t,scaleX:e,scaleY:n}){return!Nf(t)||!Nf(e)||!Nf(n)}function Ms(t){return lh(t)||_x(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _x(t){return Sv(t.x)||Sv(t.y)}function Sv(t){return t&&t!=="0%"}function Iu(t,e,n){const s=t-n,o=e*s;return n+o}function Tv(t,e,n,s,o){return o!==void 0&&(t=Iu(t,o,s)),Iu(t,n,s)+e}function uh(t,e=0,n=1,s,o){t.min=Tv(t.min,e,n,s,o),t.max=Tv(t.max,e,n,s,o)}function Ex(t,{x:e,y:n}){uh(t.x,e.translate,e.scale,e.originPoint),uh(t.y,n.translate,n.scale,n.originPoint)}const xv=.999999999999,wv=1.0000000000001;function VN(t,e,n,s=!1){const o=n.length;if(!o)return;e.x=e.y=1;let l,u;for(let d=0;d<o;d++){l=n[d],u=l.projectionDelta;const{visualElement:h}=l.options;h&&h.props.style&&h.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&jr(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,Ex(t,u)),s&&Ms(l.latestValues)&&jr(t,l.latestValues))}e.x<wv&&e.x>xv&&(e.x=1),e.y<wv&&e.y>xv&&(e.y=1)}function Hr(t,e){t.min=t.min+e,t.max=t.max+e}function _v(t,e,n,s,o=.5){const l=ht(t.min,t.max,o);uh(t,e,n,l,s)}function jr(t,e){_v(t.x,e.x,e.scaleX,e.scale,e.originX),_v(t.y,e.y,e.scaleY,e.scale,e.originY)}function Cx(t,e){return wx(UN(t.getBoundingClientRect(),e))}function BN(t,e,n){const s=Cx(t,n),{scroll:o}=e;return o&&(Hr(s.x,o.offset.x),Hr(s.y,o.offset.y)),s}const Ev=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fr=()=>({x:Ev(),y:Ev()}),Cv=()=>({min:0,max:0}),xt=()=>({x:Cv(),y:Cv()}),ch={current:null},Ax={current:!1};function qN(){if(Ax.current=!0,!!Kh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ch.current=t.matches;t.addEventListener("change",e),e()}else ch.current=!1}const GN=new WeakMap;function HN(t,e,n){for(const s in e){const o=e[s],l=n[s];if(qt(o))t.addValue(s,o);else if(qt(l))t.addValue(s,qs(o,{owner:t}));else if(l!==o)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(s);t.addValue(s,qs(u!==void 0?u:o,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Av=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jN{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:l,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=on.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,dt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=u;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Ju(n),this.isVariantNode=fx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...b}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in b){const w=b[T];h[T]!==void 0&&qt(w)&&w.set(h[T])}}mount(e){var n;this.current=e,GN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),Ax.current||qN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ch.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ei(this.notifyUpdate),Ei(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=ro.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&dt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in eo){const n=eo[e];if(!n)continue;const{isEnabled:s,Feature:o}=n;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Av.length;s++){const o=Av[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=HN(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=qs(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(vT(s)||ST(s))?s=parseFloat(s):!XR(s)&&ss.test(n)&&(s=nx(e,n)),this.setBaseTarget(e,qt(s)?s.get():s)),qt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var l;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const u=Tm(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);u&&(s=u[e])}if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!qt(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Zh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){mm.render(this.render)}}class Rx extends jN{constructor(){super(...arguments),this.KeyframeResolver=VR}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Nx(t,{style:e,vars:n},s,o){const l=t.style;let u;for(u in e)l[u]=e[u];o==null||o.applyProjectionStyles(l,s);for(u in n)l.setProperty(u,n[u])}function FN(t){return window.getComputedStyle(t)}class zN extends Rx{constructor(){super(...arguments),this.type="html",this.renderInstance=Nx}readValueFromInstance(e,n){var s;if(ro.has(n))return(s=this.projection)!=null&&s.isProjecting?th(n):iR(e,n);{const o=FN(e),l=(nm(n)?o.getPropertyValue(n):o[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Cx(e,n)}build(e,n,s){vm(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return xm(e,n,s)}}const Mx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $N(t,e,n,s){Nx(t,e,void 0,s);for(const o in e.attrs)t.setAttribute(Mx.has(o)?o:wm(o),e.attrs[o])}class KN extends Rx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ro.has(n)){const s=tx(n);return s&&s.default||0}return n=Mx.has(n)?n:wm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return bx(e,n,s)}build(e,n,s){px(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,o){$N(e,n,s,o)}mount(e){this.isSVGTag=yx(e.tagName),super.mount(e)}}const JN=(t,e)=>Sm(t)?new KN(e):new zN(e,{allowProjection:t!==O.Fragment});function Jr(t,e,n){const s=t.getProps();return Tm(s,e,n!==void 0?n:s.custom,t)}const dh=t=>Array.isArray(t);function YN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qs(n))}function WN(t){return dh(t)?t[t.length-1]||0:t}function XN(t,e){const n=Jr(t,e);let{transitionEnd:s={},transition:o={},...l}=n||{};l={...l,...s};for(const u in l){const d=WN(l[u]);YN(t,u,d)}}function QN(t){return!!(qt(t)&&t.add)}function fh(t,e){const n=t.getValue("willChange");if(QN(n))return n.add(e);if(!n&&_i.WillChange){const s=new _i.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Ix(t){return t.props[Sx]}const ZN=t=>t!==null;function e1(t,{repeat:e,repeatType:n="loop"},s){const o=t.filter(ZN),l=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[l]}const t1={type:"spring",stiffness:500,damping:25,restSpeed:10},n1=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),i1={type:"keyframes",duration:.8},s1={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r1=(t,{keyframes:e})=>e.length>2?i1:ro.has(t)?t.startsWith("scale")?n1(e[1]):t1:s1;function o1({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:d,from:h,elapsed:f,...y}){return!!Object.keys(y).length}const _m=(t,e,n,s={},o,l)=>u=>{const d=fm(s,t)||{},h=d.delay||s.delay||0;let{elapsed:f=0}=s;f=f-ti(h);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-f,onUpdate:T=>{e.set(T),d.onUpdate&&d.onUpdate(T)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:o};o1(d)||Object.assign(y,r1(t,y)),y.duration&&(y.duration=ti(y.duration)),y.repeatDelay&&(y.repeatDelay=ti(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(oh(y),y.delay===0&&(b=!0)),(_i.instantAnimations||_i.skipAnimations)&&(b=!0,oh(y),y.delay=0),y.allowFlatten=!d.type&&!d.ease,b&&!l&&e.get()!==void 0){const T=e1(y.keyframes,d);if(T!==void 0){dt.update(()=>{y.onUpdate(T),y.onComplete()});return}}return d.isSync?new cm(y):new CR(y)};function a1({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function Dx(t,e,{delay:n=0,transitionOverride:s,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...d}=e;s&&(l=s);const h=[],f=o&&t.animationState&&t.animationState.getState()[o];for(const y in d){const b=t.getValue(y,t.latestValues[y]??null),T=d[y];if(T===void 0||f&&a1(f,y))continue;const w={delay:n,...fm(l||{},y)},E=b.get();if(E!==void 0&&!b.isAnimating&&!Array.isArray(T)&&T===E&&!w.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const R=Ix(t);if(R){const D=window.MotionHandoffAnimation(R,y,dt);D!==null&&(w.startTime=D,C=!0)}}fh(t,y),b.start(_m(y,b,T,t.shouldReduceMotion&&QT.has(y)?{type:!1}:w,t,C));const A=b.animation;A&&h.push(A)}return u&&Promise.all(h).then(()=>{dt.update(()=>{u&&XN(t,u)})}),h}function kx(t,e,n,s=0,o=1){const l=Array.from(t).sort((f,y)=>f.sortNodePosition(y)).indexOf(e),u=t.size,d=(u-1)*s;return typeof n=="function"?n(l,u):o===1?l*s:d-l*s}function hh(t,e,n={}){var h;const s=Jr(t,e,n.type==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const l=s?()=>Promise.all(Dx(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:y=0,staggerChildren:b,staggerDirection:T}=o;return l1(t,e,f,y,b,T,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,y]=d==="beforeChildren"?[l,u]:[u,l];return f().then(()=>y())}else return Promise.all([l(),u(n.delay)])}function l1(t,e,n=0,s=0,o=0,l=1,u){const d=[];for(const h of t.variantChildren)h.notify("AnimationStart",e),d.push(hh(h,e,{...u,delay:n+(typeof s=="function"?0:s)+kx(t.variantChildren,h,s,o,l)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(d)}function u1(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(l=>hh(t,l,n));s=Promise.all(o)}else if(typeof e=="string")s=hh(t,e,n);else{const o=typeof e=="function"?Jr(t,e,n.custom):e;s=Promise.all(Dx(t,o,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function Px(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const c1=ym.length;function Ox(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ox(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<c1;n++){const s=ym[n],o=t.props[s];(Na(o)||o===!1)&&(e[s]=o)}return e}const d1=[...gm].reverse(),f1=gm.length;function h1(t){return e=>Promise.all(e.map(({animation:n,options:s})=>u1(t,n,s)))}function m1(t){let e=h1(t),n=Rv(),s=!0;const o=h=>(f,y)=>{var T;const b=Jr(t,y,h==="exit"?(T=t.presenceContext)==null?void 0:T.custom:void 0);if(b){const{transition:w,transitionEnd:E,...C}=b;f={...f,...C,...E}}return f};function l(h){e=h(t)}function u(h){const{props:f}=t,y=Ox(t.parent)||{},b=[],T=new Set;let w={},E=1/0;for(let A=0;A<f1;A++){const R=d1[A],D=n[R],N=f[R]!==void 0?f[R]:y[R],G=Na(N),q=R===h?D.isActive:null;q===!1&&(E=A);let z=N===y[R]&&N!==f[R]&&G;if(z&&s&&t.manuallyAnimateOnMount&&(z=!1),D.protectedKeys={...w},!D.isActive&&q===null||!N&&!D.prevProp||Ku(N)||typeof N=="boolean")continue;const F=p1(D.prevProp,N);let ee=F||R===h&&D.isActive&&!z&&G||A>E&&G,te=!1;const ue=Array.isArray(N)?N:[N];let he=ue.reduce(o(R),{});q===!1&&(he={});const{prevResolvedValues:Te={}}=D,Pe={...Te,...he},$e=H=>{ee=!0,T.has(H)&&(te=!0,T.delete(H)),D.needsAnimating[H]=!0;const ne=t.getValue(H);ne&&(ne.liveStyle=!1)};for(const H in Pe){const ne=he[H],re=Te[H];if(w.hasOwnProperty(H))continue;let ce=!1;dh(ne)&&dh(re)?ce=!Px(ne,re):ce=ne!==re,ce?ne!=null?$e(H):T.add(H):ne!==void 0&&T.has(H)?$e(H):D.protectedKeys[H]=!0}D.prevProp=N,D.prevResolvedValues=he,D.isActive&&(w={...w,...he}),s&&t.blockInitialAnimation&&(ee=!1);const Ue=z&&F;ee&&(!Ue||te)&&b.push(...ue.map(H=>{const ne={type:R};if(typeof H=="string"&&s&&!Ue&&t.manuallyAnimateOnMount&&t.parent){const{parent:re}=t,ce=Jr(re,H);if(re.enteringChildren&&ce){const{delayChildren:I}=ce.transition||{};ne.delay=kx(re.enteringChildren,t,I)}}return{animation:H,options:ne}}))}if(T.size){const A={};if(typeof f.initial!="boolean"){const R=Jr(t,Array.isArray(f.initial)?f.initial[0]:f.initial);R&&R.transition&&(A.transition=R.transition)}T.forEach(R=>{const D=t.getBaseTarget(R),N=t.getValue(R);N&&(N.liveStyle=!0),A[R]=D??null}),b.push({animation:A})}let C=!!b.length;return s&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(C=!1),s=!1,C?e(b):Promise.resolve()}function d(h,f){var b;if(n[h].isActive===f)return Promise.resolve();(b=t.variantChildren)==null||b.forEach(T=>{var w;return(w=T.animationState)==null?void 0:w.setActive(h,f)}),n[h].isActive=f;const y=u(h);for(const T in n)n[T].protectedKeys={};return y}return{animateChanges:u,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=Rv()}}}function p1(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Px(e,t):!1}function As(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Rv(){return{animate:As(!0),whileInView:As(),whileHover:As(),whileTap:As(),whileDrag:As(),whileFocus:As(),exit:As()}}class os{constructor(e){this.isMounted=!1,this.node=e}update(){}}class g1 extends os{constructor(e){super(e),e.animationState||(e.animationState=m1(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ku(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let y1=0;class v1 extends os{constructor(){super(...arguments),this.id=y1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const b1={animation:{Feature:g1},exit:{Feature:v1}};function Ia(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function qa(t){return{point:{x:t.pageX,y:t.pageY}}}const S1=t=>e=>pm(e)&&t(e,qa(e));function ma(t,e,n,s){return Ia(t,e,S1(n),s)}const Lx=1e-4,T1=1-Lx,x1=1+Lx,Ux=.01,w1=0-Ux,_1=0+Ux;function Yt(t){return t.max-t.min}function E1(t,e,n){return Math.abs(t-e)<=n}function Nv(t,e,n,s=.5){t.origin=s,t.originPoint=ht(e.min,e.max,t.origin),t.scale=Yt(n)/Yt(e),t.translate=ht(n.min,n.max,t.origin)-t.originPoint,(t.scale>=T1&&t.scale<=x1||isNaN(t.scale))&&(t.scale=1),(t.translate>=w1&&t.translate<=_1||isNaN(t.translate))&&(t.translate=0)}function pa(t,e,n,s){Nv(t.x,e.x,n.x,s?s.originX:void 0),Nv(t.y,e.y,n.y,s?s.originY:void 0)}function Mv(t,e,n){t.min=n.min+e.min,t.max=t.min+Yt(e)}function C1(t,e,n){Mv(t.x,e.x,n.x),Mv(t.y,e.y,n.y)}function Iv(t,e,n){t.min=e.min-n.min,t.max=t.min+Yt(e)}function ga(t,e,n){Iv(t.x,e.x,n.x),Iv(t.y,e.y,n.y)}function Mn(t){return[t("x"),t("y")]}const Vx=({current:t})=>t?t.ownerDocument.defaultView:null,Dv=(t,e)=>Math.abs(t-e);function A1(t,e){const n=Dv(t.x,e.x),s=Dv(t.y,e.y);return Math.sqrt(n**2+s**2)}class Bx{constructor(e,n,{transformPagePoint:s,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=If(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,E=A1(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!E)return;const{point:C}=T,{timestamp:A}=Vt;this.history.push({...C,timestamp:A});const{onStart:R,onMove:D}=this.handlers;w||(R&&R(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,T)},this.handlePointerMove=(T,w)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=Mf(w,this.transformPagePoint),dt.update(this.updatePoint,!0)},this.handlePointerUp=(T,w)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=If(T.type==="pointercancel"?this.lastMoveEventInfo:Mf(w,this.transformPagePoint),this.history);this.startEvent&&E&&E(T,R),C&&C(T,R)},!pm(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=o||window;const d=qa(e),h=Mf(d,this.transformPagePoint),{point:f}=h,{timestamp:y}=Vt;this.history=[{...f,timestamp:y}];const{onSessionStart:b}=n;b&&b(e,If(h,this.history)),this.removeListeners=Ua(ma(this.contextWindow,"pointermove",this.handlePointerMove),ma(this.contextWindow,"pointerup",this.handlePointerUp),ma(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ei(this.updatePoint)}}function Mf(t,e){return e?{point:e(t.point)}:t}function kv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function If({point:t},e){return{point:t,delta:kv(t,qx(e)),offset:kv(t,R1(e)),velocity:N1(e,.1)}}function R1(t){return t[0]}function qx(t){return t[t.length-1]}function N1(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const o=qx(t);for(;n>=0&&(s=t[n],!(o.timestamp-s.timestamp>ti(e)));)n--;if(!s)return{x:0,y:0};const l=Dn(o.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-s.x)/l,y:(o.y-s.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function M1(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?ht(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?ht(n,t,s.max):Math.min(t,n)),t}function Pv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I1(t,{top:e,left:n,bottom:s,right:o}){return{x:Pv(t.x,n,o),y:Pv(t.y,e,s)}}function Ov(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function D1(t,e){return{x:Ov(t.x,e.x),y:Ov(t.y,e.y)}}function k1(t,e){let n=.5;const s=Yt(t),o=Yt(e);return o>s?n=Ea(e.min,e.max-s,t.min):s>o&&(n=Ea(t.min,t.max-o,e.min)),wi(0,1,n)}function P1(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const mh=.35;function O1(t=mh){return t===!1?t=0:t===!0&&(t=mh),{x:Lv(t,"left","right"),y:Lv(t,"top","bottom")}}function Lv(t,e,n){return{min:Uv(t,e),max:Uv(t,n)}}function Uv(t,e){return typeof t=="number"?t:t[e]||0}const L1=new WeakMap;class U1{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=b=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qa(b).point)},u=(b,T)=>{const{drag:w,dragPropagation:E,onDragStart:C}=this.getProps();if(w&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HR(w),!this.openDragLock))return;this.latestPointerEvent=b,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mn(R=>{let D=this.getAxisMotionValue(R).get()||0;if(ni.test(D)){const{projection:N}=this.visualElement;if(N&&N.layout){const G=N.layout.layoutBox[R];G&&(D=Yt(G)*(parseFloat(D)/100))}}this.originPoint[R]=D}),C&&dt.postRender(()=>C(b,T)),fh(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},d=(b,T)=>{this.latestPointerEvent=b,this.latestPanInfo=T;const{dragPropagation:w,dragDirectionLock:E,onDirectionLock:C,onDrag:A}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:R}=T;if(E&&this.currentDirection===null){this.currentDirection=V1(R),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",T.point,R),this.updateAxis("y",T.point,R),this.visualElement.render(),A&&A(b,T)},h=(b,T)=>{this.latestPointerEvent=b,this.latestPanInfo=T,this.stop(b,T),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Mn(b=>{var T;return this.getAnimationState(b)==="paused"&&((T=this.getAxisMotionValue(b).animation)==null?void 0:T.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new Bx(e,{onSessionStart:l,onStart:u,onMove:d,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:s,contextWindow:Vx(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,o=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!s)return;const{velocity:u}=o;this.startAnimation(u);const{onDragEnd:d}=this.getProps();d&&dt.postRender(()=>d(s,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:o}=this.getProps();if(!s||!uu(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=M1(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,o=this.constraints;e&&Gr(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=I1(s.layoutBox,e):this.constraints=!1,this.elastic=O1(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Mn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=P1(s.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Gr(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=BN(s,o.root,this.visualElement.getTransformPagePoint());let u=D1(o.layout.layoutBox,l);if(n){const d=n(LN(u));this.hasMutatedConstraints=!!d,d&&(u=wx(d))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),h=this.constraints||{},f=Mn(y=>{if(!uu(y,n,this.currentDirection))return;let b=h&&h[y]||{};u&&(b={min:0,max:0});const T=o?200:1e6,w=o?40:1e7,E={type:"inertia",velocity:s?e[y]:0,bounceStiffness:T,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...l,...b};return this.startAxisValueAnimation(y,E)});return Promise.all(f).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return fh(this.visualElement,e),s.start(_m(e,s,0,n,this.visualElement,!1))}stopAnimation(){Mn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Mn(n=>{const{drag:s}=this.getProps();if(!uu(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:d}=o.layout.layoutBox[n];l.set(e[n]-ht(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Gr(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Mn(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const h=d.get();o[u]=k1({min:h,max:h},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Mn(u=>{if(!uu(u,e,null))return;const d=this.getAxisMotionValue(u),{min:h,max:f}=this.constraints[u];d.set(ht(h,f,o[u]))})}addListeners(){if(!this.visualElement.current)return;L1.set(this.visualElement,this);const e=this.visualElement.current,n=ma(e,"pointerdown",h=>{const{drag:f,dragListener:y=!0}=this.getProps();f&&y&&this.start(h)}),s=()=>{const{dragConstraints:h}=this.getProps();Gr(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),dt.read(s);const u=Ia(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Mn(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=h[y].translate,b.set(b.get()+h[y].translate))}),this.visualElement.render())}));return()=>{u(),n(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=mh,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:d}}}function uu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function V1(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class B1 extends os{constructor(e){super(e),this.removeGroupControls=kn,this.removeListeners=kn,this.controls=new U1(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vv=t=>(e,n)=>{t&&dt.postRender(()=>t(e,n))};class q1 extends os{constructor(){super(...arguments),this.removePointerDownListener=kn}onPointerDown(e){this.session=new Bx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vx(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:Vv(e),onStart:Vv(n),onMove:s,onEnd:(l,u)=>{delete this.session,o&&dt.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=ma(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _u={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=Bv(t,e.target.x),s=Bv(t,e.target.y);return`${n}% ${s}%`}},G1={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,o=ss.parse(t);if(o.length>5)return s;const l=ss.createTransformer(t),u=typeof o[0]!="number"?1:0,d=n.x.scale*e.x,h=n.y.scale*e.y;o[0+u]/=d,o[1+u]/=h;const f=ht(d,h,.5);return typeof o[2+u]=="number"&&(o[2+u]/=f),typeof o[3+u]=="number"&&(o[3+u]/=f),l(o)}};let Df=!1;class H1 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:l}=e;cN(j1),l&&(n.group&&n.group.add(l),s&&s.register&&o&&s.register(l),Df&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),_u.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:o,isPresent:l}=this.props,{projection:u}=s;return u&&(u.isPresent=l,Df=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||dt.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),mm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=e;Df=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Gx(t){const[e,n]=ux(),s=O.useContext($h);return S.jsx(H1,{...t,layoutGroup:s,switchLayoutGroup:O.useContext(Tx),isPresent:e,safeToRemove:n})}const j1={borderRadius:{...ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ra,borderTopRightRadius:ra,borderBottomLeftRadius:ra,borderBottomRightRadius:ra,boxShadow:G1};function F1(t,e,n){const s=qt(t)?t:qs(t);return s.start(_m("",s,e,n)),s.animation}const z1=(t,e)=>t.depth-e.depth;class $1{constructor(){this.children=[],this.isDirty=!1}add(e){Yh(this.children,e),this.isDirty=!0}remove(e){Wh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(z1),this.isDirty=!1,this.children.forEach(e)}}function K1(t,e){const n=on.now(),s=({timestamp:o})=>{const l=o-n;l>=e&&(Ei(s),t(l-e))};return dt.setup(s,!0),()=>Ei(s)}const Hx=["TopLeft","TopRight","BottomLeft","BottomRight"],J1=Hx.length,qv=t=>typeof t=="string"?parseFloat(t):t,Gv=t=>typeof t=="number"||Ie.test(t);function Y1(t,e,n,s,o,l){o?(t.opacity=ht(0,n.opacity??1,W1(s)),t.opacityExit=ht(e.opacity??1,0,X1(s))):l&&(t.opacity=ht(e.opacity??1,n.opacity??1,s));for(let u=0;u<J1;u++){const d=`border${Hx[u]}Radius`;let h=Hv(e,d),f=Hv(n,d);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||Gv(h)===Gv(f)?(t[d]=Math.max(ht(qv(h),qv(f),s),0),(ni.test(f)||ni.test(h))&&(t[d]+="%")):t[d]=f}(e.rotate||n.rotate)&&(t.rotate=ht(e.rotate||0,n.rotate||0,s))}function Hv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const W1=jx(0,.5,RT),X1=jx(.5,.95,kn);function jx(t,e,n){return s=>s<t?0:s>e?1:n(Ea(t,e,s))}function jv(t,e){t.min=e.min,t.max=e.max}function Rn(t,e){jv(t.x,e.x),jv(t.y,e.y)}function Fv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function zv(t,e,n,s,o){return t-=e,t=Iu(t,1/n,s),o!==void 0&&(t=Iu(t,1/o,s)),t}function Q1(t,e=0,n=1,s=.5,o,l=t,u=t){if(ni.test(e)&&(e=parseFloat(e),e=ht(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=ht(l.min,l.max,s);t===l&&(d-=e),t.min=zv(t.min,e,n,d,o),t.max=zv(t.max,e,n,d,o)}function $v(t,e,[n,s,o],l,u){Q1(t,e[n],e[s],e[o],e.scale,l,u)}const Z1=["x","scaleX","originX"],eM=["y","scaleY","originY"];function Kv(t,e,n,s){$v(t.x,e,Z1,n?n.x:void 0,s?s.x:void 0),$v(t.y,e,eM,n?n.y:void 0,s?s.y:void 0)}function Jv(t){return t.translate===0&&t.scale===1}function Fx(t){return Jv(t.x)&&Jv(t.y)}function Yv(t,e){return t.min===e.min&&t.max===e.max}function tM(t,e){return Yv(t.x,e.x)&&Yv(t.y,e.y)}function Wv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zx(t,e){return Wv(t.x,e.x)&&Wv(t.y,e.y)}function Xv(t){return Yt(t.x)/Yt(t.y)}function Qv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class nM{constructor(){this.members=[]}add(e){Yh(this.members,e),e.scheduleRender()}remove(e){if(Wh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iM(t,e,n){let s="";const o=t.x.translate/e.x,l=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((o||l||u)&&(s=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:y,rotateX:b,rotateY:T,skewX:w,skewY:E}=n;f&&(s=`perspective(${f}px) ${s}`),y&&(s+=`rotate(${y}deg) `),b&&(s+=`rotateX(${b}deg) `),T&&(s+=`rotateY(${T}deg) `),w&&(s+=`skewX(${w}deg) `),E&&(s+=`skewY(${E}deg) `)}const d=t.x.scale*e.x,h=t.y.scale*e.y;return(d!==1||h!==1)&&(s+=`scale(${d}, ${h})`),s||"none"}const kf=["","X","Y","Z"],sM=1e3;let rM=0;function Pf(t,e,n,s){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),s&&(s[t]=0))}function $x(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Ix(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",dt,!(o||l))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&$x(s)}function Kx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(u={},d=e==null?void 0:e()){this.id=rM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lM),this.nodes.forEach(fM),this.nodes.forEach(hM),this.nodes.forEach(uM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new $1)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Zh),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const h=this.eventHandlers.get(u);h&&h.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=lx(u)&&!JR(u),this.instance=u;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||d)&&(this.isLayoutDirty=!0),t){let y,b=0;const T=()=>this.root.updateBlockedByResize=!1;dt.read(()=>{b=window.innerWidth}),t(u,()=>{const w=window.innerWidth;w!==b&&(b=w,this.root.updateBlockedByResize=!0,y&&y(),y=K1(T,250),_u.hasAnimatedSinceResize&&(_u.hasAnimatedSinceResize=!1,this.nodes.forEach(tb)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:b,hasRelativeLayoutChanged:T,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||f.getDefaultTransition()||vM,{onLayoutAnimationStart:C,onLayoutAnimationComplete:A}=f.getProps(),R=!this.targetLayout||!zx(this.targetLayout,w),D=!b&&T;if(this.options.layoutRoot||this.resumeFrom||D||b&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...fm(E,"layout"),onPlay:C,onComplete:A};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(y,D)}else b||tb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ei(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mM),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$x(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:d,layout:h}=this.options;if(d===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dM),this.nodes.forEach(oM),this.nodes.forEach(aM)):this.nodes.forEach(eb),this.clearAllSnapshots();const d=on.now();Vt.delta=wi(0,1e3/60,d-Vt.timestamp),Vt.timestamp=d,Vt.isProcessing=!0,xf.update.process(Vt),xf.preRender.process(Vt),xf.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cM),this.sharedNodes.forEach(pM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yt(this.snapshot.measuredBox.x)&&!Yt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&this.instance){const h=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Fx(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,y=f!==this.prevTransformTemplateValue;u&&this.instance&&(d||Ms(this.latestValues)||y)&&(o(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let h=this.removeElementScroll(d);return u&&(h=this.removeTransform(h)),bM(h),{animationId:this.root.animationId,measuredBox:d,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:u}=this.options;if(!u)return xt();const d=u.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(SM))){const{scroll:y}=this.root;y&&(Hr(d.x,y.offset.x),Hr(d.y,y.offset.y))}return d}removeElementScroll(u){var h;const d=xt();if(Rn(d,u),(h=this.scroll)!=null&&h.wasRoot)return d;for(let f=0;f<this.path.length;f++){const y=this.path[f],{scroll:b,options:T}=y;y!==this.root&&b&&T.layoutScroll&&(b.wasRoot&&Rn(d,u),Hr(d.x,b.offset.x),Hr(d.y,b.offset.y))}return d}applyTransform(u,d=!1){const h=xt();Rn(h,u);for(let f=0;f<this.path.length;f++){const y=this.path[f];!d&&y.options.layoutScroll&&y.scroll&&y!==y.root&&jr(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Ms(y.latestValues)&&jr(h,y.latestValues)}return Ms(this.latestValues)&&jr(h,this.latestValues),h}removeTransform(u){const d=xt();Rn(d,u);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Ms(f.latestValues))continue;lh(f.latestValues)&&f.updateSnapshot();const y=xt(),b=f.measurePageBox();Rn(y,b),Kv(d,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,y)}return Ms(this.latestValues)&&Kv(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var T;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(u||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),ga(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),C1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rn(this.target,this.layout.layoutBox),Ex(this.target,this.targetDelta)):Rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),ga(this.relativeTargetOrigin,this.target,w.target),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lh(this.parent.latestValues)||_x(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(h=!1),h)return;const{layout:f,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||y))return;Rn(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,T=this.treeScale.y;VN(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=xt());const{target:w}=u;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fv(this.prevProjectionDelta.x,this.projectionDelta.x),Fv(this.prevProjectionDelta.y,this.projectionDelta.y)),pa(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==T||!Qv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Qv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fr(),this.projectionDelta=Fr(),this.projectionDeltaWithTransform=Fr()}setAnimationOrigin(u,d=!1){const h=this.snapshot,f=h?h.latestValues:{},y={...this.latestValues},b=Fr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const T=xt(),w=h?h.source:void 0,E=this.layout?this.layout.source:void 0,C=w!==E,A=this.getStack(),R=!A||A.members.length<=1,D=!!(C&&!R&&this.options.crossfade===!0&&!this.path.some(yM));this.animationProgress=0;let N;this.mixTargetDelta=G=>{const q=G/1e3;nb(b.x,u.x,q),nb(b.y,u.y,q),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ga(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gM(this.relativeTarget,this.relativeTargetOrigin,T,q),N&&tM(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=xt()),Rn(N,this.relativeTarget)),C&&(this.animationValues=y,Y1(y,f,this.latestValues,q,D,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var d,h,f;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(f=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Ei(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dt.update(()=>{_u.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qs(0)),this.currentAnimation=F1(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),u.onUpdate&&u.onUpdate(y)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:h,layout:f,latestValues:y}=u;if(!(!d||!h||!f)){if(this!==u&&this.layout&&f&&Jx(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||xt();const b=Yt(this.layout.layoutBox.x);h.x.min=u.target.x.min,h.x.max=h.x.min+b;const T=Yt(this.layout.layoutBox.y);h.y.min=u.target.y.min,h.y.max=h.y.min+T}Rn(d,h),jr(d,y),pa(this.projectionDeltaWithTransform,this.layoutCorrected,d,y)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new nM),this.sharedNodes.get(u).add(d);const f=d.options.initialPromotionConfig;d.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var d;const{layoutId:u}=this.options;return u?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:u}=this.options;return u?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:h}=u;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(d=!0),!d)return;const f={};h.z&&Pf("z",u,f,this.animationValues);for(let y=0;y<kf.length;y++)Pf(`rotate${kf[y]}`,u,f,this.animationValues),Pf(`skew${kf[y]}`,u,f,this.animationValues);u.render();for(const y in f)u.setStaticValue(y,f[y]),this.animationValues&&(this.animationValues[y]=f[y]);u.scheduleRender()}applyProjectionStyles(u,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=wu(d==null?void 0:d.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=wu(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Ms(this.latestValues)&&(u.transform=h?h({},""):"none",this.hasProjected=!1);return}u.visibility="";const y=f.animationValues||f.latestValues;this.applyTransformsToTarget();let b=iM(this.projectionDeltaWithTransform,this.treeScale,y);h&&(b=h(y,b)),u.transform=b;const{x:T,y:w}=this.projectionDelta;u.transformOrigin=`${T.origin*100}% ${w.origin*100}% 0`,f.animationValues?u.opacity=f===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:u.opacity=f===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const E in Ma){if(y[E]===void 0)continue;const{correct:C,applyTo:A,isCSSVariable:R}=Ma[E],D=b==="none"?y[E]:C(y[E],f);if(A){const N=A.length;for(let G=0;G<N;G++)u[A[G]]=D}else R?this.options.visualElement.renderState.vars[E]=D:u[E]=D}this.options.layoutId&&(u.pointerEvents=f===this?wu(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(Zv),this.root.sharedNodes.clear()}}}function oM(t){t.updateLayout()}function aM(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=t.layout,{animationType:l}=t.options,u=e.source!==t.layout.source;l==="size"?Mn(b=>{const T=u?e.measuredBox[b]:e.layoutBox[b],w=Yt(T);T.min=s[b].min,T.max=T.min+w}):Jx(l,e.layoutBox,s)&&Mn(b=>{const T=u?e.measuredBox[b]:e.layoutBox[b],w=Yt(s[b]);T.max=T.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[b].max=t.relativeTarget[b].min+w)});const d=Fr();pa(d,s,e.layoutBox);const h=Fr();u?pa(h,t.applyTransform(o,!0),e.measuredBox):pa(h,s,e.layoutBox);const f=!Fx(d);let y=!1;if(!t.resumeFrom){const b=t.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:T,layout:w}=b;if(T&&w){const E=xt();ga(E,e.layoutBox,T.layoutBox);const C=xt();ga(C,s,w.layoutBox),zx(E,C)||(y=!0),b.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=E,t.relativeParent=b)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:h,layoutDelta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function lM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function uM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function cM(t){t.clearSnapshot()}function Zv(t){t.clearMeasurements()}function eb(t){t.isLayoutDirty=!1}function dM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fM(t){t.resolveTargetDelta()}function hM(t){t.calcProjection()}function mM(t){t.resetSkewAndRotation()}function pM(t){t.removeLeadSnapshot()}function nb(t,e,n){t.translate=ht(e.translate,0,n),t.scale=ht(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ib(t,e,n,s){t.min=ht(e.min,n.min,s),t.max=ht(e.max,n.max,s)}function gM(t,e,n,s){ib(t.x,e.x,n.x,s),ib(t.y,e.y,n.y,s)}function yM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const vM={duration:.45,ease:[.4,0,.1,1]},sb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rb=sb("applewebkit/")&&!sb("chrome/")?Math.round:kn;function ob(t){t.min=rb(t.min),t.max=rb(t.max)}function bM(t){ob(t.x),ob(t.y)}function Jx(t,e,n){return t==="position"||t==="preserve-aspect"&&!E1(Xv(e),Xv(n),.2)}function SM(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const TM=Kx({attachResizeListener:(t,e)=>Ia(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Of={current:void 0},Yx=Kx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Of.current){const t=new TM({});t.mount(window),t.setOptions({layoutScroll:!0}),Of.current=t}return Of.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xM={pan:{Feature:q1},drag:{Feature:B1,ProjectionNode:Yx,MeasureLayout:Gx}};function ab(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,l=s[o];l&&dt.postRender(()=>l(e,qa(e)))}class wM extends os{mount(){const{current:e}=this.node;e&&(this.unmount=jR(e,(n,s)=>(ab(this.node,s,"Start"),o=>ab(this.node,o,"End"))))}unmount(){}}class _M extends os{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ua(Ia(this.node.current,"focus",()=>this.onFocus()),Ia(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lb(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),l=s[o];l&&dt.postRender(()=>l(e,qa(e)))}class EM extends os{mount(){const{current:e}=this.node;e&&(this.unmount=KR(e,(n,s)=>(lb(this.node,s,"Start"),(o,{success:l})=>lb(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ph=new WeakMap,Lf=new WeakMap,CM=t=>{const e=ph.get(t.target);e&&e(t)},AM=t=>{t.forEach(CM)};function RM({root:t,...e}){const n=t||document;Lf.has(n)||Lf.set(n,{});const s=Lf.get(n),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(AM,{root:t,...e})),s[o]}function NM(t,e,n){const s=RM(e);return ph.set(t,n),s.observe(t),()=>{ph.delete(t),s.unobserve(t)}}const MM={some:0,all:1};class IM extends os{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:l}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:MM[o]},d=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,l&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),T=f?y:b;T&&T(h)};return NM(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DM(e,n))&&this.startObserver()}unmount(){}}function DM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kM={inView:{Feature:IM},tap:{Feature:EM},focus:{Feature:_M},hover:{Feature:wM}},PM={layout:{ProjectionNode:Yx,MeasureLayout:Gx}},OM={...b1,...kM,...xM,...PM},se=ON(OM,JN);function Wx(t){const e=Hs(()=>qs(t)),{isStatic:n}=O.useContext(zu);if(n){const[,s]=O.useState(t);O.useEffect(()=>e.on("change",s),[])}return e}function Xx(t,e){const n=Wx(e()),s=()=>n.set(e());return s(),Jh(()=>{const o=()=>dt.preRender(s,!1,!0),l=t.map(u=>u.on("change",o));return()=>{l.forEach(u=>u()),Ei(s)}}),n}function LM(t){ha.current=[],t();const e=Xx(ha.current,t);return ha.current=void 0,e}function UM(t,e,n,s){if(typeof t=="function")return LM(t);const o=typeof e=="function"?e:YR(e,n,s);return Array.isArray(t)?ub(t,o):ub([t],([l])=>o(l))}function ub(t,e){const n=Hs(()=>[]);return Xx(t,()=>{n.length=0;const s=t.length;for(let o=0;o<s;o++)n[o]=t[o].get();return e(n)})}const Qx=O.createContext(null);function VM(t,e,n,s){if(!s)return t;const o=t.findIndex(y=>y.value===e);if(o===-1)return t;const l=s>0?1:-1,u=t[o+l];if(!u)return t;const d=t[o],h=u.layout,f=ht(h.min,h.max,.5);return l===1&&d.layout.max+n>f||l===-1&&d.layout.min+n<f?tA(t,o,o+l):t}function BM({children:t,as:e="ul",axis:n="y",onReorder:s,values:o,...l},u){const d=Hs(()=>se[e]),h=[],f=O.useRef(!1),y={axis:n,registerItem:(b,T)=>{const w=h.findIndex(E=>b===E.value);w!==-1?h[w].layout=T[n]:h.push({value:b,layout:T[n]}),h.sort(HM)},updateOrder:(b,T,w)=>{if(f.current)return;const E=VM(h,b,T,w);h!==E&&(f.current=!0,s(E.map(GM).filter(C=>o.indexOf(C)!==-1)))}};return O.useEffect(()=>{f.current=!1}),S.jsx(d,{...l,ref:u,ignoreStrict:!0,children:S.jsx(Qx.Provider,{value:y,children:t})})}const qM=O.forwardRef(BM);function GM(t){return t.value}function HM(t,e){return t.layout.min-e.layout.min}function cb(t,e=0){return qt(t)?t:Wx(e)}function jM({children:t,style:e={},value:n,as:s="li",onDrag:o,layout:l=!0,...u},d){const h=Hs(()=>se[s]),f=O.useContext(Qx),y={x:cb(e.x),y:cb(e.y)},b=UM([y.x,y.y],([C,A])=>C||A?1:"unset"),{axis:T,registerItem:w,updateOrder:E}=f;return S.jsx(h,{drag:T,...u,dragSnapToOrigin:!0,style:{...e,x:y.x,y:y.y,zIndex:b},layout:l,onDrag:(C,A)=>{const{velocity:R}=A;R[T]&&E(n,y[T].get(),R[T]),o&&o(C,A)},onLayoutMeasure:C=>w(n,C),ref:d,ignoreStrict:!0,children:t})}const FM=O.forwardRef(jM);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$M=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),db=t=>{const e=$M(t);return e.charAt(0).toUpperCase()+e.slice(1)},Zx=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),KM=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:u,...d},h)=>O.createElement("svg",{ref:h,...JM,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Zx("lucide",o),...!l&&!KM(d)&&{"aria-hidden":"true"},...d},[...u.map(([f,y])=>O.createElement(f,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=O.forwardRef(({className:s,...o},l)=>O.createElement(YM,{ref:l,iconNode:e,className:Zx(`lucide-${zM(db(t))}`,`lucide-${t}`,s),...o}));return n.displayName=db(t),n};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fb=ze("arrow-left",WM);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ew=ze("arrow-right",XM);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],tw=ze("book-open",QM);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],eI=ze("camera",ZM);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Em=ze("check",tI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nw=ze("chevron-down",nI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sI=ze("chevron-left",iI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oI=ze("chevron-right",rI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cm=ze("circle-check-big",aI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],Am=ze("clipboard-copy",lI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cI=ze("copy",uI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fI=ze("download",dI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],gh=ze("external-link",hI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],rs=ze("film",mI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],gI=ze("grip-vertical",pI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],hb=ze("heart",yI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yh=ze("image",vI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Da=ze("lightbulb",bI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],TI=ze("map-pin",SI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Du=ze("palette",xI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_I=ze("plus",wI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],CI=ze("refresh-ccw",EI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],RI=ze("save",AI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],mb=ze("scissors",NI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],vh=ze("sparkles",MI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],DI=ze("target",II);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ku=ze("trash-2",kI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],pb=ze("type",PI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gb=ze("upload",OI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],UI=ze("user",LI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BI=ze("users",VI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],GI=ze("volume-2",qI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Yu=ze("wand-sparkles",HI);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],FI=ze("x",jI),Fn=800,Bt=450,oa={DEFAULT_KEY_LIGHT:80,DEFAULT_FILL_LIGHT:40,DEFAULT_BACK_LIGHT:60,DEFAULT_AMBIENT:20,DEFAULT_COLOR_TEMP:4500},Zi={AUTO_SAVE_INTERVAL:5e3,FILE_UPLOAD_TIMEOUT:3e4,API_REQUEST_TIMEOUT:45e3,PROGRESS_SAVE_DEBOUNCE:2e3,HOVER_SCALE:1.05,TAP_SCALE:.95,MOTION_DURATION:.8,BUTTON_SCALE_ANIMATION_DURATION:.6,MENU_ANIMATION_DURATION:.4,TRANSITION_DURATION:.5,STORAGE_KEY_PREFIX:"dreamer_",STORAGE_PREFIXES:{CONFIGS:"dreamerConfigs",KNOWLEDGE:"dreamerKnowledge",VISUAL_PRESETS:"dreamerVisualPresets",COMPOSITIONS:"dreamerCompositions",LIGHTING:"dreamerLighting",COLOR:"dreamerColor",MOVEMENT:"dreamerMovement",STYLES:"dreamerStyles"}},Ft={GENERIC_ERROR:"An unexpected error occurred. Please try again.",TIMEOUT_ERROR:"Request timed out. The operation took longer than expected.",VALIDATION_ERROR:"Invalid input provided. Please check your data and try again.",AI_SERVICE_ERROR:"AI service temporarily unavailable. Please try again later.",ERROR_CODES:{NETWORK_FAILED:"NETWORK_FAILED",TIMEOUT:"TIMEOUT",VALIDATION_FAILED:"VALIDATION_FAILED",RATE_LIMITED:"RATE_LIMITED",FILE_TOO_LARGE:"FILE_TOO_LARGE",UNSUPPORTED_FILE_TYPE:"UNSUPPORTED_FILE_TYPE",GENERATION_FAILED:"GENERATION_FAILED"}},Uf={DEFAULT_ASPECT_RATIO:"16:9",STYLE_FLAG:"--style dramatic",VERSION_FLAG:"--v 6"},zI={HEX_COLOR:/^#[0-9A-Fa-f]{6}$/},$I=["ground-level soul gaze","eye-level witness","elevated guardian","angelic drift"],KI=["true-eye, honest","steep reverence","whispered low","Dutch slip"],bh=["chiaroscuro confession","soft volumetric prayer","neon fever dream","moonlit echo","burnt tungsten reminiscence"],Pu=["complementary pulse","analogous drift","triadic bloom","monochrome trance","split-complementary tension"],JI=["linear","ease-in","ease-out","ease-in-out"],Sh=["static contemplation","slow dolly-in","crane ascent","handheld tremor","steadicam drift","orbital pan"],YI={linear:"linear","ease-in":"easeIn","ease-out":"easeOut","ease-in-out":"easeInOut"},es=[{id:"scriptText",step:0,category:"Script Foundation",question:"Optional: Share your script fragment or scene description",placeholder:"Drop in a fragment if you want Dreamer to adapt pacing and continuity from the page.",type:"script",randomOptions:["He edits reels of his past while rain combs the window.","She waits in a station bathed in crimson departures.","They argue in whispers beneath the crashing surf."]},{id:"sceneCore",step:1,category:"Scene & Technical",question:"Describe your scene and choose technical specs: who, what, emotion + shots + camera + focal length",placeholder:"A man edits reels of his past in a dark room while rain falls. 5 shots, Arri Alexa 65, 35mm cinematic",type:"text",randomOptions:["A woman reading letters in candlelit attic. 3 shots, Sony Venice 2, 50mm human-eye","Two siblings argue on motel balcony. 7 shots, Red Monstro 8K, 85mm intimate"]},{id:"depthOfField",step:1,category:"Scene & Technical",question:"Set depth of field for your sequence:",type:"select",options:["f/1.4 dreamy shallow","f/2.8 cinematic shallow","f/5.6 balanced","f/11 deep focus"]},{id:"framing",step:2,category:"Visual Composition",question:"Choose composition + camera angle + character blocking in one:",placeholder:"Rule of thirds with eye-level witness. Protagonist centered in soft light, edge isolation for conflict.",type:"text",randomOptions:["Negative space with low-angle reverence. Protagonist edge isolation, background silhouettes","Golden ratio with high-angle confession. Centered protagonist, overlapping movement"]},{id:"characterChoreography",step:3,category:"Character Presence",question:"Describe all character positions and tensions in the frame:",placeholder:"Main: centered in glow of single practical. Secondary: midground silhouettes. Opposition: off-frame shadow creeping along wall.",type:"text",randomOptions:["Main: edge isolation, half in shadow. Secondary: background figures through frosted glass. Opposition: rear silhouette behind gauze curtain."]},{id:"lightingAtmosphere",step:4,category:"Lighting & Mood",question:"Lighting mood + technical setup + atmosphere:",placeholder:"Chiaroscuro contrast with 4:1 ratio and halation glow. Slow rain trembling against panes, volumetric fog.",type:"text",randomOptions:["Golden hour glow with twin practicals. Floating dust motes in projector light, tungsten haze.","Silhouette rim with underexposed edges. Moonlit reflection, fluorescent spill."]},{id:"visualStyle",step:5,category:"Film Stock & Color",question:"Film stock + texture + color grade + palette:",placeholder:"Kodak Vision3 500T 5219 with 35mm grain. Teal-orange tension. Background #1A1F2B, midtone #4A6C6F, highlight #F2C27E",type:"text",randomOptions:["Fuji Eterna with halation bloom. Noir desaturation. Background #120E1A, midtone #3B2F58, highlight #E6B4F6","Polaroid pastel dream with medium ISO texture. Golden warmth. Dominant teal shadows, warm peach highlights."]},{id:"colorHarmony",step:5,category:"Film Stock & Color",question:"Color harmony style:",type:"select",options:Pu},{id:"narrativeVoice",step:6,category:"Story Identity",question:"Poetic line + visual identity + continuity:",placeholder:"He edits by rhythm now, not reason. Cinematic, painterly, liminal. Tight continuity with mutated seeds.",type:"text",randomOptions:["Her laughter flickers against the wall like a ghost of light. Mythic surrealism, emotional realism. Poetic drift with rhythm-based motif."]},{id:"outputSettings",step:7,category:"Final Output",question:"Output format + fidelity + motion style:",placeholder:"Cinematic frame with 4K render and focus pull from background to foreground. Steadycam drift.",type:"text",randomOptions:["Storyboard with filmic softness and breathing zoom drift. Static contemplation.","AI film still with photoreal detail and razor still focus. Orbital pan."]}],Ou=[{id:"preloaded-1",name:"Story Structure & Narrative Frameworks",content:"A story structure... Generally story follow some structure, there are various way to do it and one of them is Harmon story circle 1. You A character in their zone of comfort 2. Need wants something 3. Go! so they enter an unfamiliar situation 4. Struggle to which they have to adapt 5. Find in order to get what they want 6. Suffer yet they have to make a sacrifice 7. Return before they return to their familiar situation 8. Change having changed fundamentally. The Heros journey- story structure: THE ORDINARY WORLD. THE CALL TO ADVENTURE. REFUSAL OF THE QUEST. ACCEPTING THE CALL: ENTERING THE UNKNOWN. SUPERNATURAL AID. TALISMAN: ALLIES/HELPERS. TESTS & THE SUPREME ORDEAL. REWARD AND THE JOURNEY HOME. MASTER OF TWO WORLDS/ RESTORING THE WORLD.",extractedKnowledge:{themes:["redemption","transformation","return"],visualStyles:["epic journey","cyclical narrative","three-act structure"],characters:["mentor","herald","trickster"],techniques:["inciting incident","dark night of the soul","climax","The Hero's Journey"]}},{id:"preloaded-2",name:"Advanced Character Development",content:"A compelling protagonist is defined by their journey. Past: A character's past should not be a mere footnote, but a formative influence that actively shapes their present motivations, fears, and strengths. These past experiences, whether traumatic or triumphant, should ripple through their current actions and decisions. Present: The immediate challenges a character faces are the engine of your story. These conflicts can be multifaceted: External Conflict, Internal Conflict, Interpersonal Conflict. Escalate the Stakes: The inciting incident should not be a universal event with equal impact on all. For your protagonist, the stakes must be inherently higher, more personal, and potentially devastating if they fail. Pushing Boundaries: Don't hesitate to thrust your character out of their comfort zone from the outset. Chained Reactions: Avoid easily resolvable conflicts. A truly engaging narrative thrives on a chain reaction of escalating problems. ARCHETYPES APPEARING IN THE HEROS JOURNEY: HEROES, SHADOWS, MENTORS, HERALD, THRESHOLD GUARDIANS, SHAPESHIFTERS, TRICKSTERS, ALLIES, WOMAN AS TEMPTRESS. Character arc, positive change- character might believe in a lie, goes through confrontation and then reaches acceptance. Flat character ARC- character already believe in truth, truth is tested he wins and keep the truth. Negative character arc- character might loose positive character trait, keep believing in a lie and take decision on the basis of it resulting into negative outcome. Save the Cat is a screenwriting concept where the protagonist does something early in the story to make them relatable or likable.",extractedKnowledge:{themes:["internal conflict","fatal flaw","growth vs. stagnation"],visualStyles:["character-driven scenes","subjective POV","emotional close-ups"],characters:["reformer","loyalist","challenger","hero","shadow","mentor"],techniques:["ghost/wound","active vs. passive choice","character introductions","positive arc","flat arc","negative arc","save the cat"]}},{id:"preloaded-3",name:"Cinematography & Camera Techniques",content:"Notes. Write or draw the use of lightning, sound, camera movement, aspects ratio, character movment. Framing, composition. Angle. Transition between two frame Depth of field, by crossing out ,0ut of focus stuff. 180 rule, an imaginary line between two characters drawn we are not supposed to cross the line makes it look like both characters are in same place. Cut on action, switch between full to medium shot in a single scene. Show weather, time of the day. Movement of character should give sense of what they would do... Audience should be able to anticipate.",extractedKnowledge:{themes:["power dynamics","isolation","freedom","anticipation"],visualStyles:["dolly zoom","long take","dutch angle","weather effects"],characters:[],techniques:["180-degree rule","rule of thirds","lead room","motivated character movement","cut on action","depth of field"]}},{id:"preloaded-4",name:"Professional Lighting",content:"Understanding Lighting: Shaping Mood and Form. Three-Point Lighting System: Key Light, Fill Light, Backlight (Rim/Separation Light), Kicker Light, Motivated Lighting. Lighting Techniques & Styles: Rembrandt Lighting, Loop Lighting, Split Lighting, Butterfly (Paramount) Lighting, Clamshell Lighting, Silhouette Lighting, Low-Key Lighting, High-Key Lighting. Light Softness & Distance: Larger light source = Softer shadows. Smaller light source = Harsher shadows. Closer light = Softer shadows. Farther light = Harsher shadows. Modifiers to Soften Light: Softbox, Umbrella, Bounce (Reflector), Diffusion Gel or Scrim. Additional Cinematic Rules: Shoot from the Dark Side. Broad vs. Short Lighting.",extractedKnowledge:{themes:["mystery","spirituality","interrogation","beauty","glamour"],visualStyles:["chiaroscuro","high-key","low-key","silhouette","soft light","hard light"],characters:["femme fatale","hardboiled detective"],techniques:["three-point lighting","motivated lighting","practical lights","Butterfly lighting","Clamshell lighting","Rembrandt Lighting","Loop Lighting","Split Lighting","Short vs Broad lighting","light modifiers (softbox, umbrella)"]}},{id:"preloaded-5",name:"Dialogue & Subtext",content:`The Art of Scene Writing: Subtext and Transformation. A well-crafted scene is more than just dialogue and action. Subtext: Inject subtext into your scenes. Hint at deeper meanings, unspoken emotions, or underlying tensions without explicitly stating them. A subtle gesture, a loaded silence, or an object's placement can speak volumes. Scene Arc: Every scene should have a mini-arc, transforming the character or the situation. Initial Goal, Initial Action, Obstacle/Reaction, Transformation/New Correlation. Driving Questions: "Who wants what from whom?", "What happens if they don't get it?", "Why now?". Subtext is the unsaidwhats felt, implied, or hinted at but never directly spoken. It turns simple dialogue into rich, multi-layered interactions. Enter Late, Exit Early: A storytelling principle used to keep scenes tight and impactful.`,extractedKnowledge:{themes:["deception","unspoken truth","power struggle"],visualStyles:["over-the-shoulder shots","reaction shots","two-shots"],characters:[],techniques:["subtext","exposition as ammunition","pacing and rhythm","scene arc","enter late, exit early"]}},{id:"preloaded-6",name:"Conflict & Stakes",content:'The real unity of opposites is one in which compromise is impossible." - to write conflict dialogue becomes powerful when characters have hidden agendas. The Unity of Opposites is the theory that great conflict comes from characters with opposing needs, values, or goals, who are locked together in a situation where neither can back down or walk away. Inciting incidents, story generation methods, logline structure. Frame of movie writing process: LOGLINE, SYNOPSIS, PLOT DEVELOPMENT.',extractedKnowledge:{themes:["man vs. self","man vs. society","man vs. nature"],visualStyles:["rising tension","montage sequences","cross-cutting"],characters:["antagonist","protagonist"],techniques:["ticking clock","raising the stakes","reversal of fortune","unity of opposites","logline","synopsis"]}},{id:"preloaded-7",name:"Opening Scene Hooks",content:"Opening scene- flashback, flash forward, mid-story (in media res), newsreel, the setting, crime, direct addressing, tragedy, a day in life. These can even be called hooks Establishing shot: wide shots that are shows in the starts of scene. Another hook, could be a tripod shot (static) or a chasing sequence.",extractedKnowledge:{themes:["memory","destiny","chaos","exposition","atmosphere","justice","intimacy","loss","normalcy"],visualStyles:["non-linear","in media res","documentary","world-building","noir","fourth-wall break","dramatic"],characters:[],techniques:["flashback","flash-forward","cold open","montage","establishing shot","direct address"]}},{id:"preloaded-8",name:"Advanced Screenwriting Principles",content:"Screenplay convention: Keep it visual and in present tense. Write V.O for voice over, add cut to or back to for scene change. Montage start and montage end. Dialogues in the centre. Linear vs Non-Linear Storylines. Exposition: The method of conveying backstory or world-building. Good exposition feels natural and is integrated into the story. Techniques include: Dialogues, Photographs/Documents, Flashbacks, Environment/Props.",extractedKnowledge:{themes:["hidden meaning","efficiency","narrative structure","backstory"],visualStyles:["layered performance","tight pacing","chronological vs fragmented","naturalistic reveals"],characters:[],techniques:["subtextual dialogue","scene transitions","non-linear storytelling","show don't tell","V.O.","montage formatting"]}},{id:"preloaded-9",name:"Narrative Development & Visual Execution",content:`This guide explores key elements of narrative development and visual execution, offering insights for screenwriters, directors, and storytellers alike. Character Development: Past, Present, and Conflict. A compelling protagonist is defined by their journey. Their past should actively shape their present motivations, fears, and strengths. The immediate challenges a character faces are the engine of your story, including external, internal, and interpersonal conflicts. Escalate the stakes to be personal and devastating for the protagonist. Push characters out of their comfort zone from the outset. A truly engaging narrative thrives on a chain reaction of escalating problems. The Art of Scene Writing: Subtext and Transformation. Inject subtext into your scenes, hinting at deeper meanings without explicitly stating them. Every scene should have a mini-arc that transforms the character or the situation. Structure a powerful scene by asking: "Who wants what from whom?", "What happens if they don't get it?", and "Why now?". Storyboarding: Visualizing the Narrative. Storyboarding is the visual blueprint, detailing lighting, sound, camera movement, aspect ratio, character movement, framing, composition, angle, transition between frames, and depth of field. Screenplay Conventions: Adhere to standard conventions for clarity and professionalism. Describe what can be seen and heard in the present tense. Use standard formatting for Voice Over (V.O.), scene transitions ("CUT TO:"), and montages. Story Structure: Harmon Story Circle. A simplified variation of the "Hero's Journey": 1. You (Comfort Zone), 2. Need (Desire), 3. Go! (Unfamiliar Situation), 4. Struggle (Adaptation), 5. Find (Achievement), 6. Suffer (Sacrifice), 7. Return (Familiar Situation), 8. Change (Transformation).`,extractedKnowledge:{themes:["Conflict","Transformation","Sacrifice","Personal Stakes","Duality","Introspection","Mystery"],visualStyles:["Chiaroscuro","High Contrast","Motivated Lighting","Visual Blueprinting","Dynamic Composition"],characters:["Protagonist","Antagonist"],techniques:["Subtext","Scene Arc","Inciting Incident","Escalating Stakes","Three-Point Lighting","Key Light","Fill Light","Backlight","Kicker Light","Rembrandt Lighting","Loop Lighting","Split Lighting","Depth of Field","Screenplay Formatting (V.O., Montage)","Harmon Story Circle"]}},{id:"preloaded-10",name:"Advanced Character, World & Story Dynamics",content:`Deep character psychology including conscious/unconscious forces (people, institutions vs. myths, culture, memory). Core external conflict of the world. Thematic Suture (Unity of Opposites): a core theme confronted through two opposing values, with an antagonist who mirrors or distorts the protagonist. Dialogue & Contrast: a character's first line reflects their false belief; subvert stereotypes and reveal core contradictions. Plot & Arc (From Fracture to Catharsis): an external conflict drives the plot while an internal contradiction drives the character, from an inciting crisis through a midpoint twist to a final transformation or failure. Relatability & Transcendence: find the ordinary/human in a character to make their life feel mythic, creating an audience bond. Symbolic Objects & Motivated Cuts: use objects to represent inner truths and motivate visual cuts (match cut, smash cut). Enneagram x Want/Need x Power Dynamics grid for character reactions. 3 KEYFRAME STORY SEED STRUCTURE: a 7-step process from setup to final expression. CHARACTERWORLD DYNAMIC GRID: maps conscious/unconscious characters pursuing need/want against a supporting/opposing world. Character Internal States: Outer Mask, Private Self, Core Wound/Truth. Social Reaction Shifts: "We are who we think they think we are."`,extractedKnowledge:{themes:["Duality (Conscious/Unconscious)","Conflict (Internal/External)","Transformation","Subversion","Power Dynamics","Want vs. Need","Fate vs. Choice","Relatability","Transcendence","Audience Connection"],visualStyles:["Symbolic Motifs","Motivated Cuts (Match, Smash, Echo)","Visual Echoes","Character-centric Framing","Thematic Color Palettes"],characters:["Enneagram Archetypes","Characters defined by internal states (Mask, Private Self, Core Wound)","Antagonists as Mirrors","Subverted Stereotypes","Characters with hidden agendas"],techniques:["Enneagram Story Arcs","Keyframe Story Structure","Character-World Dynamic Grid","Unity of Opposites","Inciting Crisis","Midpoint Twist","Symbolic Objects","First Line Character Reveal","Contradictory Behavior","Fracture to Catharsis Arc","Want/Need Grid","Social Mirror (Character Shifts)"]}},{id:"preloaded-11",name:"Advanced Story & Narrative Theory",content:`The Hero's Journey story structure (THE ORDINARY WORLD, THE CALL TO ADVENTURE, REFUSAL, ENTERING THE UNKNOWN, SUPERNATURAL AID, ALLIES, TESTS & THE SUPREME ORDEAL, REWARD, THE JOURNEY HOME, MASTER OF TWO WORLDS). Classic character archetypes (HEROES, SHADOWS, MENTORS, HERALD, THRESHOLD GUARDIANS, SHAPESHIFTERS, TRICKSTERS, ALLIES). Various character arcs (positive change, flat, negative). Techniques for story generation ("What If", dreams, forced connections, personal experience). Professional screenplay formatting for LOGLINE and SYNOPSIS.`,extractedKnowledge:{themes:["The Call to Adventure","Transformation","Moral Choice","Growth","Stagnation","Corruption"],visualStyles:["Epic Journey","Mythic Structure","Character-driven Pacing"],characters:["Hero","Shadow","Mentor","Herald","Threshold Guardian","Shapeshifter","Trickster","Ally"],techniques:["The Hero's Journey","Positive Change Arc","Flat Character Arc","Negative Character Arc","Logline","Synopsis","Save the Cat","What If Scenarios"]}},{id:"preloaded-12",name:"Advanced Cinematic Techniques",content:`Advanced camera movements (Slow Push-In for tension/intimacy, Creep-Out for isolation, The Moment for emotional peaks). Paranoid framing (wide frame, distant subject, slow zooms). Distraction techniques to mislead audience focus. Walter Murch's 'In the Blink of an Eye' editing theory: editing is emotional, not just technical. The "Rule of Six" for a good cut: 1. Emotion (51%), 2. Story (23%), 3. Rhythm (10%), 4. Eye-trace (7%), 5. 2D Plane (5%), 6. 3D Space (4%). Great editing is invisible. Fundamental principles of exposure and camera settings (Aperture, Shutter Speed, ISO).`,extractedKnowledge:{themes:["Tension","Intimacy","Isolation","Paranoia","Powerlessness","Emotional Continuity"],visualStyles:["Invisible Editing","Rhythmic Cutting","Paranoid Thriller","Subjective Camera"],characters:[],techniques:["Slow Push-In","Creep-Out","The Moment (Emotional Peak)","Distraction (Misdirection)","Paranoid Zoom","Walter Murch's Rule of Six","Exposure Triangle (Aperture, Shutter, ISO)","Cut on Action"]}},{id:"preloaded-13",name:"2025 Cinematic Trends & Technology",content:"AI-Assisted Filmmaking: Integration of artificial intelligence in pre-production planning, script analysis, and visual effects. AI tools are now commonly used for storyboarding, concept art generation, and post-production efficiency. Virtual Production: Real-time rendering with LED walls has revolutionized location shooting. Programs like Unreal Engine enable filmmakers to create photorealistic environments that react to camera movement. Sustainable Filmmaking: Environmental consciousness drives new production techniques - LED lighting for reduced carbon footprint, virtual locations to minimize travel, and eco-friendly post-production workflows. Higher Frame Rates: Movies are embracing 48fps, 60fps, and even 120fps for enhanced immersion, particularly in action and immersive content. Light Field Cameras: Capture entire light fields for post-production flexibility, allowing focus changes, perspective shifts, and depth manipulation after filming. Immersive Audio: Dolby Atmos and spatial audio are standard, creating 360-degree soundscapes that enhance storytelling. Micro-Budget Mastery: Professional-quality content can now be created with smartphone cameras and consumer-grade equipment, democratizing high-end cinematography techniques. Interactive Storytelling: Films are beginning to incorporate interactive elements, allowing audiences to influence narrative direction through smart TV interfaces and streaming platforms.",extractedKnowledge:{themes:["Innovation","Accessibility","Sustainability","Immersion","Technology Integration"],visualStyles:["Real-time rendering","Virtual environments","High frame rate smoothness","LED wall photography","AI-enhanced post-production"],characters:["Tech-savvy director","AI-assisted creator","Sustainable filmmaker"],techniques:["AI storyboarding","Virtual production","LED wall lighting","Real-time rendering","Light field capture","Spatial audio mixing","Micro-budget optimization","Interactive narrative"]}},{id:"preloaded-14",name:"2025 Storytelling & Genre Evolution",content:"Diverse Storytelling: Films now embrace multiple perspectives and non-linear narratives more readily. Stories often weave between different cultural viewpoints and time periods. Character-Driven Narratives: Audiences connect more deeply with character development than plot complexity. Multi-protagonist stories and ensemble casts are increasingly popular. Genre Fluidity: Traditional genre boundaries have blurred - horror-comedies, sci-fi dramas, action-mysteries are commonplace. Films borrow techniques from multiple genres to create unique experiences. Climate Fiction: Environmental themes are woven into various genres, from apocalyptic thrillers to romantic dramas with eco-consciousness. Mental Health Representation: Films increasingly depict psychological realities with accuracy and sensitivity, moving beyond stereotypical portrayals. Global Storytelling: International co-productions bring diverse cultural perspectives to mainstream cinema. Subtitles are more accepted, and dubbing quality has improved significantly. Accessibility-First Design: Filmmakers now consider hearing impaired, visually impaired, and neurodivergent audiences from the beginning of production, not as an afterthought. Serialized Feature Films: Limited series formats allow for deeper character development while maintaining theatrical-quality cinematography and production values.",extractedKnowledge:{themes:["Diversity","Cultural Integration","Mental Health Awareness","Environmental Consciousness","Accessibility"],visualStyles:["Multi-perspective framing","Non-linear editing","Cultural fusion aesthetics","Climate-conscious visuals","Inclusive design"],characters:["Diverse protagonists","Cultural bridges","Environmentally conscious characters","Neurodivergent representation"],techniques:["Multi-protagonist structure","Cultural sensitivity","Climate-conscious production","Accessibility integration","Serialized storytelling","Genre fusion"]}},{id:"preloaded-15",name:"2025 Production & Post-Production Innovation",content:"Cloud-Based Collaboration: Entire films can be shot, edited, and graded remotely using cloud services. Teams across continents collaborate in real-time on the same project. AI-Powered Color Grading: Machine learning algorithms can automatically grade footage based on reference images or director preferences, while maintaining creative control. Real-Time VFX: Visual effects are added and refined during shooting, allowing directors to see final results immediately. This reduces post-production time and costs significantly. Smart Lighting Systems: Automated lighting setups that adjust based on scene requirements, time of day, and weather conditions, creating consistent looks across different shooting days. Advanced Drone Cinematography: Miniaturized cameras and AI-guided flight paths enable complex aerial shots that were previously impossible or extremely expensive. Voice-Controlled Editing: Editors can now use voice commands to perform complex editing tasks, speeding up the workflow dramatically. Predictive Analytics: AI analyzes audience engagement patterns to predict which cuts, pacing, and visual elements will be most effective. Blockchain Rights Management: Smart contracts automatically manage music licensing, actor royalties, and distribution rights, reducing legal complexities. Mobile-First Post-Production: High-quality editing, color grading, and sound mixing can be performed entirely on mobile devices with cloud computing power.",extractedKnowledge:{themes:["Efficiency","Automation","Collaboration","Cost Reduction","Quality Enhancement"],visualStyles:["AI-enhanced grading","Real-time compositing","Automated lighting","Mobile-optimized workflows"],characters:["Remote collaborators","AI-assisted editors","Mobile filmmakers"],techniques:["Cloud collaboration","AI color grading","Real-time VFX","Voice-controlled editing","Predictive analytics","Blockchain rights","Mobile post-production","Smart lighting"]}}];class WI{constructor(e={}){this.config={level:this.getEnvironmentLogLevel(),enableColors:this.shouldEnableColors(),enableTimestamp:!0,enableStackTrace:!1,...e}}getEnvironmentLogLevel(){if(typeof window>"u")return 0;const n=new URLSearchParams(window.location.search).get("debug"),s=localStorage.getItem("dreamer_log_level");if(n==="true"||s==="debug")return 3;const o=window.location.hostname;return o==="localhost"||o==="127.0.0.1"?3:1}shouldEnableColors(){return typeof window<"u"&&window.location.hostname==="localhost"}formatMessage(e,n,...s){const o=this.config.enableTimestamp?`[${new Date().toISOString()}]`:"",l=this.getLevelPrefix(e),d=`${this.config.enableColors?`${o}${this.getColor(e,l)}`:`${o}${l}`} ${n}`;return s.length>0?`${d} ${JSON.stringify(s,null,2)}`:d}getLevelPrefix(e){switch(e){case 0:return" ERROR";case 1:return"  WARN";case 2:return"  INFO";case 3:return" DEBUG";default:return"LOG"}}getColor(e,n){return`${{0:"\x1B[31m",1:"\x1B[33m",2:"\x1B[36m",3:"\x1B[90m"}[e]||""}${n}\x1B[0m`}shouldLog(e){return e<=this.config.level}error(e,...n){this.shouldLog(0)&&console.error(this.formatMessage(0,e),...n)}warn(e,...n){this.shouldLog(1)&&console.warn(this.formatMessage(1,e),...n)}info(e,...n){this.shouldLog(2)&&console.info(this.formatMessage(2,e),...n)}debug(e,...n){this.shouldLog(3)&&console.log(this.formatMessage(3,e),...n)}service(e){return{error:(n,...s)=>this.error(`[${e}] ${n}`,...s),warn:(n,...s)=>this.warn(`[${e}] ${n}`,...s),info:(n,...s)=>this.info(`[${e}] ${n}`,...s),debug:(n,...s)=>this.debug(`[${e}] ${n}`,...s)}}time(e){this.shouldLog(3)&&console.time(e)}timeEnd(e){this.shouldLog(3)&&console.timeEnd(e)}group(e){this.shouldLog(3)&&console.group(e)}groupEnd(){this.shouldLog(3)&&console.groupEnd()}}const js=new WI,{error:K4,warn:J4,info:Y4,debug:W4}=js,we=js.service("App"),XI=js.service("GeminiService");js.service("ImageGeneration");js.service("CastingAssistant");js.service("SupabaseService");js.service("HuggingFaceService");function Th(t,e,n,s){return{code:t,message:e,originalError:n,context:s,isRetryable:Ft.ERROR_CODES.RATE_LIMITED===t||Ft.ERROR_CODES.TIMEOUT===t}}function iw(t){const e=t instanceof Error?t.message:String(t),n=t instanceof Error&&t.stack||"";return`${e}
${n}`.replace(/AIza[0-9A-Za-z\-_]{35}/g,"[API_KEY]").replace(/api[_-]?key["']?\s*[:=]\s*["']?([0-9A-Za-z\-_]{32,})/gi,"api_key: [REDACTED]").replace(/authorization["']?\s*[:=]\s*["']?Bearer\s+[0-9A-Za-z\-_.]+/gi,"Authorization: Bearer [REDACTED]").replace(/\b[0-9A-Za-z\-_]{40,}\b/g,"[REDACTED_TOKEN]").replace(/process\.env\.[A-Z_]+/g,"[ENV_VAR]").split(`
`)[0]}function qn(t,e={}){const{showUserMessage:n=!0,logToConsole:s=!0,retryable:o=!1,context:l="Unknown Context"}=e,u=Th(Ft.ERROR_CODES.NETWORK_FAILED,Ft.GENERIC_ERROR,t,l);if(t instanceof TypeError?(u.code=Ft.ERROR_CODES.VALIDATION_FAILED,u.message=Ft.VALIDATION_ERROR):t instanceof DOMException&&t.name==="AbortError"?(u.code=Ft.ERROR_CODES.TIMEOUT,u.message=Ft.TIMEOUT_ERROR,u.isRetryable=!0):t instanceof RangeError&&(u.code=Ft.ERROR_CODES.VALIDATION_FAILED,u.message=Ft.VALIDATION_ERROR),o&&(u.isRetryable=!0),s){const d=iw(t);u.code===Ft.ERROR_CODES.VALIDATION_FAILED?we.warn(`[${l}] ${u.message}`,d):we.error(`[${l}] ${u.message}`,d)}return n&&QI(u),u}function QI(t){t.code===Ft.ERROR_CODES.VALIDATION_FAILED?console.warn(`Validation Error: ${t.message}`):alert(t.message)}function an(t,e){const n=qn(t,{showUserMessage:!0,retryable:!0,context:`AI Service: ${e}`});return n.code=Ft.ERROR_CODES.GENERATION_FAILED,n.message=Ft.AI_SERVICE_ERROR,n}function yb(t,e,n){return t.size>e?Th(Ft.ERROR_CODES.FILE_TOO_LARGE,`File "${t.name}" exceeds the maximum size of ${Math.round(e/1024/1024)}MB`,void 0,"File Validation"):n.some(s=>t.type.includes(s)||t.name.toLowerCase().endsWith(s))?null:Th(Ft.ERROR_CODES.UNSUPPORTED_FILE_TYPE,`File "${t.name}" has an unsupported file type. Allowed types: ${n.join(", ")}`,void 0,"File Validation")}const Zn=[{id:"script",step:0,title:"Script & Core",icon:rs,description:"Scene foundation",color:"bg-blue-500"},{id:"technical",step:2,title:"Technical Setup",icon:eI,description:"Camera & shots",color:"bg-purple-500"},{id:"framing",step:3,title:"Framing",icon:Du,description:"Visual psychology",color:"bg-green-500"},{id:"characters",step:4,title:"Characters",icon:BI,description:"Character blocking",color:"bg-orange-500"},{id:"lighting",step:5,title:"Lighting",icon:Da,description:"Atmosphere",color:"bg-yellow-500"},{id:"color",step:6,title:"Color & Film",icon:Du,description:"Visual style",color:"bg-pink-500"},{id:"voice",step:7,title:"Story Voice",icon:GI,description:"Poetic narrative",color:"bg-indigo-500"},{id:"output",step:8,title:"Output",icon:Cm,description:"Final settings",color:"bg-emerald-500"}],ZI=({currentStep:t,totalSteps:e,promptData:n,questions:s})=>{var d,h;const o=f=>{const y=s.filter(T=>{var w;return T.step>=f.step&&T.step<(((w=Zn[Zn.indexOf(f)+1])==null?void 0:w.step)||e)});return y.length===0?0:y.filter(T=>{const w=n[T.id];return w&&(Array.isArray(w)?w.length>0:w.toString().trim().length>0)}).length/y.length*100},u=(()=>{const f=s.length;return s.filter(b=>{const T=n[b.id];return T&&(Array.isArray(T)?T.length>0:T.toString().trim().length>0)}).length/f*100})();return S.jsxs("div",{className:"mb-8 p-4 bg-gray-900/50 rounded-lg border border-gray-800",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[S.jsx(rs,{className:"w-5 h-5 text-amber-500"}),S.jsx("span",{children:"Project Progress"})]}),S.jsxs("div",{className:"text-sm text-gray-400",children:[Math.round(u),"% Complete"]})]}),S.jsx("div",{className:"mb-6",children:S.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2",children:S.jsx(se.div,{className:"bg-gradient-to-r from-amber-500 to-orange-600 h-2 rounded-full",initial:{width:0},animate:{width:`${u}%`},transition:{duration:.8,ease:"easeOut"}})})}),S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Zn.map((f,y)=>{var C;const b=o(f),T=b>=100,w=t>=f.step&&t<(((C=Zn[y+1])==null?void 0:C.step)||e);t>f.step;const E=f.icon;return S.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},className:`relative p-3 rounded-lg border transition-all ${w?"bg-gray-800 border-amber-500 shadow-lg shadow-amber-500/20":T?"bg-gray-800/50 border-green-500/50":"bg-gray-800/30 border-gray-700"}`,children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[S.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${T?"bg-green-500":w?f.color:"bg-gray-700"}`,children:T?S.jsx(Cm,{className:"w-4 h-4 text-white"}):S.jsx(E,{className:`w-4 h-4 ${w?"text-white":"text-gray-400"}`})}),S.jsxs("div",{className:`text-xs font-medium ${w?"text-amber-400":T?"text-green-400":"text-gray-400"}`,children:[Math.round(b),"%"]})]}),S.jsx("div",{className:"text-sm font-medium text-white mb-1",children:f.title}),S.jsx("div",{className:"text-xs text-gray-500",children:f.description}),S.jsx("div",{className:"mt-2 w-full bg-gray-700 rounded-full h-1",children:S.jsx(se.div,{className:`h-1 rounded-full ${T?"bg-green-500":"bg-gray-600"}`,initial:{width:0},animate:{width:`${b}%`},transition:{duration:.6,delay:y*.1}})}),w&&S.jsx(se.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-500 rounded-full border-2 border-gray-900",children:S.jsx("div",{className:"w-full h-full bg-amber-400 rounded-full animate-pulse"})})]},f.id)})}),S.jsx("div",{className:"mt-4 p-3 bg-gray-800/50 rounded-lg",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"text-sm font-medium text-white",children:["Current: ",((d=Zn.find(f=>{var y;return t>=f.step&&t<(((y=Zn[Zn.indexOf(f)+1])==null?void 0:y.step)||e)}))==null?void 0:d.title)||"Final Setup"]}),S.jsxs("div",{className:"text-xs text-gray-400",children:["Step ",t+1," of ",e]})]}),S.jsx("div",{className:"text-right",children:S.jsx("div",{className:"text-sm text-amber-400",children:((h=Zn.find(f=>{var y;return t>=f.step&&t<(((y=Zn[Zn.indexOf(f)+1])==null?void 0:y.step)||e)}))==null?void 0:h.description)||"Final configuration"})})]})})]})},eD="modulepreload",tD=function(t){return"/"+t},vb={},Fs=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let u=function(f){return Promise.all(f.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=u(n.map(f=>{if(f=tD(f),f in vb)return;vb[f]=!0;const y=f.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${b}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":eD,y||(T.as="script"),T.crossOrigin="",T.href=f,h&&T.setAttribute("nonce",h),document.head.appendChild(T),y)return new Promise((w,E)=>{T.addEventListener("load",w),T.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};let Yr=null;const nD=async()=>{if(!Yr)try{Yr=await Fs(()=>import("./transformers.web-D4QUfNNm.js"),[])}catch{return console.warn("HuggingFace Transformers.js not available. Using fallback implementations."),null}return Yr},bb=t=>{const e=t.toLowerCase().split(/\s+/),n=[],s=e.some(o=>["love","beautiful","wonderful","amazing","perfect","brilliant"].includes(o))?"positive":e.some(o=>["hate","terrible","awful","horrible","disappointing","bad"].includes(o))?"negative":"neutral";return e.filter(o=>o.length>4&&!["there","where","which","would","could","should"].includes(o)).slice(0,5).forEach(o=>n.push(o)),{sentiment:s,keywords:n}},iD=t=>{const e=t.split(/[.!?]+/).filter(s=>s.trim().length>20);return e.length<=2?t:(e.length===3?e.slice(0,2):[e[0],e[e.length-1]]).join(". ").trim()+"."};class zr{constructor(){this.textClassifier=null,this.textSummarizer=null,this.isInitialized=!1}static getInstance(){return zr.instance||(zr.instance=new zr),zr.instance}async initialize(){if(!this.isInitialized)try{const e=await nD();if(!e){console.info("Using fallback implementations for HuggingFace service"),this.isInitialized=!0;return}try{this.textClassifier=await e.pipeline("sentiment-analysis","Xenova/distilbert-base-uncased-finetuned-sst-2-english"),this.textSummarizer=await e.pipeline("summarization","Xenova/distilbart-cnn-6-6"),console.log("HuggingFace models initialized successfully")}catch(n){console.warn("Failed to load specific models, using fallbacks:",n)}this.isInitialized=!0}catch(e){console.warn("HuggingFace initialization failed, using fallback implementations:",e),this.isInitialized=!0}}async analyzeSentiment(e){try{if(this.textClassifier&&Yr)return(await this.textClassifier(e))[0].label==="POSITIVE"?"positive":"negative"}catch(n){console.warn("Sentiment analysis failed, using fallback:",n)}return bb(e).sentiment||"neutral"}async extractKeywords(e,n=10){try{if(this.textClassifier&&Yr){const s=e.toLowerCase().split(/\s+/),o=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","should","could"]);return s.filter(u=>u.length>3&&!o.has(u)).slice(0,n)}}catch(s){console.warn("Keyword extraction failed, using fallback:",s)}return bb(e).keywords||[]}async summarizeText(e,n=150){try{if(this.textSummarizer&&Yr)return(await this.textSummarizer(e,{max_length:n,min_length:30}))[0].summary_text}catch(s){console.warn("Text summarization failed, using fallback:",s)}return iD(e)}async analyzeNarrative(e){try{const n=await this.analyzeSentiment(e),s=await this.extractKeywords(e,8);let o="drama";const l=[],u=[],d=e.toLowerCase();return d.includes("fight")||d.includes("battle")||d.includes("action")?(o="action",l.push("dynamic movement","intense lighting")):d.includes("love")||d.includes("romance")||d.includes("relationship")?(o="romance",l.push("soft lighting","close-up shots")):d.includes("fear")||d.includes("dark")||d.includes("scary")?(o="horror",l.push("shadow play","low-key lighting")):(d.includes("laugh")||d.includes("funny")||d.includes("comedy"))&&(o="comedy",l.push("bright colors","wide shots")),(d.includes("character")||d.includes("person"))&&u.push("character development"),(d.includes("scene")||d.includes("location"))&&u.push("setting"),(d.includes("conflict")||d.includes("problem"))&&u.push("conflict"),(d.includes("emotion")||d.includes("feel"))&&u.push("emotional arc"),{emotionalTone:n,narrativeElements:u.length>0?u:["storytelling"],visualCues:l.length>0?l:["composition","lighting"],genre:o}}catch(n){return console.error("Narrative analysis failed:",n),{emotionalTone:"neutral",narrativeElements:["storytelling"],visualCues:["composition","lighting"],genre:"drama"}}}async enhancePrompt(e,n){try{const s=await this.analyzeNarrative(e+" "+n);let o=e;return s.emotionalTone==="negative"?o+=" with darker undertones":s.emotionalTone==="positive"&&(o+=" with uplifting elements"),s.visualCues.length>0&&(o+=", featuring "+s.visualCues.join(", ")),o}catch(s){return console.error("Prompt enhancement failed:",s),e}}async getContentSuggestions(e,n="scene"){try{const s=await this.analyzeNarrative(e),o=[];return n==="character"&&s.narrativeElements.includes("character development")&&o.push("Focus on character motivation","Explore internal conflict","Develop character arc"),n==="scene"&&s.narrativeElements.includes("setting")&&o.push("Enhance environmental details","Use setting to reflect mood","Create atmospheric depth"),n==="visual"&&o.push(`Apply ${s.genre} visual style`,"Consider lighting mood","Think about camera movement"),o.length>0?o:["Focus on storytelling","Enhance visual elements","Consider pacing"]}catch(s){return console.error("Content suggestions failed:",s),["Focus on storytelling","Enhance visual elements","Consider pacing"]}}async generateSuggestions(e,n){try{const s=await this.analyzeNarrative(e),o=[];switch(n){case"protagonist":o.push("Consider their background and formative experiences"),o.push("Think about what makes them unique"),o.push("Explore their internal contradictions"),s.narrativeElements.includes("character development")&&o.push("Focus on their character arc potential");break;case"coreWant":o.push("Make it urgent and specific"),o.push("Connect it to their deeper needs"),o.push("Consider what they think they want vs what they need"),s.genre==="romance"&&o.push("Think about love as both want and need");break;case"centralConflict":o.push("Make the opposition personal"),o.push("Ensure compromise is impossible"),o.push("Create moral complexity"),s.visualCues.includes("intense lighting")&&o.push("Consider external obstacles that mirror internal ones");break;case"setting":o.push("Let the setting reflect the theme"),o.push("Use location to create conflict"),o.push("Consider how time period affects the story");break;case"emotionalTone":o.push("Balance contrasts for depth"),o.push("Consider the audience's emotional journey"),o.push("Use mood to support the story"),s.genre==="horror"&&o.push("Build tension through atmosphere");break;case"stakes":o.push("Make failure personally devastating"),o.push("Consider both external and internal consequences"),o.push("Make the cost of inaction clear");break;case"turningPoint":o.push("Change everything the character believes"),o.push("Force an impossible choice"),o.push("Create irreversible consequences");break;default:o.push("Focus on clarity and specificity"),o.push("Consider the story's central theme"),o.push("Think about visual storytelling opportunities")}return o}catch(s){return console.error("Suggestion generation failed:",s),["Focus on clear storytelling","Consider character motivation","Think about visual elements"]}}isReady(){return this.isInitialized}cleanup(){this.textClassifier=null,this.textSummarizer=null,this.isInitialized=!1}}const ei=zr.getInstance();class $r{constructor(){this.genrePatterns={thriller:{keywords:["suspense","danger","mystery","threat","chase","escape","stalker","investigation","conspiracy","secret"],visualStyle:["Dutch angles","close-ups","tight framing","shadows","high contrast"],lighting:["low-key lighting","dramatic shadows","harsh lighting","mysterious darkness"],cameraMovement:["handheld","quick cuts","slow zoom","rack focus"],colorPalette:["desaturated blues","cool tones","high contrast","monochrome"],narrativeElements:["tension building","red herrings","cliffhangers","psychological"]},horror:{keywords:["fear","dark","scary","monster","death","blood","nightmare","ghost","demon","creepy"],visualStyle:["extreme close-ups","low angle shots","POV shots","Dutch angles"],lighting:["chiaroscuro","extreme shadows","single light source","flickering"],cameraMovement:["static contemplation","slow creep","sudden movement","handheld tremor"],colorPalette:["deep reds","sickly greens","blacks and whites","pale blues"],narrativeElements:["build-up","sudden scares","psychological tension","supernatural"]},action:{keywords:["fight","battle","chase","explosion","gun","karate","mission","explosive","fast","intense"],visualStyle:["wide shots","dynamic angles","fast cuts","close combat"],lighting:["high-key lighting","natural daylight","explosive lighting"],cameraMovement:["orbital pan","crane ascent","handheld tremor","tracking"],colorPalette:["vibrant colors","high saturation","bold contrasts"],narrativeElements:["physical conflict","time pressure","heroic moments","chase sequences"]},romance:{keywords:["love","kiss","heart","romantic","relationship","wedding","date","couple","intimate","tender"],visualStyle:["soft focus","romantic framing","close-ups","two-shots"],lighting:["soft volumetric prayer","golden hour glow","warm tungsten"],cameraMovement:["slow dolly-in","steadicam drift","static contemplation"],colorPalette:["warm pinks","golden yellows","soft pastels","romantic tones"],narrativeElements:["emotional connection","intimate moments","relationship development","romantic tension"]},drama:{keywords:["character","emotion","life","family","struggle","conflict","human","personal","story","life"],visualStyle:["natural framing","medium shots","realistic angles"],lighting:["natural lighting","three-point lighting","motivated lighting"],cameraMovement:["eye-level witness","minimal movement","character-focused"],colorPalette:["natural colors","muted tones","realistic palette"],narrativeElements:["character development","emotional depth","relatable situations","human conflict"]},scifi:{keywords:["future","technology","space","alien","robot","cyber","digital","futuristic","science","experiment"],visualStyle:["wide futuristic shots"," technological elements","sterile environments"],lighting:["neon fever dream","blue lighting","artificial light sources"],cameraMovement:["smooth tracking","floating movement","mechanical precision"],colorPalette:["neon blues","electric purples","metallic silvers","futuristic colors"],narrativeElements:["speculative concepts","technology integration","future implications","scientific advancement"]},noir:{keywords:["crime","detective","murder","shadow","dark","mystery","investigation","criminal","police","corrupt"],visualStyle:["low angle shots","high contrast","shadow play","dramatic angles"],lighting:["chiaroscuro contrast","silhouette lighting","single practical"],cameraMovement:["static contemplation","slow movement","contemplative"],colorPalette:["high contrast blacks and whites","deep shadows","dramatic lighting"],narrativeElements:["moral ambiguity","crime investigation","character flaws","atmospheric tension"]},comedy:{keywords:["funny","laugh","humor","comic","silly","joke","amusing","hilarious","entertaining","light"],visualStyle:["wide shots","exaggerated framing","playful angles"],lighting:["bright lighting","high-key","cheerful atmosphere"],cameraMovement:["dynamic movement","quick cuts","playful"],colorPalette:["bright colors","warm tones","vibrant palette"],narrativeElements:["timing","physical comedy","character quirks","situational humor"]}}}static getInstance(){return $r.instance||($r.instance=new $r),$r.instance}async detectGenre(e,n={}){const s=`${e} ${Object.values(n).join(" ")}`.toLowerCase(),o={};Object.entries(this.genrePatterns).forEach(([T,w])=>{let E=0;w.keywords.forEach(A=>{const R=(s.match(new RegExp(A,"g"))||[]).length;E+=R*2}),Object.values(n).join(" ").toLowerCase().includes(T)&&(E+=5),o[T]=E});const l=Object.entries(o).reduce((T,w)=>o[T[0]]>o[w[0]]?T:w),[u,d]=l,h=Math.min(d/10,1),f=this.genrePatterns[u],y=this.generateGenreSuggestions(u,f,n),b=Object.entries(o).sort(([,T],[,w])=>w-T).slice(1,3).map(([T])=>T);return{genre:u,confidence:h,subgenres:b,characteristics:{visualStyle:f.visualStyle,lighting:f.lighting,cameraMovement:f.cameraMovement,colorPalette:f.colorPalette,narrativeElements:f.narrativeElements},suggestions:y}}generateGenreSuggestions(e,n,s){const o={camera:[],lighting:[],color:[],narrative:[]};switch(o.camera=n.cameraMovement.slice(0,2),o.lighting=n.lighting.slice(0,2),o.color=n.colorPalette.slice(0,2),o.narrative=n.narrativeElements.slice(0,2),e){case"thriller":o.camera.push("tight close-ups for psychological intensity"),o.lighting.push("dramatic shadows to create suspense");break;case"horror":o.camera.push("low angles to create unease"),o.lighting.push("extreme chiaroscuro for fear");break;case"action":o.camera.push("wide dynamic shots for energy"),o.lighting.push("high contrast for intensity");break;case"romance":o.camera.push("soft focus for intimacy"),o.lighting.push("warm golden tones");break;case"drama":o.camera.push("natural eye-level framing"),o.lighting.push("motivated practical lighting");break;case"scifi":o.camera.push("sleek futuristic angles"),o.lighting.push("neon accent lighting");break;case"noir":o.camera.push("high contrast compositions"),o.lighting.push("dramatic single-source lighting");break;case"comedy":o.camera.push("wide shots for physical comedy"),o.lighting.push("bright cheerful lighting");break}return o}async getContextualQuestionHelp(e,n){const s=this.categorizeQuestion(e),o=[];switch(s){case"lighting":o.push(...n.characteristics.lighting.slice(0,2)),o.push(`Consider ${n.genre} lighting conventions`);break;case"camera":o.push(...n.characteristics.cameraMovement.slice(0,2)),o.push(`${n.genre} camera work often uses ${n.characteristics.cameraMovement[0]}`);break;case"color":o.push(...n.characteristics.colorPalette.slice(0,2)),o.push(`${n.genre} typically uses ${n.characteristics.colorPalette[0]}`);break;case"emotion":o.push(`For ${n.genre}, focus on ${n.characteristics.narrativeElements[0]}`),o.push(`Emphasize ${n.characteristics.visualStyle[0]} techniques`);break;case"composition":o.push(...n.characteristics.visualStyle.slice(0,2)),o.push(`${n.genre} composition should reflect ${n.characteristics.narrativeElements[0]}`);break;default:o.push(`Consider ${n.genre} narrative conventions`),o.push(`Apply ${n.genre} visual storytelling techniques`)}return o}categorizeQuestion(e){const n=e.toLowerCase();return n.includes("lighting")||n.includes("light")?"lighting":n.includes("camera")||n.includes("shot")||n.includes("angle")?"camera":n.includes("color")||n.includes("palette")||n.includes("grading")?"color":n.includes("emotion")||n.includes("mood")||n.includes("feeling")?"emotion":n.includes("composition")||n.includes("framing")||n.includes("blocking")?"composition":"general"}async enhancePromptWithGenre(e,n){let s=e;const o=this.getGenreModifier(n.genre);return o&&(s+=` in the style of ${o}`),n.characteristics.visualStyle.length>0&&(s+=` using ${n.characteristics.visualStyle[0]} techniques`),s}getGenreModifier(e){return{thriller:"psychological thriller cinematography",horror:"atmospheric horror visual style",action:"dynamic action movie aesthetics",romance:"romantic drama cinematography",drama:"naturalistic drama visual approach",scifi:"futuristic sci-fi visual language",noir:"classic film noir aesthetic",comedy:"lighthearted comedy visual style"}[e]||""}}const xh=$r.getInstance(),Nn=[{id:"protagonist",title:"Protagonist",question:"Who is your main character? Describe their age, occupation, and current situation.",placeholder:"e.g., Maya, 28, struggling filmmaker living in Brooklyn...",category:"character",required:!0,knowledgePrompts:["character development","protagonist","save the cat"]},{id:"coreWant",title:"Core Desire",question:"What does your protagonist desperately want? What drives them?",placeholder:"e.g., She wants to make a film that changes her father's mind about her career choice.",category:"character",required:!0,knowledgePrompts:["character motivation","desire","stakes"]},{id:"centralConflict",title:"Central Conflict",question:"What stands in their way? What is the main obstacle or opposition?",placeholder:"e.g., Her father is a traditional banker who disapproves of the film industry...",category:"conflict",required:!0,knowledgePrompts:["conflict","obstacles","unity of opposites"]},{id:"setting",title:"Setting & World",question:"Where and when does your story take place? What makes this setting significant?",placeholder:"e.g., Brooklyn in 2024, where gentrification is forcing out the creative community...",category:"setting",required:!1,knowledgePrompts:["world building","setting","location"]},{id:"emotionalTone",title:"Emotional Journey",question:"What emotional journey does your audience experience? How should they feel?",placeholder:"e.g., Hopeful yet anxious, with moments of triumph and vulnerability...",category:"emotion",required:!1,knowledgePrompts:["emotion","tone","audience connection"]},{id:"stakes",title:"Stakes",question:"What happens if your protagonist fails? What makes this story urgent?",placeholder:"e.g., If she fails, she'll have to give up her dreams and take a corporate job...",category:"conflict",required:!0,knowledgePrompts:["stakes","urgency","consequences"]},{id:"storyType",title:"Story Format",question:"What type of story are you telling? This helps Dreamer understand the pacing and style.",placeholder:"e.g., Character drama with comedic moments...",category:"plot",required:!1,knowledgePrompts:["genre","story structure","format"]},{id:"turningPoint",title:"Key Moment",question:"What is the pivotal moment that changes everything for your protagonist?",placeholder:"e.g., She discovers her father secretly supports her, but he's dying...",category:"plot",required:!1,knowledgePrompts:["turning point","climax","story arc"]}],jm=class jm{static getRelevantKnowledge(e){const n=Nn.find(s=>s.id===e);return n?n.knowledgePrompts.flatMap(s=>Ou.filter(o=>{var l,u,d,h;return((u=(l=o.extractedKnowledge)==null?void 0:l.themes)==null?void 0:u.some(f=>f.includes(s)))||((h=(d=o.extractedKnowledge)==null?void 0:d.techniques)==null?void 0:h.some(f=>f.includes(s)))||o.name.toLowerCase().includes(s.toLowerCase())}).map(o=>{var l,u;return` ${o.name}: ${((u=(l=o.extractedKnowledge)==null?void 0:l.themes)==null?void 0:u.slice(0,2).join(", "))||"Key insights"}...`})):[]}static enhanceAnswerWithContext(e,n,s){if(e==="protagonist"&&s.age){const o=this.getAgeGroup(s.age),l=this.ageContextMap[o];if(l)return`${n}

 Age Context: ${l}`}return e==="emotionalTone"&&s.genre?`${n}

 Genre Insight: For ${s.genre} stories, focus on ${this.getGenreEmotionalFocus(s.genre)}`:n}static getAgeGroup(e){const n=parseInt(e);if(isNaN(n)){const s=e.toLowerCase();return s.includes("child")||s.includes("kid")?"child":s.includes("teen")||s.includes("adolescent")?"teenager":s.includes("young")||n>=18&&n<=25?"young_adult":n>=26&&n<=40?"adult":n>=41&&n<=55?"middle_aged":n>=56?"elder":"adult"}return n<13?"child":n<18?"teenager":n<26?"young_adult":n<41?"adult":n<56?"middle_aged":"elder"}static getGenreEmotionalFocus(e){return{drama:"authentic emotions and character development",comedy:"uplifting moments and character flaws",thriller:"suspense and tension building",romance:"intimacy and emotional connection",horror:"fear and psychological tension",action:"adrenaline and visual spectacle","sci-fi":"wonder and philosophical questions",fantasy:"magic and moral choices",documentary:"truth and social insight"}[e.toLowerCase()]||"engaging storytelling"}static async analyzeStoryForGenre(e){try{const n=[e.protagonist,e.coreWant,e.centralConflict,e.emotionalTone].filter(Boolean).join(" ");return n.trim()?(await xh.detectGenre(n,e)).genre:null}catch(n){return console.warn("Genre analysis failed:",n),null}}static async generateSmartSuggestions(e,n,s){try{const o=Object.entries(s).filter(([h,f])=>f.trim().length>0).map(([h,f])=>`${h}: ${f}`).join(`
`),u=`${this.getRelevantKnowledge(e).join(`
`)}

Story Context:
${o}`,d=await ei.generateSuggestions(u,e);return d&&d.length>0?d.slice(0,3):this.getRelevantKnowledge(e).slice(0,2)}catch(o){return console.warn("Smart suggestions failed:",o),this.getRelevantKnowledge(e).slice(0,2)}}static buildScriptFromContext(e){const n=[];return e.protagonist&&n.push(`PROTAGONIST: ${e.protagonist}`),e.setting&&n.push(`SETTING: ${e.setting}`),e.timePeriod&&n.push(`TIME PERIOD: ${e.timePeriod}`),e.coreWant&&n.push(`CORE DESIRE: ${e.coreWant}`),e.centralConflict&&n.push(`CENTRAL CONFLICT: ${e.centralConflict}`),e.stakes&&n.push(`STAKES: ${e.stakes}`),e.emotionalTone&&n.push(`EMOTIONAL TONE: ${e.emotionalTone}`),e.turningPoint&&n.push(`KEY MOMENT: ${e.turningPoint}`),n.join(`

`)}static shouldShowQuestion(e,n){switch(e){case"stakes":return!!n.coreWant;case"turningPoint":return!!(n.coreWant&&n.centralConflict);case"emotionalTone":return!!n.genre||!!n.storyType;default:return!0}}};jm.ageContextMap={child:"Innocence, wonder, vulnerability to adult world, formation of identity",teenager:"Identity crisis, rebellion vs conformity, first love, peer pressure, finding independence",young_adult:"Career building, relationship exploration, leaving home, financial independence, purpose finding",adult:"Career stability, family building, midlife reflection, responsibility balance, achievement",middle_aged:"Empty nest, marriage changes, career peak or crisis, health awareness, legacy thinking",elder:"Wisdom sharing, life reflection, health challenges, legacy, mortality acceptance"};let zn=jm;const sD=({onComplete:t,onClose:e})=>{const[n,s]=O.useState(0),[o,l]=O.useState(Nn.map(P=>({id:P.id,answer:"",completed:!1}))),[u,d]=O.useState({}),[h,f]=O.useState([]),[y,b]=O.useState([]),[T,w]=O.useState(!1),[E,C]=O.useState(null),A=Nn[n],R=o.find(P=>P.id===A.id),D=(n+1)/Nn.length*100,N=zn.shouldShowQuestion(A.id,u);O.useEffect(()=>{if(N&&(R!=null&&R.answer)){const P={...u,[A.id]:R.answer};if(d(P),A.id==="protagonist"&&R.answer){const H=R.answer.match(/(\d+)/);H&&(P.age=H[1])}q()}},[R==null?void 0:R.answer,A.id,N]),O.useEffect(()=>{u.protagonist&&u.coreWant&&u.centralConflict&&G()},[u]);const G=async()=>{try{const P=await zn.analyzeStoryForGenre(u);P&&(C(P),d(H=>({...H,genre:P})))}catch(P){console.warn("Genre analysis failed:",P)}},q=async()=>{w(!0);try{const P=o.reduce((re,ce)=>(re[ce.id]=ce.answer,re),{}),H=Nn[n+1];if(H){const re=await zn.generateSmartSuggestions(H.id,u,P);f(re)}const ne=zn.getRelevantKnowledge(A.id);b(ne)}catch(P){console.warn("Suggestion generation failed:",P)}finally{w(!1)}},z=P=>{l(H=>H.map(ne=>ne.id===A.id?{...ne,answer:P.trim(),completed:P.trim().length>0}:ne))},F=P=>{R!=null&&R.answer.trim()?z(`${R.answer}

${P}`):z(P)},ee=()=>{if(n<Nn.length-1){let P=n+1;for(;P<Nn.length&&!zn.shouldShowQuestion(Nn[P].id,u);)P++;s(P),f([]),b([])}},te=()=>{if(n>0){let P=n-1;for(;P>=0&&!zn.shouldShowQuestion(Nn[P].id,u);)P--;s(P>=0?P:0),f([]),b([])}},ue=(R==null?void 0:R.completed)||!A.required,he=n>=Nn.length-1,Te=o.filter(P=>P.completed).length,Pe=()=>{const P=zn.buildScriptFromContext(u);t(u,P)},Ue=(P=>{switch(P){case"character":return UI;case"plot":return rs;case"theme":return hb;case"setting":return TI;case"conflict":return DI;case"emotion":return hb;default:return Da}})(A.category);return N?S.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:S.jsxs(se.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900 border border-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[S.jsxs("div",{className:"p-6 border-b border-gray-800",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[S.jsx(Yu,{className:"w-6 h-6 text-amber-400"}),S.jsx("span",{children:"Story Ideation"})]}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:""})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[S.jsxs("span",{children:["Question ",n+1," of ",Nn.length]}),S.jsxs("span",{children:[Math.round(D),"% Complete"]})]}),S.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2",children:S.jsx(se.div,{className:"bg-gradient-to-r from-amber-500 to-orange-600 h-2 rounded-full",style:{width:`${D}%`},initial:{width:0},animate:{width:`${D}%`},transition:{duration:.3}})})]}),E&&S.jsx("div",{className:"mt-3 p-2 bg-purple-900/20 border border-purple-700/30 rounded-lg",children:S.jsxs("div",{className:"flex items-center space-x-2 text-purple-400 text-sm",children:[S.jsx(rs,{className:"w-4 h-4"}),S.jsxs("span",{children:["Detected Genre: ",S.jsx("span",{className:"font-medium capitalize",children:E})]})]})})]}),S.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:S.jsx(Ra,{mode:"wait",children:S.jsxs(se.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[S.jsx(Ue,{className:"w-5 h-5 text-amber-400"}),S.jsx("span",{className:"text-sm text-amber-400 capitalize",children:A.category}),A.required&&S.jsx("span",{className:"text-xs bg-red-900/20 text-red-400 px-2 py-1 rounded",children:"Required"})]}),S.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:A.title}),S.jsx("p",{className:"text-gray-300",children:A.question})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("textarea",{value:(R==null?void 0:R.answer)||"",onChange:P=>z(P.target.value),placeholder:A.placeholder,className:"w-full h-32 p-4 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none"}),h.length>0&&S.jsxs("div",{className:"space-y-2",children:[S.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center space-x-1",children:[S.jsx(Da,{className:"w-4 h-4 text-amber-400"}),S.jsx("span",{children:"Smart Suggestions"})]}),S.jsx("div",{className:"grid gap-2",children:h.map((P,H)=>S.jsxs(se.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:H*.1},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>F(P),className:"p-3 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg text-left transition-colors",children:[S.jsx("span",{className:"text-amber-400 text-xs mr-2",children:""}),S.jsx("span",{className:"text-gray-300 text-sm",children:P})]},H))})]}),y.length>0&&S.jsxs("div",{className:"space-y-2",children:[S.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center space-x-1",children:[S.jsx(tw,{className:"w-4 h-4 text-blue-400"}),S.jsx("span",{children:"Relevant Insights"})]}),S.jsx("div",{className:"space-y-1",children:y.map((P,H)=>S.jsx("div",{className:"text-blue-300 text-xs p-2 bg-blue-900/10 rounded",children:P},H))})]}),A.id==="protagonist"&&(R==null?void 0:R.answer)&&u.age&&S.jsxs("div",{className:"p-3 bg-green-900/20 border border-green-700/30 rounded-lg",children:[S.jsx("h4",{className:"text-green-400 text-sm font-medium mb-1",children:" Life Stage Insights"}),S.jsx("p",{className:"text-green-300 text-xs",children:zn.ageContextMap[zn.getAgeGroup(u.age)]})]})]})]},A.id)})}),S.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between",children:[S.jsxs("button",{onClick:te,disabled:n===0,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2",children:[S.jsx(sI,{className:"w-4 h-4"}),S.jsx("span",{children:"Previous"})]}),S.jsxs("div",{className:"text-sm text-gray-400",children:[Te," of ",Nn.length," completed"]}),he?S.jsxs(se.button,{onClick:Pe,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg transition-all flex items-center space-x-2",children:[S.jsx(Cm,{className:"w-4 h-4"}),S.jsx("span",{children:"Build Story"}),S.jsx(ew,{className:"w-4 h-4"})]}):S.jsxs("button",{onClick:ee,disabled:!ue,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2",children:[S.jsx("span",{children:"Next"}),S.jsx(oI,{className:"w-4 h-4"})]})]})]})}):(ee(),null)},rD=t=>t instanceof Error?t.message+`
`+t.stack:JSON.stringify(t,null,2);class ua extends La.Component{constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n})}render(){if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return S.jsx(e,{error:this.state.error,resetError:this.resetError})}return S.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:S.jsxs("div",{className:"max-w-2xl w-full bg-gray-900 border border-red-500/50 rounded-xl p-8",children:[S.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[S.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:S.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-xl font-bold text-red-400",children:"Something went wrong"}),S.jsx("p",{className:"text-gray-400 text-sm",children:"The application encountered an unexpected error"})]})]}),S.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 mb-6",children:[S.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Error Details:"}),S.jsx("pre",{className:"text-xs text-gray-400 overflow-auto max-h-40",children:rD(this.state.error)})]}),S.jsxs("div",{className:"flex space-x-3",children:[S.jsx("button",{onClick:this.resetError,className:"flex-1 py-3 px-4 bg-amber-500 hover:bg-amber-600 text-black font-medium rounded-lg transition-colors",children:"Try Again"}),S.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 py-3 px-4 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition-colors",children:"Reload Page"})]}),this.state.errorInfo&&S.jsxs("details",{className:"mt-4",children:[S.jsx("summary",{className:"cursor-pointer text-sm text-gray-400 hover:text-gray-300",children:"Technical Details"}),S.jsx("div",{className:"mt-2 bg-gray-800 border border-gray-700 rounded-lg p-4",children:S.jsx("pre",{className:"text-xs text-gray-400 overflow-auto max-h-40",children:this.state.errorInfo.componentStack})})]})]})})}return this.props.children}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oD,aD;function lD(){return{geminiUrl:oD,vertexUrl:aD}}function uD(t,e,n,s){var o,l;if(!(t!=null&&t.baseUrl)){const u=lD();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const h=t[d];if(Array.isArray(n))for(let f=0;f<h.length;f++){const y=h[f];p(y,e.slice(l+1),n[f])}else for(const f of h)p(f,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const h=t[d];p(h[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],o=t[s];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in t){const u=t[l];return Array.isArray(u)?u.map(d=>m(d,e.slice(s+1),n)):n}else return n}else t=t[o]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function cD(t,e){for(const[n,s]of Object.entries(e)){const o=n.split("."),l=s.split("."),u=new Set;let d=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){d=h;break}if(d!==-1&&l.length>d)for(let h=d;h<l.length;h++){const f=l[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}wh(t,o,l,0,u)}}function wh(t,e,n,s,o){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const h of d[u])wh(h,e,n,s+1,o)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(f=>!f.startsWith("_")&&!o.has(f)),h={};for(const f of d)h[f]=u[f];for(const[f,y]of Object.entries(h)){const b=[];for(const T of n.slice(s))T==="*"?b.push(f):b.push(T);p(u,b,y)}for(const f of d)delete u[f]}}else{const u=t;l in u&&wh(u[l],e,n,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dD(t){const e={},n=m(t,["operationName"]);n!=null&&p(e,["operationName"],n);const s=m(t,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function fD(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["metadata"]);s!=null&&p(e,["metadata"],s);const o=m(t,["done"]);o!=null&&p(e,["done"],o);const l=m(t,["error"]);l!=null&&p(e,["error"],l);const u=m(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],mD(u)),e}function hD(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["metadata"]);s!=null&&p(e,["metadata"],s);const o=m(t,["done"]);o!=null&&p(e,["done"],o);const l=m(t,["error"]);l!=null&&p(e,["error"],l);const u=m(t,["response"]);return u!=null&&p(e,["response"],pD(u)),e}function mD(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>gD(u))),p(e,["generatedVideos"],l)}const s=m(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function pD(t){const e={},n=m(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>yD(u))),p(e,["generatedVideos"],l)}const s=m(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function gD(t){const e={},n=m(t,["video"]);return n!=null&&p(e,["video"],SD(n)),e}function yD(t){const e={},n=m(t,["_self"]);return n!=null&&p(e,["video"],TD(n)),e}function vD(t){const e={},n=m(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function bD(t){const e={},n=m(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function SD(t){const e={},n=m(t,["uri"]);n!=null&&p(e,["uri"],n);const s=m(t,["encodedVideo"]);s!=null&&p(e,["videoBytes"],Rm(s));const o=m(t,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function TD(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const s=m(t,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],Rm(s));const o=m(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sb;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sb||(Sb={}));var Tb;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Tb||(Tb={}));var xb;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(xb||(xb={}));var de;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(de||(de={}));var wb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(wb||(wb={}));var _b;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(_b||(_b={}));var Eb;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Eb||(Eb={}));var Cb;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cb||(Cb={}));var Ab;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ab||(Ab={}));var Rb;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Rb||(Rb={}));var Nb;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Nb||(Nb={}));var Mb;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Mb||(Mb={}));var Ib;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ib||(Ib={}));var Db;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Db||(Db={}));var kb;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(kb||(kb={}));var Pb;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Pb||(Pb={}));var Lu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Lu||(Lu={}));var Ob;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ob||(Ob={}));var Lb;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Lb||(Lb={}));var Ub;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ub||(Ub={}));var _h;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_h||(_h={}));var Vb;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Vb||(Vb={}));var Bb;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Bb||(Bb={}));var qb;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(qb||(qb={}));var Gb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gb||(Gb={}));var Hb;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hb||(Hb={}));var jb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(jb||(jb={}));var Fb;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Fb||(Fb={}));var zb;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(zb||(zb={}));var $b;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})($b||($b={}));var Kb;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Kb||(Kb={}));var Jb;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Jb||(Jb={}));var Yb;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Yb||(Yb={}));var Wb;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Wb||(Wb={}));var Xb;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Xb||(Xb={}));var Qb;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Qb||(Qb={}));var Zb;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Zb||(Zb={}));var eS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(eS||(eS={}));var tS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(tS||(tS={}));var nS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nS||(nS={}));var iS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(iS||(iS={}));var sS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(sS||(sS={}));var rS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(rS||(rS={}));var oS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(oS||(oS={}));var aS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(aS||(aS={}));var lS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(lS||(lS={}));var uS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uS||(uS={}));var cS;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cS||(cS={}));var dS;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(dS||(dS={}));var Kr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Kr||(Kr={}));class Eh{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class aa{get text(){var e,n,s,o,l,u,d,h;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const b=[];for(const T of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[w,E]of Object.entries(T))w!=="text"&&w!=="thought"&&(E!==null||E!==void 0)&&b.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,f+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var e,n,s,o,l,u,d,h;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const b of(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&h!==void 0?h:[]){for(const[T,w]of Object.entries(b))T!=="inlineData"&&(w!==null||w!==void 0)&&y.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(f+=atob(b.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,s,o,l,u,d,h;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,s,o,l,u,d,h,f;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,s,o,l,u,d,h,f;if(((o=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(h=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||h===void 0?void 0:h.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class fS{}class hS{}class xD{}class wD{}class _D{}class ED{}class mS{}class pS{}class gS{}class CD{}class Uu{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const s=new Uu;let o;const l=e;return n?o=hD(l):o=fD(l),Object.assign(s,o),s}}class yS{}class vS{}class bS{}class AD{}class RD{}class ND{}class SS{}class MD{get text(){var e,n,s;let o="",l=!1;const u=[];for(const d of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,f]of Object.entries(d))h!=="text"&&h!=="thought"&&f!==null&&u.push(h);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,n,s;let o="";const l=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[d,h]of Object.entries(u))d!=="inlineData"&&h!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class ID{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function We(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function sw(t,e){const n=We(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function rw(t){return Array.isArray(t)?t.map(e=>Vu(e)):[Vu(t)]}function Vu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ow(t){const e=Vu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aw(t){const e=Vu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function TS(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function lw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>TS(e)):[TS(t)]}function Ch(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function xS(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wS(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function zt(t){if(t==null)throw new Error("ContentUnion is required");return Ch(t)?t:{role:"user",parts:lw(t)}}function Nm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=zt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=zt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>zt(n)):[zt(e)]}function Pn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(xS(t)||wS(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zt(t)]}const e=[],n=[],s=Ch(t[0]);for(const o of t){const l=Ch(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(xS(o)||wS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return s||e.push({role:"user",parts:lw(n)}),e}function DD(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(de).includes(n[0].toUpperCase())?n[0].toUpperCase():de.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(de).includes(s.toUpperCase())?s.toUpperCase():de.TYPE_UNSPECIFIED})}}function Wr(t){const e={},n=["items"],s=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&DD(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(de).includes(d.toUpperCase())?d.toUpperCase():de.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Wr(d);else if(s.includes(u)){const h=[];for(const f of d){if(f.type=="null"){e.nullable=!0;continue}h.push(Wr(f))}e[u]=h}else if(o.includes(u)){const h={};for(const[f,y]of Object.entries(d))h[f]=Wr(y);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Mm(t){return Wr(t)}function Im(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Dm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function oo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wr(e.response));return t}function ao(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function kD(t,e,n,s=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Ci(t,e){if(typeof e!="string")throw new Error("name must be a string");return kD(t,e,"cachedContents")}function uw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function as(t){return Rm(t)}function PD(t){return t!=null&&typeof t=="object"&&"name"in t}function OD(t){return t!=null&&typeof t=="object"&&"video"in t}function LD(t){return t!=null&&typeof t=="object"&&"uri"in t}function cw(t){var e;let n;if(PD(t)&&(n=t.name),!(LD(t)&&(n=t.uri,n===void 0))&&!(OD(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function dw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function fw(t){for(const e of["models","tunedModels","publisherModels"])if(UD(t,e))return t[e];return[]}function UD(t,e){return t!==null&&typeof t=="object"&&e in t}function VD(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function BD(t,e={}){const n=[],s=new Set;for(const o of t){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=VD(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function hw(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function qD(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function mw(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let l=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function lo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function pw(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GD(t){const e={},n=m(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const s=m(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>vk(u))),p(e,["inlinedResponses"],l)}const o=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function HD(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const s=m(t,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const o=m(t,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function jD(t){const e={},n=m(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const s=m(t,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const o=m(t,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Eu(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const o=m(t,["metadata","state"]);o!=null&&p(e,["state"],pw(o));const l=m(t,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=m(t,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=m(t,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const h=m(t,["metadata","model"]);h!=null&&p(e,["model"],h);const f=m(t,["metadata","output"]);return f!=null&&p(e,["dest"],GD(mw(f))),e}function Ah(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["displayName"]);s!=null&&p(e,["displayName"],s);const o=m(t,["state"]);o!=null&&p(e,["state"],pw(o));const l=m(t,["error"]);l!=null&&p(e,["error"],l);const u=m(t,["createTime"]);u!=null&&p(e,["createTime"],u);const d=m(t,["startTime"]);d!=null&&p(e,["startTime"],d);const h=m(t,["endTime"]);h!=null&&p(e,["endTime"],h);const f=m(t,["updateTime"]);f!=null&&p(e,["updateTime"],f);const y=m(t,["model"]);y!=null&&p(e,["model"],y);const b=m(t,["inputConfig"]);b!=null&&p(e,["src"],FD(b));const T=m(t,["outputConfig"]);return T!=null&&p(e,["dest"],HD(mw(T))),e}function FD(t){const e={},n=m(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const s=m(t,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const o=m(t,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function zD(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=m(e,["fileName"]);s!=null&&p(n,["fileName"],s);const o=m(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>yk(t,u))),p(n,["requests","requests"],l)}return n}function $D(t){const e={},n=m(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const s=m(t,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const o=m(t,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function KD(t){const e={},n=m(t,["data"]);if(n!=null&&p(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function JD(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],lo(t,s)),n}function YD(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],lo(t,s)),n}function WD(t){const e={},n=m(t,["content"]);n!=null&&p(e,["content"],n);const s=m(t,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],XD(s));const o=m(t,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const l=m(t,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=m(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=m(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const h=m(t,["index"]);h!=null&&p(e,["index"],h);const f=m(t,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);const y=m(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),p(e,["safetyRatings"],T)}const b=m(t,["urlContextMetadata"]);return b!=null&&p(e,["urlContextMetadata"],b),e}function XD(t){const e={},n=m(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["citations"],s)}return e}function gw(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Ek(l))),p(e,["parts"],o)}const s=m(t,["role"]);return s!=null&&p(e,["role"],s),e}function QD(t,e){const n={},s=m(t,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ZD(t,e){const n={},s=m(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const o=m(t,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],jD(qD(o))),n}function _S(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["src"]);o!=null&&p(n,["batch","inputConfig"],zD(t,hw(t,o)));const l=m(e,["config"]);return l!=null&&QD(l,n),n}function ek(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["model"],We(t,s));const o=m(e,["src"]);o!=null&&p(n,["inputConfig"],$D(hw(t,o)));const l=m(e,["config"]);return l!=null&&ZD(l,n),n}function tk(t,e){const n={},s=m(t,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),n}function nk(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["src"]);o!=null&&p(n,["batch","inputConfig"],uk(t,o));const l=m(e,["config"]);return l!=null&&tk(l,n),n}function ik(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],lo(t,s)),n}function sk(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],lo(t,s)),n}function rk(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["name"]);s!=null&&p(e,["name"],s);const o=m(t,["done"]);o!=null&&p(e,["done"],o);const l=m(t,["error"]);return l!=null&&p(e,["error"],l),e}function ok(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["name"]);s!=null&&p(e,["name"],s);const o=m(t,["done"]);o!=null&&p(e,["done"],o);const l=m(t,["error"]);return l!=null&&p(e,["error"],l),e}function ak(t,e){const n={},s=m(e,["contents"]);if(s!=null){let l=Nm(t,s);Array.isArray(l)&&(l=l.map(u=>u)),p(n,["requests[]","request","content"],l)}const o=m(e,["config"]);return o!=null&&(p(n,["_self"],lk(o,n)),cD(n,{"requests[].*":"requests[].request.*"})),n}function lk(t,e){const n={},s=m(t,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const o=m(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const l=m(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uk(t,e){const n={},s=m(e,["fileName"]);s!=null&&p(n,["file_name"],s);const o=m(e,["inlinedRequests"]);return o!=null&&p(n,["requests"],ak(t,o)),n}function ck(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function dk(t,e,n){const s={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],gw(zt(o)));const l=m(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&p(s,["topP"],u);const d=m(e,["topK"]);d!=null&&p(s,["topK"],d);const h=m(e,["candidateCount"]);h!=null&&p(s,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&p(s,["maxOutputTokens"],f);const y=m(e,["stopSequences"]);y!=null&&p(s,["stopSequences"],y);const b=m(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const T=m(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const w=m(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const E=m(e,["frequencyPenalty"]);E!=null&&p(s,["frequencyPenalty"],E);const C=m(e,["seed"]);C!=null&&p(s,["seed"],C);const A=m(e,["responseMimeType"]);A!=null&&p(s,["responseMimeType"],A);const R=m(e,["responseSchema"]);R!=null&&p(s,["responseSchema"],Mm(R));const D=m(e,["responseJsonSchema"]);if(D!=null&&p(s,["responseJsonSchema"],D),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=m(e,["safetySettings"]);if(n!==void 0&&N!=null){let Te=N;Array.isArray(Te)&&(Te=Te.map(Pe=>Ck(Pe))),p(n,["safetySettings"],Te)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let Te=ao(G);Array.isArray(Te)&&(Te=Te.map(Pe=>Ak(oo(Pe)))),p(n,["tools"],Te)}const q=m(e,["toolConfig"]);if(n!==void 0&&q!=null&&p(n,["toolConfig"],q),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=m(e,["cachedContent"]);n!==void 0&&z!=null&&p(n,["cachedContent"],Ci(t,z));const F=m(e,["responseModalities"]);F!=null&&p(s,["responseModalities"],F);const ee=m(e,["mediaResolution"]);ee!=null&&p(s,["mediaResolution"],ee);const te=m(e,["speechConfig"]);if(te!=null&&p(s,["speechConfig"],Im(te)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=m(e,["thinkingConfig"]);ue!=null&&p(s,["thinkingConfig"],ue);const he=m(e,["imageConfig"]);return he!=null&&p(s,["imageConfig"],he),s}function fk(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(f=>WD(f))),p(e,["candidates"],h)}const o=m(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=m(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=m(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function hk(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],lo(t,s)),n}function mk(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],lo(t,s)),n}function pk(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function gk(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function yk(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["request","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let d=Pn(o);Array.isArray(d)&&(d=d.map(h=>gw(h))),p(n,["request","contents"],d)}const l=m(e,["metadata"]);l!=null&&p(n,["metadata"],l);const u=m(e,["config"]);return u!=null&&p(n,["request","generationConfig"],dk(t,u,m(n,["request"],{}))),n}function vk(t){const e={},n=m(t,["response"]);n!=null&&p(e,["response"],fk(n));const s=m(t,["error"]);return s!=null&&p(e,["error"],s),e}function bk(t,e){const n={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=m(t,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Sk(t,e){const n={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),n}function Tk(t){const e={},n=m(t,["config"]);return n!=null&&bk(n,e),e}function xk(t){const e={},n=m(t,["config"]);return n!=null&&Sk(n,e),e}function wk(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Eu(u))),p(e,["batchJobs"],l)}return e}function _k(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Ah(u))),p(e,["batchJobs"],l)}return e}function Ek(t){const e={},n=m(t,["functionCall"]);n!=null&&p(e,["functionCall"],n);const s=m(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const o=m(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const l=m(t,["fileData"]);l!=null&&p(e,["fileData"],ck(l));const u=m(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&p(e,["inlineData"],KD(d));const h=m(t,["text"]);h!=null&&p(e,["text"],h);const f=m(t,["thought"]);f!=null&&p(e,["thought"],f);const y=m(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const b=m(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function Ck(t){const e={},n=m(t,["category"]);if(n!=null&&p(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(t,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function Ak(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>y)),p(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=m(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const o=m(t,["googleMaps"]);o!=null&&p(e,["googleMaps"],pk(o));const l=m(t,["computerUse"]);l!=null&&p(e,["computerUse"],l);const u=m(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],gk(d));const h=m(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_RAG_STORES="ragStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Gs||(Gs={}));class Ga{constructor(e,n,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,o)}init(e,n,s){var o,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rk extends zs{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ga(Gs.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=_S(this.apiClient,e),s=n._url,o=ye("{model}:batchGenerateContent",s),d=n.batch.inputConfig.requests,h=d.requests,f=[];for(const y of h){const b=Object.assign({},y);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const w=b.request;w.systemInstruction=T,b.request=w}f.push(b)}return d.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(u)s.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=ek(this.apiClient,e);return d=ye("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>Ah(y))}else{const f=_S(this.apiClient,e);return d=ye("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Eu(y))}}async createEmbeddingsInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nk(this.apiClient,e);return l=ye("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Eu(h))}}async get(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=mk(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>Ah(y))}else{const f=hk(this.apiClient,e);return d=ye("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Eu(y))}}async cancel(e){var n,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const h=YD(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=JD(this.apiClient,e);u=ye("batches/{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=xk(e);return d=ye("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=_k(y),T=new SS;return Object.assign(T,b),T})}else{const f=Tk(e);return d=ye("batches",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=wk(y),T=new SS;return Object.assign(T,b),T})}}async delete(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=sk(this.apiClient,e);return d=ye("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>ok(y))}else{const f=ik(this.apiClient,e);return d=ye("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>rk(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nk(t){const e={},n=m(t,["data"]);if(n!=null&&p(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function ES(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Wk(l))),p(e,["parts"],o)}const s=m(t,["role"]);return s!=null&&p(e,["role"],s),e}function Mk(t,e){const n={},s=m(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const o=m(t,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const l=m(t,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=m(t,["contents"]);if(e!==void 0&&u!=null){let y=Pn(u);Array.isArray(y)&&(y=y.map(b=>ES(b))),p(e,["contents"],y)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],ES(zt(d)));const h=m(t,["tools"]);if(e!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(b=>Xk(b))),p(e,["tools"],y)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&p(e,["toolConfig"],f),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ik(t,e){const n={},s=m(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const o=m(t,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const l=m(t,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=m(t,["contents"]);if(e!==void 0&&u!=null){let b=Pn(u);Array.isArray(b)&&(b=b.map(T=>T)),p(e,["contents"],b)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],zt(d));const h=m(t,["tools"]);if(e!==void 0&&h!=null){let b=h;Array.isArray(b)&&(b=b.map(T=>Qk(T))),p(e,["tools"],b)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&p(e,["toolConfig"],f);const y=m(t,["kmsKeyName"]);return e!==void 0&&y!=null&&p(e,["encryption_spec","kmsKeyName"],y),n}function Dk(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["model"],sw(t,s));const o=m(e,["config"]);return o!=null&&Mk(o,n),n}function kk(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["model"],sw(t,s));const o=m(e,["config"]);return o!=null&&Ik(o,n),n}function Pk(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],Ci(t,s)),n}function Ok(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],Ci(t,s)),n}function Lk(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Uk(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Vk(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Bk(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&p(e,["description"],n);const s=m(t,["name"]);s!=null&&p(e,["name"],s);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const l=m(t,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function qk(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],Ci(t,s)),n}function Gk(t,e){const n={},s=m(e,["name"]);return s!=null&&p(n,["_url","name"],Ci(t,s)),n}function Hk(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function jk(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Fk(t,e){const n={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function zk(t,e){const n={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function $k(t){const e={},n=m(t,["config"]);return n!=null&&Fk(n,e),e}function Kk(t){const e={},n=m(t,["config"]);return n!=null&&zk(n,e),e}function Jk(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function Yk(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function Wk(t){const e={},n=m(t,["functionCall"]);n!=null&&p(e,["functionCall"],n);const s=m(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const o=m(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const l=m(t,["fileData"]);l!=null&&p(e,["fileData"],Vk(l));const u=m(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&p(e,["inlineData"],Nk(d));const h=m(t,["text"]);h!=null&&p(e,["text"],h);const f=m(t,["thought"]);f!=null&&p(e,["thought"],f);const y=m(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const b=m(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function Xk(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>y)),p(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=m(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const o=m(t,["googleMaps"]);o!=null&&p(e,["googleMaps"],Hk(o));const l=m(t,["computerUse"]);l!=null&&p(e,["computerUse"],l);const u=m(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],jk(d));const h=m(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Qk(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(T=>Bk(T))),p(e,["functionDeclarations"],b)}const s=m(t,["retrieval"]);s!=null&&p(e,["retrieval"],s);const o=m(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const l=m(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=m(t,["computerUse"]);u!=null&&p(e,["computerUse"],u);const d=m(t,["codeExecution"]);d!=null&&p(e,["codeExecution"],d);const h=m(t,["enterpriseWebSearch"]);h!=null&&p(e,["enterpriseWebSearch"],h);const f=m(t,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const y=m(t,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function Zk(t,e){const n={},s=m(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const o=m(t,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),n}function eP(t,e){const n={},s=m(t,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const o=m(t,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),n}function tP(t,e){const n={},s=m(e,["name"]);s!=null&&p(n,["_url","name"],Ci(t,s));const o=m(e,["config"]);return o!=null&&Zk(o,n),n}function nP(t,e){const n={},s=m(e,["name"]);s!=null&&p(n,["_url","name"],Ci(t,s));const o=m(e,["config"]);return o!=null&&eP(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iP extends zs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ga(Gs.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=kk(this.apiClient,e);return d=ye("cachedContents",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=Dk(this.apiClient,e);return d=ye("cachedContents",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async get(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=Gk(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=qk(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async delete(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=Ok(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=Uk(y),T=new vS;return Object.assign(T,b),T})}else{const f=Pk(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=Lk(y),T=new vS;return Object.assign(T,b),T})}}async update(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=nP(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>y)}else{const f=tP(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>y)}}async listInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=Kk(e);return d=ye("cachedContents",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=Yk(y),T=new bS;return Object.assign(T,b),T})}else{const f=$k(e);return d=ye("cachedContents",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=Jk(y),T=new bS;return Object.assign(T,b),T})}}}function CS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(t){return this instanceof ct?(this.v=t,this):new ct(t)}function Xr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(E){return Promise.resolve(E).then(w,b)}}function d(w,E){s[w]&&(o[w]=function(C){return new Promise(function(A,R){l.push([w,C,A,R])>1||h(w,C)})},E&&(o[w]=E(o[w])))}function h(w,E){try{f(s[w](E))}catch(C){T(l[0][3],C)}}function f(w){w.value instanceof ct?Promise.resolve(w.value.v).then(y,b):T(l[0][2],w)}function y(w){h("next",w)}function b(w){h("throw",w)}function T(w,E){w(E),l.shift(),l.length&&h(l[0][0],l[0][1])}}function ya(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof CS=="function"?CS(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(d,h){u=t[l](u),o(d,h,u.done,u.value)})}}function o(l,u,d,h){Promise.resolve(h).then(function(f){l({value:f,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sP(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:yw(n)}function yw(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function rP(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function AS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const o=[];let l=!0;for(;s<n&&t[s].role==="model";)o.push(t[s]),l&&!yw(t[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class oP{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new aP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class aP{constructor(e,n,s,o={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),rP(l)}async sendMessage(e){var n;await this.sendPromise;const s=zt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,d;const h=await o,f=(u=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,y=h.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];y!=null&&(T=(d=y.slice(b))!==null&&d!==void 0?d:[]);const w=f?[f]:[];this.recordHistory(s,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const s=zt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const n=e?AS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var s,o;return Xr(this,arguments,function*(){var u,d,h,f;const y=[];try{for(var b=!0,T=ya(e),w;w=yield ct(T.next()),u=w.done,!u;b=!0){f=w.value,b=!1;const E=f;if(sP(E)){const C=(o=(s=E.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;C!==void 0&&y.push(C)}yield yield ct(E)}}catch(E){d={error:E}}finally{try{!b&&!u&&(h=T.return)&&(yield ct(h.call(T)))}finally{if(d)throw d.error}}this.recordHistory(n,y)})}recordHistory(e,n,s){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...AS(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lP(t){const e={},n=m(t,["file"]);return n!=null&&p(e,["file"],n),e}function uP(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function cP(t){const e={},n=m(t,["name"]);return n!=null&&p(e,["_url","file"],cw(n)),e}function dP(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function fP(t){const e={},n=m(t,["name"]);return n!=null&&p(e,["_url","file"],cw(n)),e}function hP(t,e){const n={},s=m(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=m(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function mP(t){const e={},n=m(t,["config"]);return n!=null&&hP(n,e),e}function pP(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gP extends zs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ga(Gs.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mP(e);return l=ye("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const f=pP(h),y=new AD;return Object.assign(y,f),y})}}async createInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lP(e);return l=ye("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const f=uP(h),y=new RD;return Object.assign(y,f),y})}}async get(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fP(e);return l=ye("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cP(e);return l=ye("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const f=dP(h),y=new ND;return Object.assign(y,f),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cu(t){const e={},n=m(t,["data"]);if(n!=null&&p(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function yP(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>DP(l))),p(e,["parts"],o)}const s=m(t,["role"]);return s!=null&&p(e,["role"],s),e}function vP(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function bP(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&p(e,["description"],n);const s=m(t,["name"]);s!=null&&p(e,["name"],s);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const l=m(t,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function SP(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const s=m(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const o=m(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&p(e,["enableAffectiveDialog"],l);const u=m(t,["frequencyPenalty"]);u!=null&&p(e,["frequencyPenalty"],u);const d=m(t,["logprobs"]);d!=null&&p(e,["logprobs"],d);const h=m(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const f=m(t,["mediaResolution"]);f!=null&&p(e,["mediaResolution"],f);const y=m(t,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);const b=m(t,["responseJsonSchema"]);b!=null&&p(e,["responseJsonSchema"],b);const T=m(t,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const w=m(t,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const E=m(t,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);const C=m(t,["responseSchema"]);C!=null&&p(e,["responseSchema"],C);const A=m(t,["routingConfig"]);A!=null&&p(e,["routingConfig"],A);const R=m(t,["seed"]);R!=null&&p(e,["seed"],R);const D=m(t,["speechConfig"]);D!=null&&p(e,["speechConfig"],vw(D));const N=m(t,["stopSequences"]);N!=null&&p(e,["stopSequences"],N);const G=m(t,["temperature"]);G!=null&&p(e,["temperature"],G);const q=m(t,["thinkingConfig"]);q!=null&&p(e,["thinkingConfig"],q);const z=m(t,["topK"]);z!=null&&p(e,["topK"],z);const F=m(t,["topP"]);if(F!=null&&p(e,["topP"],F),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function TP(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function xP(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function wP(t,e){const n={},s=m(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const l=m(t,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=m(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=m(t,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const y=m(t,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const b=m(t,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Dm(b));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=m(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],yP(zt(E)));const C=m(t,["tools"]);if(e!==void 0&&C!=null){let z=ao(C);Array.isArray(z)&&(z=z.map(F=>PP(oo(F)))),p(e,["setup","tools"],z)}const A=m(t,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],kP(A));const R=m(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const D=m(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","outputAudioTranscription"],D);const N=m(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&p(e,["setup","realtimeInputConfig"],N);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);const q=m(t,["proactivity"]);return e!==void 0&&q!=null&&p(e,["setup","proactivity"],q),n}function _P(t,e){const n={},s=m(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],SP(s));const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const l=m(t,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=m(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=m(t,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const y=m(t,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const b=m(t,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],vw(Dm(b)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=m(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],zt(E));const C=m(t,["tools"]);if(e!==void 0&&C!=null){let z=ao(C);Array.isArray(z)&&(z=z.map(F=>OP(oo(F)))),p(e,["setup","tools"],z)}const A=m(t,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],A);const R=m(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const D=m(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","outputAudioTranscription"],D);const N=m(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&p(e,["setup","realtimeInputConfig"],N);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);const q=m(t,["proactivity"]);return e!==void 0&&q!=null&&p(e,["setup","proactivity"],q),n}function EP(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["setup","model"],We(t,s));const o=m(e,["config"]);return o!=null&&p(n,["config"],wP(o,n)),n}function CP(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["setup","model"],We(t,s));const o=m(e,["config"]);return o!=null&&p(n,["config"],_P(o,n)),n}function AP(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function RP(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["weightedPrompts"],s)}return e}function NP(t){const e={},n=m(t,["media"]);if(n!=null){let f=rw(n);Array.isArray(f)&&(f=f.map(y=>Cu(y))),p(e,["mediaChunks"],f)}const s=m(t,["audio"]);s!=null&&p(e,["audio"],Cu(aw(s)));const o=m(t,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const l=m(t,["video"]);l!=null&&p(e,["video"],Cu(ow(l)));const u=m(t,["text"]);u!=null&&p(e,["text"],u);const d=m(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=m(t,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function MP(t){const e={},n=m(t,["media"]);if(n!=null){let f=rw(n);Array.isArray(f)&&(f=f.map(y=>y)),p(e,["mediaChunks"],f)}const s=m(t,["audio"]);s!=null&&p(e,["audio"],aw(s));const o=m(t,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const l=m(t,["video"]);l!=null&&p(e,["video"],ow(l));const u=m(t,["text"]);u!=null&&p(e,["text"],u);const d=m(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const h=m(t,["activityEnd"]);return h!=null&&p(e,["activityEnd"],h),e}function IP(t){const e={},n=m(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const s=m(t,["serverContent"]);s!=null&&p(e,["serverContent"],s);const o=m(t,["toolCall"]);o!=null&&p(e,["toolCall"],o);const l=m(t,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=m(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],LP(u));const d=m(t,["goAway"]);d!=null&&p(e,["goAway"],d);const h=m(t,["sessionResumptionUpdate"]);return h!=null&&p(e,["sessionResumptionUpdate"],h),e}function DP(t){const e={},n=m(t,["functionCall"]);n!=null&&p(e,["functionCall"],n);const s=m(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const o=m(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const l=m(t,["fileData"]);l!=null&&p(e,["fileData"],vP(l));const u=m(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&p(e,["inlineData"],Cu(d));const h=m(t,["text"]);h!=null&&p(e,["text"],h);const f=m(t,["thought"]);f!=null&&p(e,["thought"],f);const y=m(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const b=m(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function kP(t){const e={},n=m(t,["handle"]);if(n!=null&&p(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vw(t){const e={},n=m(t,["languageCode"]);n!=null&&p(e,["languageCode"],n);const s=m(t,["voiceConfig"]);if(s!=null&&p(e,["voiceConfig"],s),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function PP(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>y)),p(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=m(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const o=m(t,["googleMaps"]);o!=null&&p(e,["googleMaps"],TP(o));const l=m(t,["computerUse"]);l!=null&&p(e,["computerUse"],l);const u=m(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],xP(d));const h=m(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function OP(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(T=>bP(T))),p(e,["functionDeclarations"],b)}const s=m(t,["retrieval"]);s!=null&&p(e,["retrieval"],s);const o=m(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const l=m(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=m(t,["computerUse"]);u!=null&&p(e,["computerUse"],u);const d=m(t,["codeExecution"]);d!=null&&p(e,["codeExecution"],d);const h=m(t,["enterpriseWebSearch"]);h!=null&&p(e,["enterpriseWebSearch"],h);const f=m(t,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const y=m(t,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function LP(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const s=m(t,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const o=m(t,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const l=m(t,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=m(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=m(t,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const h=m(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(E=>E)),p(e,["promptTokensDetails"],w)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(E=>E)),p(e,["cacheTokensDetails"],w)}const y=m(t,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(E=>E)),p(e,["responseTokensDetails"],w)}const b=m(t,["toolUsePromptTokensDetails"]);if(b!=null){let w=b;Array.isArray(w)&&(w=w.map(E=>E)),p(e,["toolUsePromptTokensDetails"],w)}const T=m(t,["trafficType"]);return T!=null&&p(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UP(t){const e={},n=m(t,["data"]);if(n!=null&&p(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function VP(t){const e={},n=m(t,["content"]);n!=null&&p(e,["content"],n);const s=m(t,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],BP(s));const o=m(t,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const l=m(t,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=m(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=m(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const h=m(t,["index"]);h!=null&&p(e,["index"],h);const f=m(t,["logprobsResult"]);f!=null&&p(e,["logprobsResult"],f);const y=m(t,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),p(e,["safetyRatings"],T)}const b=m(t,["urlContextMetadata"]);return b!=null&&p(e,["urlContextMetadata"],b),e}function BP(t){const e={},n=m(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["citations"],s)}return e}function qP(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let l=Pn(o);Array.isArray(l)&&(l=l.map(u=>u)),p(n,["contents"],l)}return n}function GP(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["tokensInfo"],o)}return e}function HP(t){const e={},n=m(t,["values"]);n!=null&&p(e,["values"],n);const s=m(t,["statistics"]);return s!=null&&p(e,["statistics"],jP(s)),e}function jP(t){const e={},n=m(t,["truncated"]);n!=null&&p(e,["truncated"],n);const s=m(t,["token_count"]);return s!=null&&p(e,["tokenCount"],s),e}function Xu(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>J2(l))),p(e,["parts"],o)}const s=m(t,["role"]);return s!=null&&p(e,["role"],s),e}function FP(t){const e={},n=m(t,["controlType"]);n!=null&&p(e,["controlType"],n);const s=m(t,["enableControlImageComputation"]);return s!=null&&p(e,["computeControl"],s),e}function zP(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $P(t,e){const n={},s=m(t,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],zt(s));const o=m(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>ww(d))),p(e,["tools"],u)}const l=m(t,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],O2(l)),n}function KP(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let u=Pn(o);Array.isArray(u)&&(u=u.map(d=>Xu(d))),p(n,["contents"],u)}const l=m(e,["config"]);return l!=null&&zP(l),n}function JP(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let u=Pn(o);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["contents"],u)}const l=m(e,["config"]);return l!=null&&$P(l,n),n}function YP(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["totalTokens"]);s!=null&&p(e,["totalTokens"],s);const o=m(t,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function WP(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["totalTokens"]);return s!=null&&p(e,["totalTokens"],s),e}function XP(t,e){const n={},s=m(e,["model"]);return s!=null&&p(n,["_url","name"],We(t,s)),n}function QP(t,e){const n={},s=m(e,["model"]);return s!=null&&p(n,["_url","name"],We(t,s)),n}function ZP(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function e2(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function t2(t,e){const n={},s=m(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const o=m(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const l=m(t,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const h=m(t,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const y=m(t,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const b=m(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&p(e,["parameters","includeRaiReason"],T);const w=m(t,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const E=m(t,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const C=m(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C);const A=m(t,["addWatermark"]);e!==void 0&&A!=null&&p(e,["parameters","addWatermark"],A);const R=m(t,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const D=m(t,["editMode"]);e!==void 0&&D!=null&&p(e,["parameters","editMode"],D);const N=m(t,["baseSteps"]);return e!==void 0&&N!=null&&p(e,["parameters","editConfig","baseSteps"],N),n}function n2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const l=m(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>eO(h))),p(n,["instances[0]","referenceImages"],d)}const u=m(e,["config"]);return u!=null&&t2(u,n),n}function i2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Qu(l))),p(e,["generatedImages"],o)}return e}function s2(t,e){const n={},s=m(t,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const o=m(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const l=m(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function r2(t,e){const n={},s=m(t,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const o=m(t,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const l=m(t,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const u=m(t,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const d=m(t,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),n}function o2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let d=Nm(t,o);Array.isArray(d)&&(d=d.map(h=>h)),p(n,["requests[]","content"],d)}const l=m(e,["config"]);l!=null&&s2(l,n);const u=m(e,["model"]);return u!==void 0&&p(n,["requests[]","model"],We(t,u)),n}function a2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let u=Nm(t,o);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["instances[]","content"],u)}const l=m(e,["config"]);return l!=null&&r2(l,n),n}function l2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["embeddings"],l)}const o=m(t,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function u2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>HP(u))),p(e,["embeddings"],l)}const o=m(t,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function c2(t){const e={},n=m(t,["endpoint"]);n!=null&&p(e,["name"],n);const s=m(t,["deployedModelId"]);return s!=null&&p(e,["deployedModelId"],s),e}function d2(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function f2(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&p(e,["description"],n);const s=m(t,["name"]);s!=null&&p(e,["name"],s);const o=m(t,["parameters"]);o!=null&&p(e,["parameters"],o);const l=m(t,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=m(t,["response"]);u!=null&&p(e,["response"],u);const d=m(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function h2(t,e,n){const s={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],Xu(zt(o)));const l=m(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&p(s,["topP"],u);const d=m(e,["topK"]);d!=null&&p(s,["topK"],d);const h=m(e,["candidateCount"]);h!=null&&p(s,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&p(s,["maxOutputTokens"],f);const y=m(e,["stopSequences"]);y!=null&&p(s,["stopSequences"],y);const b=m(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const T=m(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const w=m(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const E=m(e,["frequencyPenalty"]);E!=null&&p(s,["frequencyPenalty"],E);const C=m(e,["seed"]);C!=null&&p(s,["seed"],C);const A=m(e,["responseMimeType"]);A!=null&&p(s,["responseMimeType"],A);const R=m(e,["responseSchema"]);R!=null&&p(s,["responseSchema"],Mm(R));const D=m(e,["responseJsonSchema"]);if(D!=null&&p(s,["responseJsonSchema"],D),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=m(e,["safetySettings"]);if(n!==void 0&&N!=null){let Te=N;Array.isArray(Te)&&(Te=Te.map(Pe=>tO(Pe))),p(n,["safetySettings"],Te)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let Te=ao(G);Array.isArray(Te)&&(Te=Te.map(Pe=>aO(oo(Pe)))),p(n,["tools"],Te)}const q=m(e,["toolConfig"]);if(n!==void 0&&q!=null&&p(n,["toolConfig"],q),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=m(e,["cachedContent"]);n!==void 0&&z!=null&&p(n,["cachedContent"],Ci(t,z));const F=m(e,["responseModalities"]);F!=null&&p(s,["responseModalities"],F);const ee=m(e,["mediaResolution"]);ee!=null&&p(s,["mediaResolution"],ee);const te=m(e,["speechConfig"]);if(te!=null&&p(s,["speechConfig"],Im(te)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=m(e,["thinkingConfig"]);ue!=null&&p(s,["thinkingConfig"],ue);const he=m(e,["imageConfig"]);return he!=null&&p(s,["imageConfig"],he),s}function m2(t,e,n){const s={},o=m(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],zt(o));const l=m(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&p(s,["topP"],u);const d=m(e,["topK"]);d!=null&&p(s,["topK"],d);const h=m(e,["candidateCount"]);h!=null&&p(s,["candidateCount"],h);const f=m(e,["maxOutputTokens"]);f!=null&&p(s,["maxOutputTokens"],f);const y=m(e,["stopSequences"]);y!=null&&p(s,["stopSequences"],y);const b=m(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const T=m(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const w=m(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const E=m(e,["frequencyPenalty"]);E!=null&&p(s,["frequencyPenalty"],E);const C=m(e,["seed"]);C!=null&&p(s,["seed"],C);const A=m(e,["responseMimeType"]);A!=null&&p(s,["responseMimeType"],A);const R=m(e,["responseSchema"]);R!=null&&p(s,["responseSchema"],Mm(R));const D=m(e,["responseJsonSchema"]);D!=null&&p(s,["responseJsonSchema"],D);const N=m(e,["routingConfig"]);N!=null&&p(s,["routingConfig"],N);const G=m(e,["modelSelectionConfig"]);G!=null&&p(s,["modelConfig"],G);const q=m(e,["safetySettings"]);if(n!==void 0&&q!=null){let P=q;Array.isArray(P)&&(P=P.map(H=>H)),p(n,["safetySettings"],P)}const z=m(e,["tools"]);if(n!==void 0&&z!=null){let P=ao(z);Array.isArray(P)&&(P=P.map(H=>ww(oo(H)))),p(n,["tools"],P)}const F=m(e,["toolConfig"]);n!==void 0&&F!=null&&p(n,["toolConfig"],F);const ee=m(e,["labels"]);n!==void 0&&ee!=null&&p(n,["labels"],ee);const te=m(e,["cachedContent"]);n!==void 0&&te!=null&&p(n,["cachedContent"],Ci(t,te));const ue=m(e,["responseModalities"]);ue!=null&&p(s,["responseModalities"],ue);const he=m(e,["mediaResolution"]);he!=null&&p(s,["mediaResolution"],he);const Te=m(e,["speechConfig"]);Te!=null&&p(s,["speechConfig"],xw(Im(Te)));const Pe=m(e,["audioTimestamp"]);Pe!=null&&p(s,["audioTimestamp"],Pe);const $e=m(e,["thinkingConfig"]);$e!=null&&p(s,["thinkingConfig"],$e);const Ue=m(e,["imageConfig"]);return Ue!=null&&p(s,["imageConfig"],Ue),s}function RS(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let u=Pn(o);Array.isArray(u)&&(u=u.map(d=>Xu(d))),p(n,["contents"],u)}const l=m(e,["config"]);return l!=null&&p(n,["generationConfig"],h2(t,l,n)),n}function NS(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["contents"]);if(o!=null){let u=Pn(o);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["contents"],u)}const l=m(e,["config"]);return l!=null&&p(n,["generationConfig"],m2(t,l,n)),n}function MS(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(f=>VP(f))),p(e,["candidates"],h)}const o=m(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=m(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=m(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function IS(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(y=>y)),p(e,["candidates"],f)}const o=m(t,["createTime"]);o!=null&&p(e,["createTime"],o);const l=m(t,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const u=m(t,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const d=m(t,["responseId"]);d!=null&&p(e,["responseId"],d);const h=m(t,["usageMetadata"]);return h!=null&&p(e,["usageMetadata"],h),e}function p2(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=m(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const l=m(t,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=m(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const h=m(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const y=m(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const b=m(t,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=m(t,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function g2(t,e){const n={},s=m(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const o=m(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const l=m(t,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=m(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const h=m(t,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const y=m(t,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const b=m(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&p(e,["parameters","includeRaiReason"],T);const w=m(t,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const E=m(t,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const C=m(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C);const A=m(t,["addWatermark"]);e!==void 0&&A!=null&&p(e,["parameters","addWatermark"],A);const R=m(t,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const D=m(t,["imageSize"]);e!==void 0&&D!=null&&p(e,["parameters","sampleImageSize"],D);const N=m(t,["enhancePrompt"]);return e!==void 0&&N!=null&&p(e,["parameters","enhancePrompt"],N),n}function y2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const l=m(e,["config"]);return l!=null&&p2(l,n),n}function v2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const l=m(e,["config"]);return l!=null&&g2(l,n),n}function b2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>I2(u))),p(e,["generatedImages"],l)}const o=m(t,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],Sw(o)),e}function S2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Qu(u))),p(e,["generatedImages"],l)}const o=m(t,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],Tw(o)),e}function T2(t,e){const n={},s=m(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=m(t,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=m(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=m(t,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=m(t,["negativePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","negativePrompt"],h);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&p(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=m(t,["lastFrame"]);e!==void 0&&y!=null&&p(e,["instances[0]","lastFrame"],Zu(y));const b=m(t,["referenceImages"]);if(e!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(w=>SO(w))),p(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function x2(t,e){const n={},s=m(t,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const l=m(t,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const u=m(t,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const d=m(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const h=m(t,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const f=m(t,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const y=m(t,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const b=m(t,["pubsubTopic"]);e!==void 0&&b!=null&&p(e,["parameters","pubsubTopic"],b);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","negativePrompt"],T);const w=m(t,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const E=m(t,["generateAudio"]);e!==void 0&&E!=null&&p(e,["parameters","generateAudio"],E);const C=m(t,["lastFrame"]);e!==void 0&&C!=null&&p(e,["instances[0]","lastFrame"],Jn(C));const A=m(t,["referenceImages"]);if(e!==void 0&&A!=null){let N=A;Array.isArray(N)&&(N=N.map(G=>TO(G))),p(e,["instances[0]","referenceImages"],N)}const R=m(t,["mask"]);e!==void 0&&R!=null&&p(e,["instances[0]","mask"],bO(R));const D=m(t,["compressionQuality"]);return e!==void 0&&D!=null&&p(e,["parameters","compressionQuality"],D),n}function w2(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["metadata"]);s!=null&&p(e,["metadata"],s);const o=m(t,["done"]);o!=null&&p(e,["done"],o);const l=m(t,["error"]);l!=null&&p(e,["error"],l);const u=m(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],A2(u)),e}function _2(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["metadata"]);s!=null&&p(e,["metadata"],s);const o=m(t,["done"]);o!=null&&p(e,["done"],o);const l=m(t,["error"]);l!=null&&p(e,["error"],l);const u=m(t,["response"]);return u!=null&&p(e,["response"],R2(u)),e}function E2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const l=m(e,["image"]);l!=null&&p(n,["instances[0]","image"],Zu(l));const u=m(e,["video"]);u!=null&&p(n,["instances[0]","video"],_w(u));const d=m(e,["source"]);d!=null&&N2(d,n);const h=m(e,["config"]);return h!=null&&T2(h,n),n}function C2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const l=m(e,["image"]);l!=null&&p(n,["instances[0]","image"],Jn(l));const u=m(e,["video"]);u!=null&&p(n,["instances[0]","video"],Ew(u));const d=m(e,["source"]);d!=null&&M2(d,n);const h=m(e,["config"]);return h!=null&&x2(h,n),n}function A2(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>k2(u))),p(e,["generatedVideos"],l)}const s=m(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function R2(t){const e={},n=m(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>P2(u))),p(e,["generatedVideos"],l)}const s=m(t,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const o=m(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function N2(t,e){const n={},s=m(t,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const o=m(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Zu(o));const l=m(t,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],_w(l)),n}function M2(t,e){const n={},s=m(t,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const o=m(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Jn(o));const l=m(t,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],Ew(l)),n}function I2(t){const e={},n=m(t,["_self"]);n!=null&&p(e,["image"],q2(n));const s=m(t,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const o=m(t,["_self"]);return o!=null&&p(e,["safetyAttributes"],Sw(o)),e}function Qu(t){const e={},n=m(t,["_self"]);n!=null&&p(e,["image"],bw(n));const s=m(t,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const o=m(t,["_self"]);o!=null&&p(e,["safetyAttributes"],Tw(o));const l=m(t,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function D2(t){const e={},n=m(t,["_self"]);n!=null&&p(e,["mask"],bw(n));const s=m(t,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["labels"],o)}return e}function k2(t){const e={},n=m(t,["video"]);return n!=null&&p(e,["video"],yO(n)),e}function P2(t){const e={},n=m(t,["_self"]);return n!=null&&p(e,["video"],vO(n)),e}function O2(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const s=m(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const o=m(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&p(e,["enableAffectiveDialog"],l);const u=m(t,["frequencyPenalty"]);u!=null&&p(e,["frequencyPenalty"],u);const d=m(t,["logprobs"]);d!=null&&p(e,["logprobs"],d);const h=m(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const f=m(t,["mediaResolution"]);f!=null&&p(e,["mediaResolution"],f);const y=m(t,["presencePenalty"]);y!=null&&p(e,["presencePenalty"],y);const b=m(t,["responseJsonSchema"]);b!=null&&p(e,["responseJsonSchema"],b);const T=m(t,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const w=m(t,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const E=m(t,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);const C=m(t,["responseSchema"]);C!=null&&p(e,["responseSchema"],C);const A=m(t,["routingConfig"]);A!=null&&p(e,["routingConfig"],A);const R=m(t,["seed"]);R!=null&&p(e,["seed"],R);const D=m(t,["speechConfig"]);D!=null&&p(e,["speechConfig"],xw(D));const N=m(t,["stopSequences"]);N!=null&&p(e,["stopSequences"],N);const G=m(t,["temperature"]);G!=null&&p(e,["temperature"],G);const q=m(t,["thinkingConfig"]);q!=null&&p(e,["thinkingConfig"],q);const z=m(t,["topK"]);z!=null&&p(e,["topK"],z);const F=m(t,["topP"]);if(F!=null&&p(e,["topP"],F),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L2(t,e){const n={},s=m(e,["model"]);return s!=null&&p(n,["_url","name"],We(t,s)),n}function U2(t,e){const n={},s=m(e,["model"]);return s!=null&&p(n,["_url","name"],We(t,s)),n}function V2(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function B2(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function q2(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],as(n));const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function bw(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const s=m(t,["bytesBase64Encoded"]);s!=null&&p(e,["imageBytes"],as(s));const o=m(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function Zu(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],as(n));const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Jn(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const s=m(t,["imageBytes"]);s!=null&&p(e,["bytesBase64Encoded"],as(s));const o=m(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function G2(t,e,n){const s={},o=m(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const l=m(e,["pageToken"]);n!==void 0&&l!=null&&p(n,["_query","pageToken"],l);const u=m(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&p(n,["_url","models_url"],dw(t,d)),s}function H2(t,e,n){const s={},o=m(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const l=m(e,["pageToken"]);n!==void 0&&l!=null&&p(n,["_query","pageToken"],l);const u=m(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&p(n,["_url","models_url"],dw(t,d)),s}function j2(t,e){const n={},s=m(e,["config"]);return s!=null&&G2(t,s,n),n}function F2(t,e){const n={},s=m(e,["config"]);return s!=null&&H2(t,s,n),n}function z2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["_self"]);if(o!=null){let l=fw(o);Array.isArray(l)&&(l=l.map(u=>Rh(u))),p(e,["models"],l)}return e}function $2(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const o=m(t,["_self"]);if(o!=null){let l=fw(o);Array.isArray(l)&&(l=l.map(u=>Nh(u))),p(e,["models"],l)}return e}function K2(t){const e={},n=m(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const s=m(t,["segmentationClasses"]);s!=null&&p(e,["maskClasses"],s);const o=m(t,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function Rh(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["displayName"]);s!=null&&p(e,["displayName"],s);const o=m(t,["description"]);o!=null&&p(e,["description"],o);const l=m(t,["version"]);l!=null&&p(e,["version"],l);const u=m(t,["_self"]);u!=null&&p(e,["tunedModelInfo"],lO(u));const d=m(t,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const h=m(t,["outputTokenLimit"]);h!=null&&p(e,["outputTokenLimit"],h);const f=m(t,["supportedGenerationMethods"]);return f!=null&&p(e,["supportedActions"],f),e}function Nh(t){const e={},n=m(t,["name"]);n!=null&&p(e,["name"],n);const s=m(t,["displayName"]);s!=null&&p(e,["displayName"],s);const o=m(t,["description"]);o!=null&&p(e,["description"],o);const l=m(t,["versionId"]);l!=null&&p(e,["version"],l);const u=m(t,["deployedModels"]);if(u!=null){let b=u;Array.isArray(b)&&(b=b.map(T=>c2(T))),p(e,["endpoints"],b)}const d=m(t,["labels"]);d!=null&&p(e,["labels"],d);const h=m(t,["_self"]);h!=null&&p(e,["tunedModelInfo"],uO(h));const f=m(t,["defaultCheckpointId"]);f!=null&&p(e,["defaultCheckpointId"],f);const y=m(t,["checkpoints"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(T=>T)),p(e,["checkpoints"],b)}return e}function J2(t){const e={},n=m(t,["functionCall"]);n!=null&&p(e,["functionCall"],n);const s=m(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const o=m(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const l=m(t,["fileData"]);l!=null&&p(e,["fileData"],d2(l));const u=m(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&p(e,["inlineData"],UP(d));const h=m(t,["text"]);h!=null&&p(e,["text"],h);const f=m(t,["thought"]);f!=null&&p(e,["thought"],f);const y=m(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const b=m(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function Y2(t){const e={},n=m(t,["productImage"]);return n!=null&&p(e,["image"],Jn(n)),e}function W2(t,e){const n={},s=m(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const o=m(t,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","editConfig","baseSteps"],o);const l=m(t,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=m(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const h=m(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&p(e,["parameters","addWatermark"],f);const y=m(t,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const b=m(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T);const w=m(t,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),n}function X2(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["source"]);o!=null&&Z2(o,n);const l=m(e,["config"]);return l!=null&&W2(l,n),n}function Q2(t){const e={},n=m(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Qu(o))),p(e,["generatedImages"],s)}return e}function Z2(t,e){const n={},s=m(t,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const o=m(t,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],Jn(o));const l=m(t,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Y2(d))),p(e,["instances[0]","productImages"],u)}return n}function eO(t){const e={},n=m(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Jn(n));const s=m(t,["referenceId"]);s!=null&&p(e,["referenceId"],s);const o=m(t,["referenceType"]);o!=null&&p(e,["referenceType"],o);const l=m(t,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],K2(l));const u=m(t,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],FP(u));const d=m(t,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const h=m(t,["subjectImageConfig"]);return h!=null&&p(e,["subjectImageConfig"],h),e}function Sw(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const s=m(t,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const o=m(t,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function Tw(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const s=m(t,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const o=m(t,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function tO(t){const e={},n=m(t,["category"]);if(n!=null&&p(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(t,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function nO(t){const e={},n=m(t,["image"]);return n!=null&&p(e,["image"],Jn(n)),e}function iO(t,e){const n={},s=m(t,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const o=m(t,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const l=m(t,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const u=m(t,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const d=m(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const h=m(t,["labels"]);return e!==void 0&&h!=null&&p(e,["labels"],h),n}function sO(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["source"]);o!=null&&oO(o,n);const l=m(e,["config"]);return l!=null&&iO(l,n),n}function rO(t){const e={},n=m(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>D2(o))),p(e,["generatedMasks"],s)}return e}function oO(t,e){const n={},s=m(t,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const o=m(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Jn(o));const l=m(t,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],nO(l)),n}function xw(t){const e={},n=m(t,["languageCode"]);n!=null&&p(e,["languageCode"],n);const s=m(t,["voiceConfig"]);if(s!=null&&p(e,["voiceConfig"],s),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function aO(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>y)),p(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=m(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const o=m(t,["googleMaps"]);o!=null&&p(e,["googleMaps"],V2(o));const l=m(t,["computerUse"]);l!=null&&p(e,["computerUse"],l);const u=m(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],B2(d));const h=m(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function ww(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let b=n;Array.isArray(b)&&(b=b.map(T=>f2(T))),p(e,["functionDeclarations"],b)}const s=m(t,["retrieval"]);s!=null&&p(e,["retrieval"],s);const o=m(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const l=m(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=m(t,["computerUse"]);u!=null&&p(e,["computerUse"],u);const d=m(t,["codeExecution"]);d!=null&&p(e,["codeExecution"],d);const h=m(t,["enterpriseWebSearch"]);h!=null&&p(e,["enterpriseWebSearch"],h);const f=m(t,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const y=m(t,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function lO(t){const e={},n=m(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const s=m(t,["createTime"]);s!=null&&p(e,["createTime"],s);const o=m(t,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function uO(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const s=m(t,["createTime"]);s!=null&&p(e,["createTime"],s);const o=m(t,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function cO(t,e){const n={},s=m(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const o=m(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const l=m(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),n}function dO(t,e){const n={},s=m(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const o=m(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const l=m(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),n}function fO(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","name"],We(t,s));const o=m(e,["config"]);return o!=null&&cO(o,n),n}function hO(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["config"]);return o!=null&&dO(o,n),n}function mO(t,e){const n={},s=m(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const o=m(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const l=m(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=m(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const h=m(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],f);const y=m(t,["imagePreservationFactor"]);e!==void 0&&y!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const b=m(t,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&p(e,["parameters","sampleCount"],T);const w=m(t,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),n}function pO(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["_url","model"],We(t,s));const o=m(e,["image"]);o!=null&&p(n,["instances[0]","image"],Jn(o));const l=m(e,["upscaleFactor"]);l!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],l);const u=m(e,["config"]);return u!=null&&mO(u,n),n}function gO(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const s=m(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Qu(l))),p(e,["generatedImages"],o)}return e}function yO(t){const e={},n=m(t,["uri"]);n!=null&&p(e,["uri"],n);const s=m(t,["encodedVideo"]);s!=null&&p(e,["videoBytes"],as(s));const o=m(t,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function vO(t){const e={},n=m(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const s=m(t,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],as(s));const o=m(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function bO(t){const e={},n=m(t,["image"]);n!=null&&p(e,["_self"],Jn(n));const s=m(t,["maskMode"]);return s!=null&&p(e,["maskMode"],s),e}function SO(t){const e={},n=m(t,["image"]);n!=null&&p(e,["image"],Zu(n));const s=m(t,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function TO(t){const e={},n=m(t,["image"]);n!=null&&p(e,["image"],Jn(n));const s=m(t,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function _w(t){const e={},n=m(t,["uri"]);n!=null&&p(e,["uri"],n);const s=m(t,["videoBytes"]);s!=null&&p(e,["encodedVideo"],as(s));const o=m(t,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function Ew(t){const e={},n=m(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const s=m(t,["videoBytes"]);s!=null&&p(e,["bytesBase64Encoded"],as(s));const o=m(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xO="Content-Type",wO="X-Server-Timeout",_O="User-Agent",Mh="x-goog-api-client",EO="1.28.0",CO=`google-genai-sdk/${EO}`,AO="v1beta1",RO="v1beta",DS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class NO{constructor(e){var n,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:AO,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:RO,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const o=[this.getRequestUrlInternal(n)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(n))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,o){if(n&&n.timeout||o){const l=new AbortController,u=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>l.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=u}return n&&n.extraBody!==null&&MO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async o=>(await kS(o),new Eh(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async o=>(await kS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Xr(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:h}=yield ct(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(h,{stream:!0});try{const b=JSON.parse(f);if("error"in b){const T=JSON.parse(JSON.stringify(b.error)),w=T.status,E=T.code,C=`got status: ${w}. ${JSON.stringify(b)}`;if(E>=400&&E<600)throw new Wu({message:C,status:E})}}catch(b){if(b.name==="ApiError")throw b}u+=f;let y=u.match(DS);for(;y;){const b=y[1];try{const T=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new Eh(T)),u=u.slice(y[0].length),y=u.match(DS)}catch(T){throw new Error(`exception parsing stream chunk ${b}. ${T}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=CO+" "+this.clientOptions.userAgentExtra;return e[_O]=n,e[Mh]=n,e[xO]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(wO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}async uploadFile(e,n){var s,o;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);l.sizeBytes=String(d.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;let f="";typeof e=="string"&&(f=e.replace(/[/\\]+$/,""),f=(o=f.split(/[/\\]/).pop())!==null&&o!==void 0?o:"");const y=await this.fetchUploadUrl(l,f,n);return u.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s){var o;let l={};s!=null&&s.httpOptions?l=s.httpOptions:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},n?{"X-Goog-Upload-File-Name":n}:{})};const u={file:e},d=await this.request({path:ye("upload/v1beta/files",u._url),body:JSON.stringify(u),httpMethod:"POST",httpOptions:l});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(o=d==null?void 0:d.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function kS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(s);throw n>=400&&n<600?new Wu({message:o,status:n}):new Error(o)}}function MO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const f=u[h],y=d[h];f&&typeof f=="object"&&!Array.isArray(f)&&y&&typeof y=="object"&&!Array.isArray(y)?d[h]=s(y,f):(y&&f&&typeof y!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof y}, New type: ${typeof f}. Overwriting.`),d[h]=f)}return d}const o=s(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IO="mcp_used/unknown";let DO=!1;function Cw(t){for(const e of t)if(kO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DO}function Aw(t){var e;const n=(e=t[Mh])!==null&&e!==void 0?e:"";t[Mh]=(n+` ${IO}`).trimStart()}function kO(t){return t!==null&&typeof t=="object"&&t instanceof km}function PO(t,e=100){return Xr(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield ct(t.listTools({cursor:s}));for(const u of l.tools)yield yield ct(u),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class km{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new km(e,n)}async initialize(){var e,n,s,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const y of this.mcpClients)try{for(var d=!0,h=(n=void 0,ya(PO(y))),f;f=await h.next(),e=f.done,!e;d=!0){o=f.value,d=!1;const b=o;u.push(b);const T=b.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=y}}catch(b){n={error:b}}finally{try{!d&&!e&&(s=h.return)&&await s.call(h)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),BD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:s.name,arguments:s.args},void 0,l);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OO(t,e,n){const s=new ID;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(s,o),e(s)}class LO{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=BO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const y=new Promise(N=>{f=N}),b=e.callbacks,T=function(){f({})},w=this.apiClient,E={onopen:T,onmessage:N=>{OO(w,b.onmessage,N)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(N){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(N){}},C=this.webSocketFactory.create(h,VO(u),E);C.connect(),await y;const D={setup:{model:We(this.apiClient,e.model)}};return C.send(JSON.stringify(D)),new UO(C,this.apiClient)}}class UO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=RP(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=AP(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Kr.PLAY)}pause(){this.sendPlaybackControl(Kr.PAUSE)}stop(){this.sendPlaybackControl(Kr.STOP)}resetContext(){this.sendPlaybackControl(Kr.RESET_CONTEXT)}close(){this.conn.close()}}function VO(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function BO(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function GO(t,e,n){const s=new MD;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(t.isVertexAI()){const u=IP(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class HO{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new LO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,o,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let y;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Cw(e.config.tools)&&Aw(b);const T=$O(b);if(this.apiClient.isVertexAI())y=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y);else{const te=this.apiClient.getApiKey();let ue="BidiGenerateContent",he="key";te!=null&&te.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ue="BidiGenerateContentConstrained",he="access_token"),y=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${ue}?${he}=${te}`}let w=()=>{};const E=new Promise(te=>{w=te}),C=e.callbacks,A=function(){var te;(te=C==null?void 0:C.onopen)===null||te===void 0||te.call(C),w({})},R=this.apiClient,D={onopen:A,onmessage:te=>{GO(R,C.onmessage,te)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(te){},onclose:(s=C==null?void 0:C.onclose)!==null&&s!==void 0?s:function(te){}},N=this.webSocketFactory.create(y,zO(T),D);N.connect(),await E;let G=We(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const te=this.apiClient.getProject(),ue=this.apiClient.getLocation();G=`projects/${te}/locations/${ue}/`+G}let q={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lu.AUDIO]}:e.config.responseModalities=[Lu.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],F=[];for(const te of z)if(this.isCallableTool(te)){const ue=te;F.push(await ue.tool())}else F.push(te);F.length>0&&(e.config.tools=F);const ee={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=CP(this.apiClient,ee):q=EP(this.apiClient,ee),delete q.config,N.send(JSON.stringify(q)),new FO(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jO={turnComplete:!0};class FO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Pn(n.turns),e.isVertexAI()||(s=s.map(o=>Xu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(qO)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},jO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:MP(e)}:n={realtimeInput:NP(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function zO(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function $O(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PS=10;function OS(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Qr(u)){o=!0;break}if(!o)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Qr(t){return"callTool"in t&&typeof t.callTool=="function"}function KO(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Qr(o)))!==null&&s!==void 0?s:!1}function JO(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Qr(o)))!==null&&s!==void 0?s:!1}function LS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YO extends zs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,o,l,u,d;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!KO(n)||OS(n.config))return await this.generateContentInternal(h);if(JO(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,y;const b=Pn(h.contents),T=(l=(o=(s=h.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:PS;let w=0;for(;w<T&&(f=await this.generateContentInternal(h),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,C=[];for(const A of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Qr(A)){const D=await A.callTool(f.functionCalls);C.push(...D)}w++,y={role:"user",parts:C},h.contents=Pn(h.contents),h.contents.push(E),h.contents.push(y),LS(h.config)&&(b.push(E),b.push(y))}return LS(h.config)&&(f.automaticFunctionCallingHistory=b),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),OS(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var o;let l;const u=[];if(s!=null&&s.generatedImages)for(const h of s.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=h==null?void 0:h.safetyAttributes:u.push(h);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ga(Gs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var s,o,l,u,d,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((h=(d=n.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,o;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async h=>Qr(h)?await h.tool():h)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&Cw(e.config.tools)){const h=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Aw(f),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(e){var n,s,o;const l=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Qr(u)){const d=u,h=await d.tool();for(const f of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,d)}}return l}async processAfcStream(e){var n,s,o;const l=(o=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:PS;let u=!1,d=0;const h=await this.initAfcToolsMap(e);return(function(f,y,b){var T,w;return Xr(this,arguments,function*(){for(var E,C,A,R;d<l;){u&&(d++,u=!1);const q=yield ct(f.processParamsMaybeAddMcpUsage(b)),z=yield ct(f.generateContentStreamInternal(q)),F=[],ee=[];try{for(var D=!0,N=(C=void 0,ya(z)),G;G=yield ct(N.next()),E=G.done,!E;D=!0){R=G.value,D=!1;const te=R;if(yield yield ct(te),te.candidates&&(!((T=te.candidates[0])===null||T===void 0)&&T.content)){ee.push(te.candidates[0].content);for(const ue of(w=te.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(d<l&&ue.functionCall){if(!ue.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(ue.functionCall.name)){const he=yield ct(y.get(ue.functionCall.name).callTool([ue.functionCall]));F.push(...he)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${ue.functionCall.name}`)}}}}catch(te){C={error:te}}finally{try{!D&&!E&&(A=N.return)&&(yield ct(A.call(N)))}finally{if(C)throw C.error}}if(F.length>0){u=!0;const te=new aa;te.candidates=[{content:{role:"user",parts:F}}],yield yield ct(te);const ue=[];ue.push(...ee),ue.push({role:"user",parts:F});const he=Pn(b.contents).concat(ue);b.contents=he}else break}})})(this,h,e)}async generateContentInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=NS(this.apiClient,e);return d=ye("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=IS(y),T=new aa;return Object.assign(T,b),T})}else{const f=RS(this.apiClient,e);return d=ye("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=MS(y),T=new aa;return Object.assign(T,b),T})}}async generateContentStreamInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=NS(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(b){return Xr(this,arguments,function*(){var T,w,E,C;try{for(var A=!0,R=ya(b),D;D=yield ct(R.next()),T=D.done,!T;A=!0){C=D.value,A=!1;const N=C,G=IS(yield ct(N.json()));G.sdkHttpResponse={headers:N.headers};const q=new aa;Object.assign(q,G),yield yield ct(q)}}catch(N){w={error:N}}finally{try{!A&&!T&&(E=R.return)&&(yield ct(E.call(R)))}finally{if(w)throw w.error}}})})}else{const f=RS(this.apiClient,e);return d=ye("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(b){return Xr(this,arguments,function*(){var T,w,E,C;try{for(var A=!0,R=ya(b),D;D=yield ct(R.next()),T=D.done,!T;A=!0){C=D.value,A=!1;const N=C,G=MS(yield ct(N.json()));G.sdkHttpResponse={headers:N.headers};const q=new aa;Object.assign(q,G),yield yield ct(q)}}catch(N){w={error:N}}finally{try{!A&&!T&&(E=R.return)&&(yield ct(E.call(R)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=a2(this.apiClient,e);return d=ye("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=u2(y),T=new fS;return Object.assign(T,b),T})}else{const f=o2(this.apiClient,e);return d=ye("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=l2(y),T=new fS;return Object.assign(T,b),T})}}async generateImagesInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=v2(this.apiClient,e);return d=ye("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=S2(y),T=new hS;return Object.assign(T,b),T})}else{const f=y2(this.apiClient,e);return d=ye("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=b2(y),T=new hS;return Object.assign(T,b),T})}}async editImageInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=n2(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const f=i2(h),y=new xD;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=pO(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const f=gO(h),y=new wD;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=X2(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const f=Q2(h),y=new _D;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=sO(this.apiClient,e);return l=ye("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const f=rO(h),y=new ED;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=U2(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>Nh(y))}else{const f=L2(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Rh(y))}}async listInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=F2(this.apiClient,e);return d=ye("{models_url}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=$2(y),T=new mS;return Object.assign(T,b),T})}else{const f=j2(this.apiClient,e);return d=ye("{models_url}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=z2(y),T=new mS;return Object.assign(T,b),T})}}async update(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=hO(this.apiClient,e);return d=ye("{model}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>Nh(y))}else{const f=fO(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>Rh(y))}}async delete(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=QP(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=e2(y),T=new pS;return Object.assign(T,b),T})}else{const f=XP(this.apiClient,e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=ZP(y),T=new pS;return Object.assign(T,b),T})}}async countTokens(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=JP(this.apiClient,e);return d=ye("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=WP(y),T=new gS;return Object.assign(T,b),T})}else{const f=KP(this.apiClient,e);return d=ye("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=YP(y),T=new gS;return Object.assign(T,b),T})}}async computeTokens(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=qP(this.apiClient,e);return l=ye("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>{const f=GP(h),y=new CD;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=C2(this.apiClient,e);return d=ye("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u.then(y=>{const b=_2(y),T=new Uu;return Object.assign(T,b),T})}else{const f=E2(this.apiClient,e);return d=ye("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u.then(y=>{const b=w2(y),T=new Uu;return Object.assign(T,b),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WO extends zs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=bD(e);return d=ye("{operationName}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),u}else{const f=vD(e);return d=ye("{operationName}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=dD(e);return l=ye("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XO(t){const e={},n=m(t,["data"]);if(n!=null&&p(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function QO(t){const e={},n=m(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>oL(l))),p(e,["parts"],o)}const s=m(t,["role"]);return s!=null&&p(e,["role"],s),e}function ZO(t,e,n){const s={},o=m(e,["expireTime"]);n!==void 0&&o!=null&&p(n,["expireTime"],o);const l=m(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&p(n,["newSessionExpireTime"],l);const u=m(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const d=m(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&p(n,["bidiGenerateContentSetup"],rL(t,d));const h=m(e,["lockAdditionalFields"]);return n!==void 0&&h!=null&&p(n,["fieldMask"],h),s}function eL(t,e){const n={},s=m(e,["config"]);return s!=null&&p(n,["config"],ZO(t,s,n)),n}function tL(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const s=m(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function nL(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function iL(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sL(t,e){const n={},s=m(t,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const o=m(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const l=m(t,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=m(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=m(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const h=m(t,["maxOutputTokens"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","maxOutputTokens"],h);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","mediaResolution"],f);const y=m(t,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const b=m(t,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Dm(b));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const w=m(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const E=m(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],QO(zt(E)));const C=m(t,["tools"]);if(e!==void 0&&C!=null){let z=ao(C);Array.isArray(z)&&(z=z.map(F=>lL(oo(F)))),p(e,["setup","tools"],z)}const A=m(t,["sessionResumption"]);e!==void 0&&A!=null&&p(e,["setup","sessionResumption"],aL(A));const R=m(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const D=m(t,["outputAudioTranscription"]);e!==void 0&&D!=null&&p(e,["setup","outputAudioTranscription"],D);const N=m(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&p(e,["setup","realtimeInputConfig"],N);const G=m(t,["contextWindowCompression"]);e!==void 0&&G!=null&&p(e,["setup","contextWindowCompression"],G);const q=m(t,["proactivity"]);return e!==void 0&&q!=null&&p(e,["setup","proactivity"],q),n}function rL(t,e){const n={},s=m(e,["model"]);s!=null&&p(n,["setup","model"],We(t,s));const o=m(e,["config"]);return o!=null&&p(n,["config"],sL(o,n)),n}function oL(t){const e={},n=m(t,["functionCall"]);n!=null&&p(e,["functionCall"],n);const s=m(t,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const o=m(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const l=m(t,["fileData"]);l!=null&&p(e,["fileData"],tL(l));const u=m(t,["functionResponse"]);u!=null&&p(e,["functionResponse"],u);const d=m(t,["inlineData"]);d!=null&&p(e,["inlineData"],XO(d));const h=m(t,["text"]);h!=null&&p(e,["text"],h);const f=m(t,["thought"]);f!=null&&p(e,["thought"],f);const y=m(t,["thoughtSignature"]);y!=null&&p(e,["thoughtSignature"],y);const b=m(t,["videoMetadata"]);return b!=null&&p(e,["videoMetadata"],b),e}function aL(t){const e={},n=m(t,["handle"]);if(n!=null&&p(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lL(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>y)),p(e,["functionDeclarations"],f)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=m(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const o=m(t,["googleMaps"]);o!=null&&p(e,["googleMaps"],nL(o));const l=m(t,["computerUse"]);l!=null&&p(e,["computerUse"],l);const u=m(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleSearch"]);d!=null&&p(e,["googleSearch"],iL(d));const h=m(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uL(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${n}.${l}`);e.push(...o)}else e.push(n)}return e.join(",")}function cL(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const l=uL(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(f=>u.includes(f)?`generationConfig.${f}`:f));const h=[];l&&h.push(l),d.length>0&&h.push(...d),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class dL extends zs{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=eL(this.apiClient,e);l=ye("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const h=cL(d,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fL(t,e){const n={},s=m(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function hL(t,e){const n={},s=m(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function mL(t,e,n){const s={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=m(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=m(t,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=m(t,["learningRateMultiplier"]);if(u!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=m(t,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const h=m(t,["learningRate"]);if(e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","learningRate"],h),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function pL(t,e,n){const s={};let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=m(t,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],US(w))}else if(o==="PREFERENCE_TUNING"){const w=m(t,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],US(w))}const l=m(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=m(t,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=m(t,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=m(t,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=m(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=m(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=m(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=m(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(f==="PREFERENCE_TUNING"){const w=m(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let y=m(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const w=m(t,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(y==="PREFERENCE_TUNING"){const w=m(t,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=m(t,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const T=m(t,["beta"]);return e!==void 0&&T!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function gL(t,e){const n={},s=m(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const o=m(t,["preTunedModel"]);o!=null&&p(n,["preTunedModel"],o);const l=m(t,["trainingDataset"]);l!=null&&AL(l);const u=m(t,["config"]);return u!=null&&mL(u,n),n}function yL(t,e){const n={},s=m(t,["baseModel"]);s!=null&&p(n,["baseModel"],s);const o=m(t,["preTunedModel"]);o!=null&&p(n,["preTunedModel"],o);const l=m(t,["trainingDataset"]);l!=null&&RL(l,n,e);const u=m(t,["config"]);return u!=null&&pL(u,n,e),n}function vL(t,e){const n={},s=m(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function bL(t,e){const n={},s=m(t,["name"]);return s!=null&&p(n,["_url","name"],s),n}function SL(t,e,n){const s={},o=m(t,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const l=m(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=m(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function TL(t,e,n){const s={},o=m(t,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const l=m(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=m(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function xL(t,e){const n={},s=m(t,["config"]);return s!=null&&SL(s,n),n}function wL(t,e){const n={},s=m(t,["config"]);return s!=null&&TL(s,n),n}function _L(t,e){const n={},s=m(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const o=m(t,["nextPageToken"]);o!=null&&p(n,["nextPageToken"],o);const l=m(t,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Rw(d))),p(n,["tuningJobs"],u)}return n}function EL(t,e){const n={},s=m(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const o=m(t,["nextPageToken"]);o!=null&&p(n,["nextPageToken"],o);const l=m(t,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Ih(d))),p(n,["tuningJobs"],u)}return n}function CL(t,e){const n={},s=m(t,["name"]);s!=null&&p(n,["model"],s);const o=m(t,["name"]);return o!=null&&p(n,["endpoint"],o),n}function AL(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=m(t,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(n,["examples","examples"],o)}return n}function RL(t,e,n){const s={};let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=m(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=m(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=m(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=m(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=m(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Rw(t,e){const n={},s=m(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const o=m(t,["name"]);o!=null&&p(n,["name"],o);const l=m(t,["state"]);l!=null&&p(n,["state"],uw(l));const u=m(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=m(t,["tuningTask","startTime"]);d!=null&&p(n,["startTime"],d);const h=m(t,["tuningTask","completeTime"]);h!=null&&p(n,["endTime"],h);const f=m(t,["updateTime"]);f!=null&&p(n,["updateTime"],f);const y=m(t,["description"]);y!=null&&p(n,["description"],y);const b=m(t,["baseModel"]);b!=null&&p(n,["baseModel"],b);const T=m(t,["_self"]);return T!=null&&p(n,["tunedModel"],CL(T)),n}function Ih(t,e){const n={},s=m(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const o=m(t,["name"]);o!=null&&p(n,["name"],o);const l=m(t,["state"]);l!=null&&p(n,["state"],uw(l));const u=m(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=m(t,["startTime"]);d!=null&&p(n,["startTime"],d);const h=m(t,["endTime"]);h!=null&&p(n,["endTime"],h);const f=m(t,["updateTime"]);f!=null&&p(n,["updateTime"],f);const y=m(t,["error"]);y!=null&&p(n,["error"],y);const b=m(t,["description"]);b!=null&&p(n,["description"],b);const T=m(t,["baseModel"]);T!=null&&p(n,["baseModel"],T);const w=m(t,["tunedModel"]);w!=null&&p(n,["tunedModel"],w);const E=m(t,["preTunedModel"]);E!=null&&p(n,["preTunedModel"],E);const C=m(t,["supervisedTuningSpec"]);C!=null&&p(n,["supervisedTuningSpec"],C);const A=m(t,["preferenceOptimizationSpec"]);A!=null&&p(n,["preferenceOptimizationSpec"],A);const R=m(t,["tuningDataStats"]);R!=null&&p(n,["tuningDataStats"],R);const D=m(t,["encryptionSpec"]);D!=null&&p(n,["encryptionSpec"],D);const N=m(t,["partnerModelTuningSpec"]);N!=null&&p(n,["partnerModelTuningSpec"],N);const G=m(t,["customBaseModel"]);G!=null&&p(n,["customBaseModel"],G);const q=m(t,["experiment"]);q!=null&&p(n,["experiment"],q);const z=m(t,["labels"]);z!=null&&p(n,["labels"],z);const F=m(t,["outputUri"]);F!=null&&p(n,["outputUri"],F);const ee=m(t,["pipelineJob"]);ee!=null&&p(n,["pipelineJob"],ee);const te=m(t,["serviceAccount"]);te!=null&&p(n,["serviceAccount"],te);const ue=m(t,["tunedModelDisplayName"]);ue!=null&&p(n,["tunedModelDisplayName"],ue);const he=m(t,["veoTuningSpec"]);return he!=null&&p(n,["veoTuningSpec"],he),n}function NL(t,e){const n={},s=m(t,["sdkHttpResponse"]);s!=null&&p(n,["sdkHttpResponse"],s);const o=m(t,["name"]);o!=null&&p(n,["name"],o);const l=m(t,["metadata"]);l!=null&&p(n,["metadata"],l);const u=m(t,["done"]);u!=null&&p(n,["done"],u);const d=m(t,["error"]);return d!=null&&p(n,["error"],d),n}function US(t,e){const n={},s=m(t,["gcsUri"]);s!=null&&p(n,["validationDatasetUri"],s);const o=m(t,["vertexDatasetResource"]);return o!=null&&p(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ML extends zs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ga(Gs.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),l=await this.tuneMldevInternal(o);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:_h.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=bL(e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Ih(y))}else{const f=vL(e);return d=ye("{name}",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>Rw(y))}}async listInternal(e){var n,s,o,l;let u,d="",h={};if(this.apiClient.isVertexAI()){const f=wL(e);return d=ye("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=EL(y),T=new yS;return Object.assign(T,b),T})}else{const f=xL(e);return d=ye("tunedModels",f._url),h=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:y.headers},T})),u.then(y=>{const b=_L(y),T=new yS;return Object.assign(T,b),T})}}async cancel(e){var n,s,o,l;let u="",d={};if(this.apiClient.isVertexAI()){const h=hL(e);u=ye("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=fL(e);u=ye("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=yL(e,e);return l=ye("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>Ih(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gL(e);return l=ye("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(f=>{const y=f;return y.sdkHttpResponse={headers:h.headers},y})),o.then(h=>NL(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IL{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const DL=1024*1024*8,kL=3,PL=1e3,OL=2,Vf="x-goog-upload-status";async function LL(t,e,n){var s,o,l;let u=0,d=0,h=new Eh(new Response),f="upload";for(u=t.size;d<u;){const b=Math.min(DL,u-d),T=t.slice(d,d+b);d+b>=u&&(f+=", finalize");let w=0,E=PL;for(;w<kL&&(h=await n.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(d),"Content-Length":String(b)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Vf]));)w++,await VL(E),E=E*OL;if(d+=b,((o=h==null?void 0:h.headers)===null||o===void 0?void 0:o[Vf])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(h==null?void 0:h.json());if(((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[Vf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function UL(t){return{size:t.size,type:t.type}}function VL(t){return new Promise(e=>setTimeout(e,t))}class BL{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LL(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qL{create(e,n,s){return new GL(e,n,s)}}class GL{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VS="x-goog-api-key";class HL{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(VS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jL="gl-node/";class FL{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=uD(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new HL(this.apiKey);this.apiClient=new NO({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:jL+"web",uploader:new BL,downloader:new IL}),this.models=new YO(this.apiClient),this.live=new HO(this.apiClient,o,new qL),this.batches=new Rk(this.apiClient),this.chats=new oP(this.models,this.apiClient),this.caches=new iP(this.apiClient),this.files=new gP(this.apiClient),this.operations=new WO(this.apiClient),this.authTokens=new dL(this.apiClient),this.tunings=new ML(this.apiClient)}}var Bf={};const zL=()=>Bf.API_KEY||Bf.GOOGLE_API_KEY||Bf.GEMINI_API_KEY||(typeof window<"u"?window.GEMINI_API_KEY:void 0),BS=zL(),Wt=BS?new FL({apiKey:BS}):null,$s=()=>Wt!==null;function cu(t){return JSON.parse(JSON.stringify(t))}const $L={characters:[{id:"char-1",name:"Subject A",x:400,y:225}],cameraAngle:"true-eye, honest",cameraHeight:"eye-level witness"},KL={keyLightIntensity:80,keyLightColor:"#FFD8A8",fillLightIntensity:40,fillLightColor:"#89CFF0",backLightIntensity:60,backLightColor:"#FACC15",ambientIntensity:20,colorTemperature:4500,mood:"chiaroscuro confession"},JL={colorGrade:"Dreamer Grade",saturation:10,contrast:5,highlights:5,shadows:-5,colorPalette:["#0F172A","#1E293B","#475569","#F97316","#FBBF24","#FDE68A","#38BDF8","#A855F7"],colorHarmony:"complementary pulse"},YL={movementType:"static contemplation",startPos:{x:100,y:300},endPos:{x:700,y:150},duration:5,easing:"ease-in-out",focalLength:35},WL=async t=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),null;try{const n=(await Wt.models.generateContent({model:"gemini-2.5-pro",contents:`Analyze this document and extract cinematographic knowledge. Focus on key themes, visual styles, common character archetypes, and specific filmmaking techniques mentioned or implied.

DOCUMENT:
${t.substring(0,8e3)}`,config:{responseMimeType:"application/json",responseSchema:{type:de.OBJECT,properties:{themes:{type:de.ARRAY,items:{type:de.STRING},description:"Key thematic elements."},visualStyles:{type:de.ARRAY,items:{type:de.STRING},description:"Visual or stylistic approaches."},characters:{type:de.ARRAY,items:{type:de.STRING},description:"Character archetypes or roles."},techniques:{type:de.ARRAY,items:{type:de.STRING},description:"Filmmaking techniques or concepts."}},required:["themes","visualStyles","characters","techniques"]},thinkingConfig:{thinkingBudget:32768}}})).text.trim();return JSON.parse(n)}catch(e){return XI.error("Knowledge extraction failed:",iw(e)),null}},XL=async(t,e,n=[])=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),[];try{await ei.initialize();const s=await ei.analyzeNarrative(t),o=`${t}

NARRATIVE ANALYSIS (Local AI):
Genre: ${s.genre}
Emotional Tone: ${s.emotionalTone}
Visual Cues: ${s.visualCues.join(", ")}
Narrative Elements: ${s.narrativeElements.join(", ")}`;return(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`You are Dreamer, a visionary cinematography AI. Your voice is poetic, insightful, and steeped in film theory.
            Your task is to provide 3-5 creative, professional suggestions for the current question.
            Critically analyze all the context provided (the user's script, their previous answers, the cinematic knowledge base, and the local AI narrative analysis).
            Synthesize these elements to generate suggestions that are not just creative, but are deeply relevant to the user's established world and themes.
            Each suggestion must be a concise, actionable answer that directly addresses the question.
            When possible, reference specific techniques from the knowledge base that would enhance this particular question/answer.

            CONTEXT:
            ${o}

            CURRENT QUESTION:
            "${e}"`,config:{thinkingConfig:{thinkingBudget:8192}}})).text.split(`
`).map(d=>d.trim().replace(/^- /,"").replace(/^\* /,"").replace(/^\d+\. /,"")).filter(Boolean)}catch(s){return an(s,"Get AI Suggestions"),[]}},QL=async(t,e)=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),"Inspiration is brewing... (AI service not available)";try{return(await Wt.models.generateContent({model:"gemini-flash-lite-latest",contents:`You are a creative assistant. Based on the core idea of the scene, provide one, single, concise, and inspiring suggestion for the following question. The suggestion should be a fresh take but still relevant to the scene's context. Return only the suggestion text itself.

            SCENE CONTEXT:
            "${t}"

            CURRENT QUESTION:
            "${e}"`})).text.trim()}catch(n){return an(n,"Get Random Inspiration"),"A lone figure against a vast, empty landscape."}},ZL=async(t,e,n=[])=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),{suggestions:[],relevantKnowledge:[]};try{await ei.initialize();const s=await ei.analyzeNarrative(t),o=[],l=[];n.forEach(y=>{var C,A,R;const b=((C=y.extractedKnowledge)==null?void 0:C.themes)||[],T=((A=y.extractedKnowledge)==null?void 0:A.techniques)||[],w=((R=y.extractedKnowledge)==null?void 0:R.visualStyles)||[];(b.some(D=>s.narrativeElements.some(N=>N.toLowerCase().includes(D.toLowerCase())))||w.some(D=>s.visualCues.some(N=>N.toLowerCase().includes(D.toLowerCase()))))&&T.length>0&&(o.push(`${y.name}: ${T.slice(0,2).join(", ")}`),T.slice(0,2).forEach(D=>{const N=`Apply ${D.toLowerCase()} for enhanced visual impact`;l.includes(N)||l.push(N)}))});const u=`${t}

RELEVANT KNOWLEDGE: ${o.join(" | ")}
NARRATIVE TYPE: ${s.genre} (${s.emotionalTone})`,h=(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Based on this narrative context and relevant cinematic knowledge, provide 2-3 specific suggestions for: "${e}"

                Context: ${u}
                
                Focus on actionable, technical suggestions that directly apply the relevant knowledge. Be concise and specific.`})).text.split(`
`).map(y=>y.trim().replace(/^- /,"").replace(/^\* /,"")).filter(Boolean);return{suggestions:[...l,...h].slice(0,5),relevantKnowledge:o}}catch(s){return an(s,"Knowledge-Based Suggestions"),{suggestions:[],relevantKnowledge:[]}}},eU=async(t,e)=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),t;try{return(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`You are a world-class cinematographer AI with a deep understanding of film theory and practice.
            Your task is to refine the following cinematic shot prompt.
            1.  Preserve all mission-critical technical settings from the base prompt (camera, lens, etc.).
            2.  Elevate the language to be more evocative, clear, and director-ready.
            3.  Weave in continuity cues from the provided context (previous shots, overall script).
            4.  Leverage advanced cinematic terminology from your knowledge base where appropriate to add professional depth.
            Return only the single, enhanced prompt, without any introductory text.

            CONTEXT:
            ${e}

            BASE PROMPT:
            ${t}`,config:{thinkingConfig:{thinkingBudget:8192}}})).text}catch(n){throw an(n,"Shot Enhancement"),new Error("Failed to enhance prompt.")}},tU=async t=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),["Story generation unavailable - AI service not configured"];try{return(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Based on this cinematic concept: "${t}"

Generate 3-5 creative scene descriptions that expand this idea into vivid, director-level prompts. Each should be 1-2 sentences and capture mood, character, and visual atmosphere. Format them as separate paragraphs, separated by a double newline.`,config:{thinkingConfig:{thinkingBudget:8192}}})).text.split(/\n\n+/).map(s=>s.trim()).filter(Boolean)}catch(e){return an(e,"Story Generation"),[]}},nU=async(t,e="cinematic",n="")=>{if(!$s())return console.warn("Gemini AI service not available - no API key configured"),[];try{const s=n.trim()?`

CUSTOM INSTRUCTIONS:
${n}

Please incorporate these specific instructions into your storyboard generation, adjusting the visual style, composition, lighting, and overall approach accordingly while maintaining the core narrative.`:"",o=`Act as a 'Professional Storyboard Maker'. Convert the following script into a visual storyboard. For each screenplay line, generate a detailed shot prompt representing 2.5-3 seconds of screen time. Break down long lines into multiple impactful shots. Suggest keyframes, advanced camera movements, framing, composition, and lighting mood. Maintain a professional, industry-standard tone.${s}

SCRIPT:
${t}`,l=`Act as an 'Explainer Video Storyboard Artist'. Your task is to break down the provided script into a sequence of shots for an engaging explainer video. Each shot should correspond to roughly 3-3.5 seconds of narration. Assuming an average speaking rate of 150 words per minute (2.5 words per second), each shot should visualize a segment of about 8-9 words from the script. For each segment, create a clear shot description focusing on simple, effective visuals that illustrate the narration. The shot details should be geared towards clean, modern illustrations, not photorealism. Avoid complex cinematic jargon. The goal is clarity and communication.${s}

SCRIPT:
${t}`,u=e==="explainer"?l:o;console.log(" Starting storyboard generation with optimized settings...");let h=(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:u,config:{responseMimeType:"application/json",responseSchema:{type:de.ARRAY,items:{type:de.OBJECT,properties:{screenplayLine:{type:de.STRING,description:"The formatted screenplay line (e.g., INT. ROOM - DAY, ACTION, CHARACTER, DIALOGUE)."},shotDetails:{type:de.OBJECT,properties:{shotType:{type:de.STRING,description:"Shot Type/Size (e.g., Close-Up, Wide Shot)."},cameraAngle:{type:de.STRING,description:"Camera Angle (e.g., Low Angle, Dutch Tilt)."},description:{type:de.STRING,description:"Action/Subject Description."},lightingMood:{type:de.STRING,description:"Key Lighting/Mood."},cameraMovement:{type:de.STRING,description:"Camera movement (e.g., Dolly In, Pan Left, Steadicam Follow)."}}}}}},thinkingConfig:{thinkingBudget:8192}}})).text.trim();const f=h.match(/```json\s*([\s\S]*?)\s*```/);if(f&&f[1])h=f[1];else{const b=h.indexOf("["),T=h.indexOf("{");let w=-1;if(b===-1?w=T:T===-1?w=b:w=Math.min(b,T),w!==-1){const E=h.lastIndexOf("]"),C=h.lastIndexOf("}"),A=Math.max(E,C);A>w&&(h=h.substring(w,A+1))}}const y=JSON.parse(h);if(Array.isArray(y))return y;if(typeof y=="object"&&y!==null)return[y];throw new Error("Failed to parse storyboard: result was not an array or object.")}catch(s){throw an(s,"Storyboard Generation"),new Error("Failed to generate or parse storyboard JSON from API response.")}},iU=async(t,e)=>{try{const s=(await Wt.models.generateContent({model:"gemini-2.5-pro",contents:`You are a world-class Director of Photography, transforming a simple explainer video concept into a full-fledged cinematic shot.
            
            Analyze the provided simple shot description and the cinematic knowledge base. Your task is to completely rewrite the 'shotDetails' to be evocative, professional, and visually rich.
            
            - **Elevate the Language:** Use strong, descriptive verbs and professional cinematography terms.
            - **Incorporate Theory:** Weave in concepts from the knowledge base regarding lighting, composition, and camera movement.
            - **Add Specificity:** Suggest a specific lens, f-stop, or lighting setup if it serves the mood.
            - **Maintain Core Idea:** The cinematic shot must still convey the core subject of the original explainer shot.
            
            **CINEMATIC KNOWLEDGE BASE:**
            ---
            ${e.substring(0,1e4)} 
            ---
            
            **ORIGINAL EXPLAINER SHOT:**
            ${JSON.stringify(t,null,2)}
            
            Return ONLY the rewritten JSON for the entire StoryboardShot object, with the updated shotDetails. Do not include any other text or markdown formatting. The output must be a single, valid JSON object.`,config:{responseMimeType:"application/json",responseSchema:{type:de.OBJECT,properties:{screenplayLine:{type:de.STRING,description:"The original, unchanged screenplay line."},shotDetails:{type:de.OBJECT,properties:{shotType:{type:de.STRING,description:"A more cinematic Shot Type/Size (e.g., 'Intimate Close-Up', 'Sweeping Wide Shot')."},cameraAngle:{type:de.STRING,description:"A more cinematic Camera Angle (e.g., 'Low Angle Reverence', 'Dutch Tilt for unease')."},description:{type:de.STRING,description:"A rewritten, evocative Action/Subject Description with more detail."},lightingMood:{type:de.STRING,description:"A specific and moody Key Lighting/Mood (e.g., 'Chiaroscuro with volumetric dust motes')."},cameraMovement:{type:de.STRING,description:"A more descriptive camera movement (e.g., 'Slow Dolly In to heighten tension', 'Steadicam Follow with a slight tremor')."}},required:["shotType","cameraAngle","description","lightingMood","cameraMovement"]}},required:["screenplayLine","shotDetails"]},thinkingConfig:{thinkingBudget:32768}}})).text.trim();return JSON.parse(s)}catch(n){throw an(n,"Make Prompt Cinematic"),new Error("Failed to enhance explainer prompt into a cinematic one.")}},sU=async(t,e,n)=>{try{let s;const o={parts:[]};if(e){s=`As a master cinematographer, analyze the provided still image and its original prompt. Your task is to generate a concise, powerful video prompt for a text-to-video AI (like Sora or Veo) that brings this static scene to life.

            ORIGINAL PROMPT:
            "${t}"

            USER INSTRUCTIONS FOR MOTION (if any):
            "${n||"None provided. Use your creative expertise to suggest a compelling camera movement that enhances the scene's emotional core."}"

            Based on the image's composition, mood, and the provided context, describe the initial action or subtle movement. Suggest a camera motion (e.g., slow dolly in, gentle pan left, static shot with atmospheric changes). Describe how the scene should evolve over a short clip.

            Return only the final video prompt, ready to be used.`;const u={inlineData:{mimeType:e.mimeType,data:e.base64}};o.parts.push(u)}else s=`As a master cinematographer, analyze the provided cinematic prompt. Your task is to generate a concise, powerful video prompt for a text-to-video AI (like Sora or Veo) that imagines this scene in motion.

            ORIGINAL PROMPT:
            "${t}"

            USER INSTRUCTIONS FOR MOTION (if any):
            "${n||"None provided. Use your creative expertise to suggest a compelling camera movement that enhances the scene's emotional core."}"

            Based on the prompt's description, mood, and technical details, describe a compelling camera motion (e.g., slow dolly in, gentle pan left, static shot with atmospheric changes) and any initial character or environmental action. Describe how the scene should evolve over a short clip.

            Return only the final video prompt, ready to be used.`;return o.parts.push({text:s}),(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:o,config:{thinkingConfig:{thinkingBudget:8192}}})).text.trim()}catch(s){throw an(s,"Video Prompt Generation"),new Error("Failed to generate video prompt.")}},rU=async t=>{try{return(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`You are Dreamer, an expert film editor AI grounded in cinematic theory (Walter Murch's Rule of Six, etc.). Analyze the provided storyboard context and suggest a professional, creative edit or transition.
            
            CONTEXT:
            ${t}
            
            Based on this, provide a single, actionable suggestion. For example: "Suggest a match cut from the character's hand to a similar shape in the next shot to create a strong visual link." or "A J-cut here would build anticipation before the reveal."
            
            Return only the suggestion.`,config:{thinkingConfig:{thinkingBudget:4096}}})).text.trim()}catch(e){return an(e,"Timeline Suggestion"),"Suggestion failed."}},oU=async t=>{try{const n=(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Analyze the following cinematic shot prompts to determine the sequence's overall "Visual DNA".
            
            PROMPTS:
            ${t.join(`

`)}
            
            Based on the prompts, provide a summary of the visual style, a likely color palette, and the dominant mood.`,config:{responseMimeType:"application/json",responseSchema:{type:de.OBJECT,properties:{visualDNA:{type:de.STRING,description:"A summary of the core visual style (e.g., 'Handheld emotional realism with shallow depth of field')."},colorPalette:{type:de.STRING,description:"The likely color palette (e.g., 'Desaturated blues and cold tungsten highlights')."},mood:{type:de.STRING,description:"The dominant mood of the sequence (e.g., 'Melancholic and introspective')."}},required:["visualDNA","colorPalette","mood"]},thinkingConfig:{thinkingBudget:4096}}})).text.trim();return JSON.parse(n)}catch(e){return an(e,"Sequence Style Analysis"),{visualDNA:"Analysis failed.",colorPalette:"N/A",mood:"N/A"}}},aU=async(t,e)=>{try{return(await Wt.models.generateContent({model:"gemini-2.0-flash-exp",contents:`Generate a concise, cinematic B-roll or establishing shot prompt. It should be atmospheric and relevant to the surrounding scene context.
            
            CONTEXT OF SURROUNDING SHOTS:
            ${t}
            
            ${e?`Adhere to the established sequence style:
            - Visual DNA: ${e.visualDNA}
            - Color Palette: ${e.colorPalette}
            - Mood: ${e.mood}`:"Establish a compelling visual mood."}
            
            Return only the prompt text.`})).text.trim()}catch(n){return an(n,"B-roll Generation"),"An atmospheric shot of rain on a window pane."}},qS=async t=>{try{const e=t.composition.characters.length>0?`Characters are positioned as follows: ${t.composition.characters.map(s=>`${s.name} at coordinates (X: ${Math.round(s.x)}, Y: ${Math.round(s.y)})`).join(", ")}.`:"There are no characters in the frame.";return(await Wt.models.generateContent({model:"gemini-2.5-flash",contents:`You are a master cinematographer. Based on the following structured visual data, write a single, evocative, cinematic paragraph describing the scene. Focus on composition, character placement, lighting mood, color theory, and camera work. Do not list the data; interpret it into a holistic description.

            DATA:
            - Composition: ${e} The camera is at ${t.composition.cameraHeight} with a ${t.composition.cameraAngle} angle.
            - Lighting: The mood is ${t.lighting.mood}. Key light is at ${t.lighting.keyLightIntensity}% intensity with a color of ${t.lighting.keyLightColor}. The scene has a color temperature of ${t.lighting.colorTemperature}K.
            - Color: The grade is named "${t.color.colorGrade}" with a ${t.color.colorHarmony} harmony. Saturation is at ${t.color.saturation} and contrast is ${t.color.contrast}.
            - Camera Movement: The camera performs a ${t.camera.movementType} over ${t.camera.duration} seconds with ${t.camera.easing} easing, moving from (${t.camera.startPos.x}, ${t.camera.startPos.y}) to (${t.camera.endPos.x}, ${t.camera.endPos.y}). The focal length is ${t.camera.focalLength}mm.`})).text.trim()}catch(e){return an(e,"Smart Visual Description"),"A visually compelling scene with detailed cinematography."}},lU=async t=>{try{const n=(await Wt.models.generateContent({model:"gemini-2.5-flash",contents:`You are a cinematic pre-visualization expert. Based on the following storyboard shot description, generate a complete set of initial visual parameters. Provide reasonable, professional starting points for a visual editor.

            SHOT DETAILS:
            - Shot Type: ${t.shotDetails.shotType}
            - Camera Angle: ${t.shotDetails.cameraAngle}
            - Description: ${t.shotDetails.description}
            - Lighting Mood: ${t.shotDetails.lightingMood}
            - Camera Movement: ${t.shotDetails.cameraMovement}

            Return a JSON object with the exact structure specified below. Do not include any other text or markdown formatting. The output must be a single, valid JSON object.
            `,config:{responseMimeType:"application/json",responseSchema:{type:de.OBJECT,properties:{composition:{type:de.OBJECT,properties:{characters:{type:de.ARRAY,items:{type:de.OBJECT,properties:{id:{type:de.STRING},name:{type:de.STRING},x:{type:de.NUMBER},y:{type:de.NUMBER}}},description:"One or two default characters placed according to the description."},cameraAngle:{type:de.STRING,description:"One of the following: 'true-eye, honest', 'steep reverence', 'whispered low', 'Dutch slip'. Choose the most fitting."},cameraHeight:{type:de.STRING,description:"One of the following: 'ground-level soul gaze', 'eye-level witness', 'elevated guardian', 'angelic drift'. Choose the most fitting."}}},lighting:{type:de.OBJECT,properties:{keyLightIntensity:{type:de.NUMBER,description:"Value from 0-100."},keyLightColor:{type:de.STRING,description:"Hex color code."},fillLightIntensity:{type:de.NUMBER,description:"Value from 0-100."},fillLightColor:{type:de.STRING,description:"Hex color code."},backLightIntensity:{type:de.NUMBER,description:"Value from 0-100."},backLightColor:{type:de.STRING,description:"Hex color code."},ambientIntensity:{type:de.NUMBER,description:"Value from 0-100."},colorTemperature:{type:de.NUMBER,description:"Value from 2000-8000."},mood:{type:de.STRING,description:"The provided lighting mood string."}}},color:{type:de.OBJECT,properties:{colorGrade:{type:de.STRING,description:"A creative name for the color grade."},saturation:{type:de.NUMBER,description:"Value from -50 to 50."},contrast:{type:de.NUMBER,description:"Value from -50 to 50."},highlights:{type:de.NUMBER,description:"Value from -50 to 50."},shadows:{type:de.NUMBER,description:"Value from -50 to 50."},colorPalette:{type:de.ARRAY,items:{type:de.STRING},description:"An array of 8 hex color codes."},colorHarmony:{type:de.STRING,description:"One of the predefined harmony options."}}},camera:{type:de.OBJECT,properties:{movementType:{type:de.STRING,description:"One of the predefined movement types."},startPos:{type:de.OBJECT,properties:{x:{type:de.NUMBER},y:{type:de.NUMBER}}},endPos:{type:de.OBJECT,properties:{x:{type:de.NUMBER},y:{type:de.NUMBER}}},duration:{type:de.NUMBER},easing:{type:de.STRING,description:"One of 'linear', 'ease-in', 'ease-out', 'ease-in-out'."},focalLength:{type:de.NUMBER,description:"A common focal length like 24, 35, 50, 85."}}}}}}})).text.trim(),s=JSON.parse(n);return(!s.composition.characters||s.composition.characters.length===0)&&(s.composition.characters=[{id:"char-1",name:"Subject A",x:400,y:225}]),s.composition.characters.forEach(o=>{o.id||(o.id=`char-${Math.random()}`)}),s}catch(e){return an(e,"Visual Initialization"),{composition:cu($L),lighting:cu(KL),color:cu(JL),camera:cu(YL)}}};var Dh=function(t,e){return Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},Dh(t,e)};function Nw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Dh(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Bu=function(){return Bu=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Bu.apply(this,arguments)};function uo(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function Mw(t,e,n,s){var o=arguments.length,l=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(u=t[d])&&(l=(o<3?u(l):o>3?u(e,n,l):u(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l}function Iw(t,e){return function(n,s){e(n,s,t)}}function Dw(t,e,n,s,o,l){function u(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var d=s.kind,h=d==="getter"?"get":d==="setter"?"set":"value",f=!e&&t?s.static?t:t.prototype:null,y=e||(f?Object.getOwnPropertyDescriptor(f,s.name):{}),b,T=!1,w=n.length-1;w>=0;w--){var E={};for(var C in s)E[C]=C==="access"?{}:s[C];for(var C in s.access)E.access[C]=s.access[C];E.addInitializer=function(R){if(T)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(R||null))};var A=(0,n[w])(d==="accessor"?{get:y.get,set:y.set}:y[h],E);if(d==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(b=u(A.get))&&(y.get=b),(b=u(A.set))&&(y.set=b),(b=u(A.init))&&o.unshift(b)}else(b=u(A))&&(d==="field"?o.unshift(b):y[h]=b)}f&&Object.defineProperty(f,s.name,y),T=!0}function kw(t,e,n){for(var s=arguments.length>2,o=0;o<e.length;o++)n=s?e[o].call(t,n):e[o].call(t);return s?n:void 0}function Pw(t){return typeof t=="symbol"?t:"".concat(t)}function Ow(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Lw(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Se(t,e,n,s){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(y){try{f(s.next(y))}catch(b){u(b)}}function h(y){try{f(s.throw(y))}catch(b){u(b)}}function f(y){y.done?l(y.value):o(y.value).then(d,h)}f((s=s.apply(t,e||[])).next())})}function Uw(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(f){return function(y){return h([f,y])}}function h(f){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(n=0)),n;)try{if(s=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,o=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){n.label=f[1];break}if(f[0]===6&&n.label<l[1]){n.label=l[1],l=f;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(f);break}l[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(y){f=[6,y],o=0}finally{s=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var ec=Object.create?(function(t,e,n,s){s===void 0&&(s=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,s,o)}):(function(t,e,n,s){s===void 0&&(s=n),t[s]=e[n]});function Vw(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ec(e,t,n)}function qu(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pm(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,l=[],u;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(u)throw u.error}}return l}function Bw(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Pm(arguments[e]));return t}function qw(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),o=0,e=0;e<n;e++)for(var l=arguments[e],u=0,d=l.length;u<d;u++,o++)s[o]=l[u];return s}function Gw(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function to(t){return this instanceof to?(this.v=t,this):new to(t)}function Hw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(w){return function(E){return Promise.resolve(E).then(w,b)}}function d(w,E){s[w]&&(o[w]=function(C){return new Promise(function(A,R){l.push([w,C,A,R])>1||h(w,C)})},E&&(o[w]=E(o[w])))}function h(w,E){try{f(s[w](E))}catch(C){T(l[0][3],C)}}function f(w){w.value instanceof to?Promise.resolve(w.value.v).then(y,b):T(l[0][2],w)}function y(w){h("next",w)}function b(w){h("throw",w)}function T(w,E){w(E),l.shift(),l.length&&h(l[0][0],l[0][1])}}function jw(t){var e,n;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,l){e[o]=t[o]?function(u){return(n=!n)?{value:to(t[o](u)),done:!1}:l?l(u):u}:l}}function Fw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qu=="function"?qu(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(l){n[l]=t[l]&&function(u){return new Promise(function(d,h){u=t[l](u),o(d,h,u.done,u.value)})}}function o(l,u,d,h){Promise.resolve(h).then(function(f){l({value:f,done:d})},u)}}function zw(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var uU=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},kh=function(t){return kh=Object.getOwnPropertyNames||function(e){var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[n.length]=s);return n},kh(t)};function $w(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=kh(t),s=0;s<n.length;s++)n[s]!=="default"&&ec(e,t,n[s]);return uU(e,t),e}function Kw(t){return t&&t.__esModule?t:{default:t}}function Jw(t,e,n,s){if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}function Yw(t,e,n,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n}function Ww(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Xw(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],n&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:n})}else n&&t.stack.push({async:!0});return e}var cU=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var s=new Error(n);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Qw(t){function e(l){t.error=t.hasError?new cU(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var n,s=0;function o(){for(;n=t.stack.pop();)try{if(!n.async&&s===1)return s=0,t.stack.push(n),Promise.resolve().then(o);if(n.dispose){var l=n.dispose.call(n.value);if(n.async)return s|=2,Promise.resolve(l).then(o,function(u){return e(u),o()})}else s|=1}catch(u){e(u)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}function Zw(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,s,o,l,u){return s?e?".jsx":".js":o&&(!l||!u)?n:o+l+"."+u.toLowerCase()+"js"}):t}const dU={__extends:Nw,__assign:Bu,__rest:uo,__decorate:Mw,__param:Iw,__esDecorate:Dw,__runInitializers:kw,__propKey:Pw,__setFunctionName:Ow,__metadata:Lw,__awaiter:Se,__generator:Uw,__createBinding:ec,__exportStar:Vw,__values:qu,__read:Pm,__spread:Bw,__spreadArrays:qw,__spreadArray:Gw,__await:to,__asyncGenerator:Hw,__asyncDelegator:jw,__asyncValues:Fw,__makeTemplateObject:zw,__importStar:$w,__importDefault:Kw,__classPrivateFieldGet:Jw,__classPrivateFieldSet:Yw,__classPrivateFieldIn:Ww,__addDisposableResource:Xw,__disposeResources:Qw,__rewriteRelativeImportExtension:Zw},fU=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Xw,get __assign(){return Bu},__asyncDelegator:jw,__asyncGenerator:Hw,__asyncValues:Fw,__await:to,__awaiter:Se,__classPrivateFieldGet:Jw,__classPrivateFieldIn:Ww,__classPrivateFieldSet:Yw,__createBinding:ec,__decorate:Mw,__disposeResources:Qw,__esDecorate:Dw,__exportStar:Vw,__extends:Nw,__generator:Uw,__importDefault:Kw,__importStar:$w,__makeTemplateObject:zw,__metadata:Lw,__param:Iw,__propKey:Pw,__read:Pm,__rest:uo,__rewriteRelativeImportExtension:Zw,__runInitializers:kw,__setFunctionName:Ow,__spread:Bw,__spreadArray:Gw,__spreadArrays:qw,__values:qu,default:dU},Symbol.toStringTag,{value:"Module"})),hU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Fs(async()=>{const{default:s}=await Promise.resolve().then(()=>Ks);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class Om extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class GS extends Om{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class HS extends Om{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jS extends Om{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ph;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ph||(Ph={}));class mU{constructor(e,{headers:n={},customFetch:s,region:o=Ph.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=hU(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Se(this,arguments,void 0,function*(n,s={}){var o;try{const{headers:l,method:u,body:d,signal:h}=s;let f={},{region:y}=s;y||(y=this.region);const b=new URL(`${this.url}/${n}`);y&&y!=="any"&&(f["x-region"]=y,b.searchParams.set("forceFunctionRegion",y));let T;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",T=d):typeof d=="string"?(f["Content-Type"]="text/plain",T=d):typeof FormData<"u"&&d instanceof FormData?T=d:(f["Content-Type"]="application/json",T=JSON.stringify(d)):T=d;const w=yield this.fetch(b.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:T,signal:h}).catch(R=>{throw R.name==="AbortError"?R:new GS(R)}),E=w.headers.get("x-relay-error");if(E&&E==="true")throw new HS(w);if(!w.ok)throw new jS(w);let C=((o=w.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),A;return C==="application/json"?A=yield w.json():C==="application/octet-stream"||C==="application/pdf"?A=yield w.blob():C==="text/event-stream"?A=w:C==="multipart/form-data"?A=yield w.formData():A=yield w.text(),{data:A,error:null,response:w}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new GS(l)}:{data:null,error:l,response:l instanceof jS||l instanceof HS?l.context:void 0}}})}}var jt={};const co=yT(fU);var du={},fu={},hu={},mu={},pu={},pU=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},no=pU();const gU=no.fetch,e_=no.fetch.bind(no),t_=no.Headers,yU=no.Request,vU=no.Response,Ks=Object.freeze(Object.defineProperty({__proto__:null,Headers:t_,Request:yU,Response:vU,default:e_,fetch:gU},Symbol.toStringTag,{value:"Module"})),bU=yT(Ks);var gu={},FS;function n_(){if(FS)return gu;FS=1,Object.defineProperty(gu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return gu.default=t,gu}var zS;function i_(){if(zS)return pu;zS=1,Object.defineProperty(pu,"__esModule",{value:!0});const t=co,e=t.__importDefault(bU),n=t.__importDefault(n_());class s{constructor(l){var u,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var y,b,T,w;let E=null,C=null,A=null,R=f.status,D=f.statusText;if(f.ok){if(this.method!=="HEAD"){const z=await f.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?C=z:C=JSON.parse(z))}const G=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),q=(T=f.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");G&&q&&q.length>1&&(A=parseInt(q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,A=null,R=406,D="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const G=await f.text();try{E=JSON.parse(G),Array.isArray(E)&&f.status===404&&(C=[],E=null,R=200,D="OK")}catch{f.status===404&&G===""?(R=204,D="No Content"):E={message:G}}if(E&&this.isMaybeSingle&&(!((w=E==null?void 0:E.details)===null||w===void 0)&&w.includes("0 rows"))&&(E=null,R=200,D="OK"),E&&this.shouldThrowOnError)throw new n.default(E)}return{error:E,data:C,count:A,status:R,statusText:D}});return this.shouldThrowOnError||(h=h.catch(f=>{var y,b,T;return{error:{message:`${(y=f==null?void 0:f.name)!==null&&y!==void 0?y:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(b=f==null?void 0:f.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(T=f==null?void 0:f.code)!==null&&T!==void 0?T:""}`},data:null,count:null,status:0,statusText:""}})),h.then(l,u)}returns(){return this}overrideTypes(){return this}}return pu.default=s,pu}var $S;function s_(){if($S)return mu;$S=1,Object.defineProperty(mu,"__esModule",{value:!0});const e=co.__importDefault(i_());class n extends e.default{select(o){let l=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const f=h?`${h}.order`:"order",y=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${y?`${y},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(f,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:f="text"}={}){var y;const b=[o?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),T=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${T}"; options=${b};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return mu.default=n,mu}var KS;function Lm(){if(KS)return hu;KS=1,Object.defineProperty(hu,"__esModule",{value:!0});const e=co.__importDefault(s_()),n=new RegExp("[,()]");class s extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const y=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${f}fts${y}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return hu.default=s,hu}var JS;function r_(){if(JS)return fu;JS=1,Object.defineProperty(fu,"__esModule",{value:!0});const e=co.__importDefault(Lm());class n{constructor(o,{headers:l={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(o,l){const{head:u=!1,count:d}=l??{},h=u?"HEAD":"GET";let f=!1;const y=(o??"*").split("").map(b=>/\s/.test(b)&&!f?"":(b==='"'&&(f=!f),b)).join("");return this.url.searchParams.set("select",y),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const f=o.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(f.length>0){const y=[...new Set(f)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var f;const y="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const b=o.reduce((T,w)=>T.concat(Object.keys(w)),[]);if(b.length>0){const T=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(o,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return fu.default=n,fu}var YS;function SU(){if(YS)return du;YS=1,Object.defineProperty(du,"__esModule",{value:!0});const t=co,e=t.__importDefault(r_()),n=t.__importDefault(Lm());class s{constructor(l,{headers:u={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:h=!1,count:f}={}){var y;let b;const T=new URL(`${this.url}/rpc/${l}`);let w;d||h?(b=d?"HEAD":"GET",Object.entries(u).filter(([C,A])=>A!==void 0).map(([C,A])=>[C,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([C,A])=>{T.searchParams.append(C,A)})):(b="POST",w=u);const E=new Headers(this.headers);return f&&E.set("Prefer",`count=${f}`),new n.default({method:b,url:T,headers:E,schema:this.schemaName,body:w,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return du.default=s,du}var WS;function TU(){if(WS)return jt;WS=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.PostgrestError=jt.PostgrestBuilder=jt.PostgrestTransformBuilder=jt.PostgrestFilterBuilder=jt.PostgrestQueryBuilder=jt.PostgrestClient=void 0;const t=co,e=t.__importDefault(SU());jt.PostgrestClient=e.default;const n=t.__importDefault(r_());jt.PostgrestQueryBuilder=n.default;const s=t.__importDefault(Lm());jt.PostgrestFilterBuilder=s.default;const o=t.__importDefault(s_());jt.PostgrestTransformBuilder=o.default;const l=t.__importDefault(i_());jt.PostgrestBuilder=l.default;const u=t.__importDefault(n_());return jt.PostgrestError=u.default,jt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},jt}var o_=TU();const a_=gT(o_),xU=FC({__proto__:null,default:a_},[o_]),{PostgrestClient:wU,PostgrestQueryBuilder:X4,PostgrestFilterBuilder:Q4,PostgrestTransformBuilder:Z4,PostgrestBuilder:e3,PostgrestError:t3}=a_||xU;class _U{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const EU="2.78.0",CU=`realtime-js/${EU}`,AU="1.0.0",Oh=1e4,RU=1e3,NU=100;var va;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(va||(va={}));var Mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Mt||(Mt={}));var Kn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Kn||(Kn={}));var Lh;(function(t){t.websocket="websocket"})(Lh||(Lh={}));var Ds;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ds||(Ds={}));class MU{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const o=n.getUint8(1),l=n.getUint8(2);let u=this.HEADER_LENGTH+2;const d=s.decode(e.slice(u,u+o));u=u+o;const h=s.decode(e.slice(u,u+l));u=u+l;const f=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:h,payload:f}}}class l_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ot||(ot={}));const XS=(t,e,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=IU(u,t,e,o),l),{}):{}},IU=(t,e,n,s)=>{const o=e.find(d=>d.name===t),l=o==null?void 0:o.type,u=n[t];return l&&!s.includes(l)?u_(l,u):Uh(u)},u_=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return OU(e,n)}switch(t){case ot.bool:return DU(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return kU(e);case ot.json:case ot.jsonb:return PU(e);case ot.timestamp:return LU(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return Uh(e);default:return Uh(e)}},Uh=t=>t,DU=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kU=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},PU=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},OU=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>u_(e,d))}return t},LU=t=>typeof t=="string"?t.replace(" ","T"):t,c_=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class qf{constructor(e,n,s={},o=Oh){this.channel=e,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var QS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(QS||(QS={}));class ba{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ba.syncState(this.state,o,l,u),this.pendingDiffs.forEach(h=>{this.state=ba.syncDiff(this.state,h,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ba.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,o){const l=this.cloneDeep(e),u=this.transformState(n),d={},h={};return this.map(l,(f,y)=>{u[f]||(h[f]=y)}),this.map(u,(f,y)=>{const b=l[f];if(b){const T=y.map(A=>A.presence_ref),w=b.map(A=>A.presence_ref),E=y.filter(A=>w.indexOf(A.presence_ref)<0),C=b.filter(A=>T.indexOf(A.presence_ref)<0);E.length>0&&(d[f]=E),C.length>0&&(h[f]=C)}else d[f]=y}),this.syncDiff(l,{joins:d,leaves:h},s,o)}static syncDiff(e,n,s,o){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(d,h)=>{var f;const y=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(h),y.length>0){const b=e[d].map(w=>w.presence_ref),T=y.filter(w=>b.indexOf(w.presence_ref)<0);e[d].unshift(...T)}s(d,y,h)}),this.map(u,(d,h)=>{let f=e[d];if(!f)return;const y=h.map(b=>b.presence_ref);f=f.filter(b=>y.indexOf(b.presence_ref)<0),e[d]=f,o(d,f,h),f.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const o=e[s];return"metas"in o?n[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[s]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ZS;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ZS||(ZS={}));var Sa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Sa||(Sa={}));var xi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xi||(xi={}));class Um{constructor(e,n={config:{}},s){var o,l;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qf(this,Kn.join,this.params,this.timeout),this.rejoinTimer=new l_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new ba(this),this.broadcastEndpointURL=c_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Mt.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,f=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[Sa.PRESENCE]&&this.bindings[Sa.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},T={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(xi.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(xi.CLOSED)),this.updateJoinPayload(Object.assign({config:T},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var E;if(this.socket.setAuth(),w===void 0){e==null||e(xi.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,A=(E=C==null?void 0:C.length)!==null&&E!==void 0?E:0,R=[];for(let D=0;D<A;D++){const N=C[D],{filter:{event:G,schema:q,table:z,filter:F}}=N,ee=w&&w[D];if(ee&&ee.event===G&&ee.schema===q&&ee.table===z&&ee.filter===F)R.push(Object.assign(Object.assign({},N),{id:ee.id}));else{this.unsubscribe(),this.state=Mt.errored,e==null||e(xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(xi.SUBSCRIBED);return}}).receive("error",w=>{this.state=Mt.errored,e==null||e(xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===Mt.joined&&e===Sa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const f=await d.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=f.body)===null||o===void 0?void 0:o.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,h;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),f.receive("ok",()=>l("ok")),f.receive("error",()=>l("error")),f.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new qf(this,Kn.leave,{},e),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),u}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new qf(this,e,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>NU){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var o,l;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:f,join:y}=Kn;if(s&&[d,h,f,y].indexOf(u)>=0&&s!==this._joinRef())return;let T=this._onMessage(u,n,s);if(n&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var E,C,A;return((E=w.filter)===null||E===void 0?void 0:E.event)==="*"||((A=(C=w.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(w=>w.callback(T,s)):(l=this.bindings[u])===null||l===void 0||l.filter(w=>{var E,C,A,R,D,N;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const G=w.id,q=(E=w.filter)===null||E===void 0?void 0:E.event;return G&&((C=n.ids)===null||C===void 0?void 0:C.includes(G))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const G=(D=(R=w==null?void 0:w.filter)===null||R===void 0?void 0:R.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return G==="*"||G===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof T=="object"&&"ids"in T){const E=T.data,{schema:C,table:A,commit_timestamp:R,type:D,errors:N}=E;T=Object.assign(Object.assign({},{schema:C,table:A,commit_timestamp:R,eventType:D,new:{},old:{},errors:N}),this._getPayloadRecords(E))}w.callback(T,s)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Um.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kn.close,{},e)}_onError(e){this._on(Kn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=XS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=XS(e.columns,e.old_record)),n}}const Gf=()=>{},yu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},UU=[1e3,2e3,5e3,1e4],VU=1e4,BU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qU{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Oh,this.transport=null,this.heartbeatIntervalMs=yu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gf,this.ref=0,this.reconnectTimer=null,this.logger=Gf,this.conn=null,this.sendBuffer=[],this.serializer=new MU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>Fs(async()=>{const{default:d}=await Promise.resolve().then(()=>Ks);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Lh.websocket}`,this.httpEndpoint=c_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_U.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:AU}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case va.connecting:return Ds.Connecting;case va.open:return Ds.Open;case va.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new Um(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:s,payload:o,ref:l}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(RU,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},yu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=n,d=u?`(${u})`:"",h=l.status||"";this.log("receive",`${h} ${s} ${o} ${d}`.trim(),l),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(o,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${s}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([BU],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:CU};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Kn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new l_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,o,l,u,d,h,f,y;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Oh,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:yu.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Gf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(b=>UU[b-1]||VU),this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:((b,T)=>T(JSON.stringify(b))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Vm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class GU extends Vm{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vh extends Vm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Bm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Fs(async()=>{const{default:s}=await Promise.resolve().then(()=>Ks);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},HU=()=>Se(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fs(()=>Promise.resolve().then(()=>Ks),void 0)).Response:Response}),Bh=t=>{if(Array.isArray(t))return t.map(n=>Bh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Bh(s)}),e},jU=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Hf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},FU=(t,e,n)=>Se(void 0,void 0,void 0,function*(){const s=yield HU();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const l=t.status||500,u=(o==null?void 0:o.statusCode)||l+"";e(new GU(Hf(o),l,u))}).catch(o=>{e(new Vh(Hf(o),o))}):e(new Vh(Hf(t),t))}),zU=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?o:(jU(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Ha(t,e,n,s,o,l){return Se(this,void 0,void 0,function*(){return new Promise((u,d)=>{t(n,zU(e,s,o,l)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>FU(h,d,s))})})}function ka(t,e,n,s){return Se(this,void 0,void 0,function*(){return Ha(t,"GET",e,n,s)})}function $n(t,e,n,s,o){return Se(this,void 0,void 0,function*(){return Ha(t,"POST",e,s,o,n)})}function qh(t,e,n,s,o){return Se(this,void 0,void 0,function*(){return Ha(t,"PUT",e,s,o,n)})}function $U(t,e,n,s){return Se(this,void 0,void 0,function*(){return Ha(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function qm(t,e,n,s,o){return Se(this,void 0,void 0,function*(){return Ha(t,"DELETE",e,s,o,n)})}class KU{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}var d_;class JU{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[d_]="BlobDownloadBuilder",this.promise=null}asStream(){return new KU(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}d_=Symbol.toStringTag;const YU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WU{constructor(e,n={},s,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=Bm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,o){return Se(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},eT),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl),h&&l.append("metadata",this.encodeMetadata(h))):(l=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o!=null&&o.headers&&(d=Object.assign(Object.assign({},d),o.headers));const f=this._removeEmptyFolders(n),y=this._getFinalPath(f),b=yield(e=="PUT"?qh:$n)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:f,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}})}upload(e,n,s){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,o){return Se(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const f=Object.assign({upsert:eT.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",f.cacheControl)):(h=s,y["cache-control"]=`max-age=${f.cacheControl}`,y["content-type"]=f.contentType);const b=yield qh(this.fetch,d.toString(),h,{headers:y});return{data:{path:l,fullPath:b.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(gt(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return Se(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const l=yield $n(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new Vm("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}update(e,n,s){return Se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}copy(e,n,s){return Se(this,void 0,void 0,function*(){try{return{data:{path:(yield $n(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,s){return Se(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield $n(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,s){return Se(this,void 0,void 0,function*(){try{const o=yield $n(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=l?`?${l}`:"",d=this._getFinalPath(e),h=()=>ka(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new JU(h,this.shouldThrowOnError)}info(e){return Se(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield ka(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bh(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}exists(e){return Se(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield $U(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s)&&s instanceof Vh){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),o=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&o.push(h);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${f}`)}}}remove(e){return Se(this,void 0,void 0,function*(){try{return{data:yield qm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}list(e,n,s){return Se(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},YU),n),{prefix:e||""});return{data:yield $n(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}listV2(e,n){return Se(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield $n(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const f_="2.78.0",h_={"X-Client-Info":`storage-js/${f_}`};class XU{constructor(e,n={},s,o){this.shouldThrowOnError=!1;const l=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},h_),n),this.fetch=Bm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ka(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}createBucket(e){return Se(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return Se(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield qm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class QU{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},h_),n),this.fetch=Bm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBuckets(e){return Se(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const s=n.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield ka(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield qm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}}const Gm={"X-Client-Info":`storage-js/${f_}`,"Content-Type":"application/json"};class m_ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function pn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class jf extends m_{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ZU extends m_{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var tT;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(tT||(tT={}));const Hm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Fs(async()=>{const{default:s}=await Promise.resolve().then(()=>Ks);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},eV=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nT=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tV=(t,e,n)=>Se(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const o=t.status||500,l=t;if(typeof l.json=="function")l.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new jf(nT(u),o,d))}).catch(()=>{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new jf(d,o,u))});else{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new jf(d,o,u))}}else e(new ZU(nT(t),t))}),nV=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(eV(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),n)):o};function iV(t,e,n,s,o,l){return Se(this,void 0,void 0,function*(){return new Promise((u,d)=>{t(n,nV(e,s,o,l)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>tV(h,d,s))})})}function gn(t,e,n,s,o){return Se(this,void 0,void 0,function*(){return iV(t,"POST",e,s,o,n)})}class sV{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gm),n),this.fetch=Hm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Se(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pn(s))return{data:null,error:s};throw s}})}listIndexes(e){return Se(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Se(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pn(s))return{data:null,error:s};throw s}})}}class rV{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gm),n),this.fetch=Hm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield gn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}getVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield gn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}queryVectors(e){return Se(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Se(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield gn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}}class oV{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gm),n),this.fetch=Hm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}getBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}listBuckets(){return Se(this,arguments,void 0,function*(e={}){try{return{data:yield gn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Se(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pn(n))return{data:null,error:n};throw n}})}}class aV extends oV{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new lV(this.url,this.headers,e,this.fetch)}}class lV extends sV{constructor(e,n,s,o){super(e,n,o),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Se(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Se(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Se(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Se(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new uV(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class uV extends rV{constructor(e,n,s,o,l){super(e,n,l),this.vectorBucketName=s,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Se(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Se(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Se(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Se(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Se(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class cV extends XU{constructor(e,n={},s,o){super(e,n,s,o)}from(e){return new WU(this.url,this.headers,e,this.fetch)}get vectors(){return new aV(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new QU(this.url+"/iceberg",this.headers,this.fetch)}}const dV="2.78.0";let ca="";typeof Deno<"u"?ca="deno":typeof document<"u"?ca="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ca="react-native":ca="node";const fV={"X-Client-Info":`supabase-js-${ca}/${dV}`},hV={headers:fV},mV={schema:"public"},pV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gV={},yV=t=>{let e;return t?e=t:typeof fetch>"u"?e=e_:e=fetch,(...n)=>e(...n)},vV=()=>typeof Headers>"u"?t_:Headers,bV=(t,e,n)=>{const s=yV(n),o=vV();return async(l,u)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:t;let f=new o(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),s(l,Object.assign(Object.assign({},u),{headers:f}))}};function SV(t){return t.endsWith("/")?t:t+"/"}function TV(t,e){var n,s;const{db:o,auth:l,realtime:u,global:d}=t,{db:h,auth:f,realtime:y,global:b}=e,T={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},f),l),realtime:Object.assign(Object.assign({},y),u),storage:{},global:Object.assign(Object.assign(Object.assign({},b),d),{headers:Object.assign(Object.assign({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?T.accessToken=t.accessToken:delete T.accessToken,T}function xV(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SV(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const p_="2.78.0",Vr=30*1e3,Gh=3,Ff=Gh*Vr,wV="http://localhost:9999",_V="supabase.auth.token",EV={"X-Client-Info":`gotrue-js/${p_}`},Hh="X-Supabase-Api-Version",g_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,AV=600*1e3;class Pa extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function _e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RV extends Pa{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function NV(t){return _e(t)&&t.name==="AuthApiError"}class ks extends Pa{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ls extends Pa{constructor(e,n,s,o){super(e,s,o),this.name=n,this.status=s}}class Gn extends ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function MV(t){return _e(t)&&t.name==="AuthSessionMissingError"}class kr extends ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vu extends ls{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bu extends ls{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function IV(t){return _e(t)&&t.name==="AuthImplicitGrantRedirectError"}class iT extends ls{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jh extends ls{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function zf(t){return _e(t)&&t.name==="AuthRetryableFetchError"}class sT extends ls{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Fh extends ls{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rT=` 	
\r=`.split(""),DV=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rT.length;e+=1)t[rT[e].charCodeAt(0)]=-2;for(let e=0;e<Gu.length;e+=1)t[Gu[e].charCodeAt(0)]=e;return t})();function oT(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Gu[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Gu[s]),e.queuedBits-=6}}function y_(t,e,n){const s=DV[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function aT(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{OV(u,s,n)};for(let u=0;u<t.length;u+=1)y_(t.charCodeAt(u),o,l);return e.join("")}function kV(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function PV(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}kV(s,e)}}function OV(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Zr(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)y_(t.charCodeAt(o),n,s);return new Uint8Array(e)}function LV(t){const e=[];return PV(t,n=>e.push(n)),new Uint8Array(e)}function Ls(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};return t.forEach(o=>oT(o,n,s)),oT(null,n,s),e.join("")}function UV(t){return Math.round(Date.now()/1e3)+t}function VV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Jt=()=>typeof window<"u"&&typeof document<"u",Rs={tested:!1,writable:!1},v_=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rs.tested)return Rs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Rs.tested=!0,Rs.writable=!0}catch{Rs.tested=!0,Rs.writable=!1}return Rs.writable};function BV(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((s,o)=>{e[o]=s}),e}const b_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Fs(async()=>{const{default:s}=await Promise.resolve().then(()=>Ks);return{default:s}},void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},qV=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Br=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ns=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ts=async(t,e)=>{await t.removeItem(e)};class tc{constructor(){this.promise=new tc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}tc.promiseConstructor=Promise;function $f(t){const e=t.split(".");if(e.length!==3)throw new Fh("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!CV.test(e[s]))throw new Fh("JWT not in base64url format");return{header:JSON.parse(aT(e[0])),payload:JSON.parse(aT(e[1])),signature:Zr(e[2]),raw:{header:e[0],payload:e[1]}}}async function GV(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function HV(t,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function jV(t){return("0"+t.toString(16)).substr(-2)}function FV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,jV).join("")}async function zV(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function $V(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await zV(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pr(t,e,n=!1){const s=FV();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await Br(t,`${e}-code-verifier`,o);const l=await $V(s);return[l,s===l?"plain":"s256"]}const KV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JV(t){const e=t.headers.get(Hh);if(!e||!e.match(KV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function YV(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function WV(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const XV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Or(t){if(!XV.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function QV(t,e){return new Proxy(t,{get:(n,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,o)}})}function lT(t){return JSON.parse(JSON.stringify(t))}const Is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ZV=[502,503,504];async function uT(t){var e;if(!qV(t))throw new jh(Is(t),0);if(ZV.includes(t.status))throw new jh(Is(t),t.status);let n;try{n=await t.json()}catch(l){throw new ks(Is(l),l)}let s;const o=JV(t);if(o&&o.getTime()>=g_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new sT(Is(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Gn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new sT(Is(n),t.status,n.weak_password.reasons);throw new RV(Is(n),t.status||500,s)}const e4=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function Me(t,e,n,s){var o;const l=Object.assign({},s==null?void 0:s.headers);l[Hh]||(l[Hh]=g_["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await t4(t,e,n+d,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function t4(t,e,n,s,o,l){const u=e4(e,s,o,l);let d;try{d=await t(n,Object.assign({},u))}catch(h){throw console.error(h),new jh(Is(h),0)}if(d.ok||await uT(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(h){await uT(h)}}function Hn(t){var e;let n=null;s4(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=UV(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function cT(t){const e=Hn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function is(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function n4(t){return{data:t,error:null}}function i4(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l}=t,u=uo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:l},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function dT(t){return t}function s4(t){return t.access_token&&t.refresh_token&&t.expires_in}const Jf=["global","local","others"];class r4{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=b_(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Jf[0]){if(Jf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jf.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:is})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=uo(e,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:i4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(_e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:is})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,o,l,u,d,h;try{const f={nextPage:null,lastPage:0,total:0},y=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:dT});if(y.error)throw y.error;const b=await y.json(),T=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(h=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(E.split(";")[1].split("=")[1]);f[`${A}Page`]=C}),f.total=parseInt(T)),{data:Object.assign(Object.assign({},b),f),error:null}}catch(f){if(_e(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Or(e);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:is})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Or(e);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:is})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Or(e);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:is})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Or(e.userId);try{const{data:n,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Or(e.userId),Or(e.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,o,l,u,d,h;try{const f={nextPage:null,lastPage:0,total:0},y=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:dT});if(y.error)throw y.error;const b=await y.json(),T=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(h=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(E=>{const C=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(E.split(";")[1].split("=")[1]);f[`${A}Page`]=C}),f.total=parseInt(T)),{data:Object.assign(Object.assign({},b),f),error:null}}catch(f){if(_e(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}}function fT(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Lr={debug:!!(globalThis&&v_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class S_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class o4 extends S_{}async function a4(t,e,n){Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Lr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new o4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Lr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function l4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function T_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function u4(t){return parseInt(t,16)}function c4(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function d4(t){var e;const{chainId:n,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:h,resources:f,scheme:y,uri:b,version:T}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=T_(t.address),E=y?`${y}://${s}`:s,C=t.statement?`${t.statement}
`:"",A=`${E} wants you to sign in with your Ethereum account:
${w}

${C}`;let R=`URI: ${b}
Version: ${T}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(R+=`
Expiration Time: ${o.toISOString()}`),d&&(R+=`
Not Before: ${d.toISOString()}`),h&&(R+=`
Request ID: ${h}`),f){let D=`
Resources:`;for(const N of f){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);D+=`
- ${N}`}R+=D}return`${A}
${R}`}class At extends Error{constructor({message:e,code:n,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class Hu extends At{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function f4({error:t,options:e}){var n,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new At({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new At({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new At({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new At({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new At({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new At({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new At({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new At({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const u=window.location.hostname;if(x_(u)){if(l.rp.id!==u)return new At({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new At({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function h4({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new At({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new At({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(x_(s)){if(n.rpId!==s)return new At({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class m4{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const p4=new m4;function g4(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,o=uo(t,["challenge","user","excludeCredentials"]),l=Zr(e).buffer,u=Object.assign(Object.assign({},n),{id:Zr(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const f=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:Zr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function y4(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=uo(t,["challenge","allowCredentials"]),o=Zr(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Zr(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function v4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ls(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ls(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function b4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ls(new Uint8Array(o.authenticatorData)),clientDataJSON:Ls(new Uint8Array(o.clientDataJSON)),signature:Ls(new Uint8Array(o.signature)),userHandle:o.userHandle?Ls(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function x_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function hT(){var t,e;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function S4(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hu("Browser returned unexpected credential type",e)}:{data:null,error:new Hu("Empty credential response",e)}}catch(e){return{data:null,error:f4({error:e,options:t})}}}async function T4(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hu("Browser returned unexpected credential type",e)}:{data:null,error:new Hu("Empty credential response",e)}}catch(e){return{data:null,error:h4({error:e,options:t})}}}const x4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},w4={userVerification:"preferred",hints:["security-key"]};function ju(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of t)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(n(u))s[l]=u;else if(e(u)){const d=s[l];e(d)?s[l]=ju(d,u):s[l]=ju(u)}else s[l]=u}return s}function _4(t,e){return ju(x4,t,e||{})}function E4(t,e){return ju(w4,t,e||{})}class C4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:o},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const h=o??p4.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:f}=u.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(u.webauthn.type){case"create":{const f=_4(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:y,error:b}=await S4({publicKey:f,signal:h});return y?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}case"request":{const f=E4(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:y,error:b}=await T4(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:f,signal:h}));return y?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}}}catch(u){return _e(u)?{data:null,error:u}:{data:null,error:new ks("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}},l){if(!n)return{data:null,error:new Pa("rpId is required for WebAuthn authentication")};try{if(!hT())return{data:null,error:new ks("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:s,credential_response:h.credential_response}})}catch(u){return _e(u)?{data:null,error:u}:{data:null,error:new ks("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o},l){if(!n)return{data:null,error:new Pa("rpId is required for WebAuthn registration")};try{if(!hT())return{data:null,error:new ks("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var b;return(b=y.data)===null||b===void 0?void 0:b.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:d};const{data:h,error:f}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:o},{create:l});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(u){return _e(u)?{data:null,error:u}:{data:null,error:new ks("Unexpected error in register",u)}}}}l4();const A4={url:wV,storageKey:_V,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mT(t,e,n){return await n()}const Ur={};class Oa{get jwks(){var e,n;return(n=(e=Ur[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ur[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{cachedAt:e})}constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oa.nextInstanceID,Oa.nextInstanceID+=1,this.instanceID>0&&Jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},A4),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new r4({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=b_(o.fetch),this.lock=o.lock||mT,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Jt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=a4:this.lock=mT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new C4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:v_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fT(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fT(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${p_}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=BV(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Jt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),IV(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return _e(n)?{error:n}:{error:new ks("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,o;try{const l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Hn}),{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(l){if(_e(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,s,o;try{let l;if("email"in e){const{email:y,password:b,options:T}=e;let w=null,E=null;this.flowType==="pkce"&&([w,E]=await Pr(this.storage,this.storageKey)),l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:y,password:b,data:(n=T==null?void 0:T.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:w,code_challenge_method:E},xform:Hn})}else if("phone"in e){const{phone:y,password:b,options:T}=e;l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},channel:(o=T==null?void 0:T.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:Hn})}else throw new vu("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(l){if(_e(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:d}=e;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:cT})}else if("phone"in e){const{phone:l,password:u,options:d}=e;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:cT})}else throw new vu("You must provide either an email or phone number and a password");const{data:s,error:o}=n;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new kr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,s,o,l,u,d,h,f,y,b,T;let w,E;if("message"in e)w=e.message,E=e.signature;else{const{chain:C,wallet:A,statement:R,options:D}=e;let N;if(Jt())if(typeof A=="object")N=A;else{const te=window;if("ethereum"in te&&typeof te.ethereum=="object"&&"request"in te.ethereum&&typeof te.ethereum.request=="function")N=te.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=A}const G=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href),q=await N.request({method:"eth_requestAccounts"}).then(te=>te).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=T_(q[0]);let F=(s=D==null?void 0:D.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!F){const te=await N.request({method:"eth_chainId"});F=u4(te)}const ee={domain:G.host,address:z,statement:R,uri:G.href,version:"1",chainId:F,nonce:(o=D==null?void 0:D.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=D==null?void 0:D.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=D==null?void 0:D.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=D==null?void 0:D.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=D==null?void 0:D.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(y=D==null?void 0:D.signInWithEthereum)===null||y===void 0?void 0:y.resources};w=d4(ee),E=await N.request({method:"personal_sign",params:[c4(w),z]})}try{const{data:C,error:A}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:E},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Hn});if(A)throw A;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new kr}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:A})}catch(C){if(_e(C))return{data:{user:null,session:null},error:C};throw C}}async signInWithSolana(e){var n,s,o,l,u,d,h,f,y,b,T,w;let E,C;if("message"in e)E=e.message,C=e.signature;else{const{chain:A,wallet:R,statement:D,options:N}=e;let G;if(Jt())if(typeof R=="object")G=R;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))G=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=R}const q=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in G&&G.signIn){const z=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),D?{statement:D}:null));let F;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")F=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)F=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)E=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),C=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${q.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(o=(s=N==null?void 0:N.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N==null?void 0:N.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((f=N==null?void 0:N.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((b=(y=N==null?void 0:N.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...N.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const z=await G.signMessage(new TextEncoder().encode(E),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=z}}try{const{data:A,error:R}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Ls(C)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Hn});if(R)throw R;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new kr}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:R})}catch(A){if(_e(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(e){const n=await Ns(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(n??"").split("/");try{const{data:l,error:u}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Hn});if(await ts(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new kr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(_e(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:s,token:o,access_token:l,nonce:u}=e,d=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Hn}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new kr}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:f})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,o,l,u;try{if("email"in e){const{email:d,options:h}=e;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await Pr(this.storage,this.storageKey));const{error:b}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:y},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:d,options:h}=e,{data:f,error:y}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(l=h==null?void 0:h.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:y}}throw new vu("You must provide either an email or phone number.")}catch(d){if(_e(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,s;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Hn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,f=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:f,session:h},error:null}}catch(o){if(_e(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,s,o;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Pr(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:n4})}catch(l){if(_e(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Gn;const{error:o}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:u}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:u,error:d}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new vu("You must provide either an email or phone number and a type")}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ff:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await Ns(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Kf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=QV(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:is}):await this._useSession(async n=>{var s,o,l;const{data:u,error:d}=n;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gn}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:is})})}catch(n){if(_e(n))return MV(n)&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new Gn;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await Pr(this.storage,this.storageKey));const{data:f,error:y}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:is});if(y)throw y;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gn;const n=Date.now()/1e3;let s=n,o=!0,l=null;const{payload:u}=$f(e.access_token);if(u.exp&&(s=u.exp,o=s<=n),o){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(_e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Gn;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Jt())throw new bu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new iT("No code detected.");const{data:D,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:h,token_type:f}=e;if(!l||!d||!u||!f)throw new bu("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(d);let T=y+b;h&&(T=parseInt(h));const w=T-y;w*1e3<=Vr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const E=T-b;y-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,T,y):y-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,T,y);const{data:C,error:A}=await this._getUser(l);if(A)throw A;const R={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:b,expires_at:T,refresh_token:u,token_type:f,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:e.type},error:null}}catch(s){if(_e(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ns(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return{error:l};const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(NV(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=VV(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,o;try{const{data:{session:l},error:u}=n;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Pr(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(_e(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:o}=await this._useSession(async l=>{var u,d,h,f,y;const{data:b,error:T}=l;if(T)throw T;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",w,{headers:this.headers,jwt:(y=(f=b.session)===null||f===void 0?void 0:f.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return Jt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(_e(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:u,provider:d,token:h,access_token:f,nonce:y}=e,b=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:f,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Hn}),{data:T,error:w}=b;return w?{data:{user:null,session:null},error:w}:!T||!T.session||!T.user?{data:{user:null,session:null},error:new kr}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),{data:T,error:w})}catch(o){if(_e(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)throw u;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await HV(async o=>(o>0&&await GV(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Hn})),(o,l)=>{const u=200*Math.pow(2,o);return l&&zf(l)&&Date.now()+u-s<Vr})}catch(s){if(this._debug(n,"error",s),_e(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Jt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Ns(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Br(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Kf()}else if(o&&!o.user&&!o.user){const u=await Ns(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await ts(this.storage,this.storageKey+"-user"),await Br(this.storage,this.storageKey,o)):o.user=Kf()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ff;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Ff}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),zf(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new tc;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Gn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),_e(l)){const u={data:null,error:l};return zf(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){l.push(h)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Br(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=lT(o);await Br(this.storage,this.storageKey,l)}else{const o=lT(n);await Br(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ts(this.storage,this.storageKey),await ts(this.storage,this.storageKey+"-code-verifier"),await ts(this.storage,this.storageKey+"-user"),this.userStorage&&await ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/Vr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Vr}ms, refresh threshold is ${Gh} ticks`),o<=Gh&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof S_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const o=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Pr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;return l?{data:null,error:l}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,o;const{data:l,error:u}=n;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:f}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?v4(e.webauthn.credential_response):b4(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g4(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y4(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:o}=await this.getSession();if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=$f(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?{data:null,error:o}:s?await Me(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):{data:null,error:new Gn}})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return{data:null,error:l};if(!o)return{data:null,error:new Gn};const u=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return{data:null,error:l};if(!o)return{data:null,error:new Gn};const u=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Jt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(d=>d.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+AV>o)return s;const{data:l,error:u}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:w,error:E}=await this.getSession();if(E||!w.session)return{data:null,error:E};s=w.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:h}}=$f(s);n!=null&&n.allowExpired||YV(l.exp);const f=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:l,header:o,signature:u},error:null}}const y=WV(o.alg),b=await crypto.subtle.importKey("jwk",f,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,u,LV(`${d}.${h}`)))throw new Fh("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}}Oa.nextInstanceID=0;const R4=Oa;class N4 extends R4{constructor(e){super(e)}}class M4{constructor(e,n,s){var o,l,u;this.supabaseUrl=e,this.supabaseKey=n;const d=xV(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:mV,realtime:gV,auth:Object.assign(Object.assign({},pV),{storageKey:h}),global:hV},y=TV(s??{},f);this.storageKey=(o=y.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=y.auth)!==null&&u!==void 0?u:{},this.headers,y.global.fetch),this.fetch=bV(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new wU(new URL("rest/v1",d).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new cV(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new mU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:o,userStorage:l,storageKey:u,flowType:d,lock:h,debug:f},y,b){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new N4({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),y),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:o,userStorage:l,flowType:d,lock:h,debug:f,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new qU(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const I4=(t,e,n)=>new M4(t,e,n);function D4(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}D4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const k4="https://etdopfjlgpdhcjjyirvd.supabase.co",P4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0ZG9wZmpsZ3BkaGNqanlpcnZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5ODM4NjEsImV4cCI6MjA3NzU1OTg2MX0.a_gBdqeIsDZ2onrWk7Bi27mJjajthUof1tUCvrnJKMM",w_=I4(k4,P4),__=()=>{let t=localStorage.getItem("dreamer_session_id");return t||(t=crypto.randomUUID(),localStorage.setItem("dreamer_session_id",t)),t},O4=async t=>{try{const e=__(),{error:n}=await w_.from("user_sessions").upsert({session_id:e,current_question_index:t.currentQuestionIndex,prompt_data:t.promptData,knowledge_docs:t.knowledgeDocs,saved_configurations:t.savedConfigurations,visual_presets:t.visualPresets,last_updated:new Date().toISOString()},{onConflict:"session_id"});return n?(console.error("Error saving progress:",n),!1):(console.log("Progress saved successfully"),!0)}catch(e){return console.error("Failed to save progress:",e),!1}},L4=async()=>{try{const t=__(),{data:e,error:n}=await w_.from("user_sessions").select("*").eq("session_id",t).single();return n?(n.code==="PGRST116"||console.error("Error loading progress:",n),null):{currentQuestionIndex:e.current_question_index||0,promptData:e.prompt_data||{},knowledgeDocs:e.knowledge_docs||[],savedConfigurations:e.saved_configurations||[],visualPresets:e.visual_presets||[]}}catch(t){return console.error("Failed to load progress:",t),null}};let Su=null;const U4=(t,e=2e3)=>{Su&&clearTimeout(Su),Su=setTimeout(()=>{t(),Su=null},e)},E_=[{id:"midjourney",name:"Midjourney",description:"High-quality artistic image generation",promptPrefix:"/imagine prompt:",website:"https://midjourney.com"},{id:"dalle",name:"DALL-E",description:"OpenAI's advanced image generation",promptPrefix:"",website:"https://openai.com/dall-e"},{id:"stable-diffusion",name:"Stable Diffusion",description:"Open-source image generation",promptPrefix:"",website:"https://stability.ai"},{id:"leonardo-ai",name:"Leonardo AI",description:"Professional AI image generation",promptPrefix:"",website:"https://leonardo.ai"},{id:"firefly",name:"Adobe Firefly",description:"Commercial-safe image generation",promptPrefix:"",website:"https://firefly.adobe.com"},{id:"ideogram",name:"Ideogram",description:"Text-aware image generation",promptPrefix:"",website:"https://ideogram.ai"},{id:"flux",name:"Flux",description:"High-quality text-to-image",promptPrefix:"",website:"https://fal.ai/models/fal-ai/flux"},{id:"runway",name:"Runway ML",description:"Creative AI for image and video",promptPrefix:"",website:"https://runwayml.com"},{id:"bluewillow",name:"BlueWillow",description:"Free AI image generation",promptPrefix:"/imagine prompt:",website:"https://bluewillow.ai"}],C_=(t,e)=>{const n=`${t.shotDetails.shotType} ${t.shotDetails.cameraAngle}. ${t.shotDetails.description}. ${t.shotDetails.lightingMood} lighting. ${t.shotDetails.cameraMovement} camera movement.`;switch(e.id){case"midjourney":case"bluewillow":const s=`${n} --ar ${Uf.DEFAULT_ASPECT_RATIO} ${Uf.STYLE_FLAG} ${Uf.VERSION_FLAG}`;return e.promptPrefix?`${e.promptPrefix} ${s}`:s;case"stable-diffusion":return`${n}, high quality, cinematic lighting, professional photography, 8k resolution`;case"dalle":case"firefly":return n;case"leonardo-ai":return`${n}, masterpiece, high detail, professional quality`;case"ideogram":return`${n}, sharp focus, detailed, cinematic`;case"flux":return`${n}, ultra detailed, photorealistic, 4k`;case"runway":return`${n}, artistic interpretation, creative composition`;default:return n}};function In(t){return JSON.parse(JSON.stringify(t))}const Us=t=>typeof t=="boolean"?t?"Yes":"No":t?Array.isArray(t)?t.join(", "):String(t):"",V4=(t,e)=>{const n={"ground-level soul gaze":{y1:Bt,y2:Bt*2/3},"eye-level witness":{y1:Bt,y2:Bt/2},"elevated guardian":{y1:Bt,y2:Bt/3},"angelic drift":{y1:Bt,y2:0}},s={"true-eye, honest":{xOffset:0},"steep reverence":{xOffset:-100},"whispered low":{xOffset:100},"Dutch slip":{xOffset:50}},o=n[t]||n["eye-level witness"],l=s[e]||s["true-eye, honest"],u=Fn/2,d=u+l.xOffset,h=u+l.xOffset;return{x1:d,y1:o.y1,x2:h,y2:o.y2}},B4=(t,e,n)=>{const s=document.createElement("a");s.href=`data:${e};base64,${t}`,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s)},Ta={characters:[{id:"char-1",name:"Subject A",x:400,y:225},{id:"char-2",name:"Subject B",x:280,y:260}],cameraAngle:"true-eye, honest",cameraHeight:"eye-level witness"},xa={keyLightIntensity:80,keyLightColor:"#FFD8A8",fillLightIntensity:40,fillLightColor:"#89CFF0",backLightIntensity:60,backLightColor:"#FACC15",ambientIntensity:20,colorTemperature:4500,mood:bh[0]},wa={colorGrade:"Dreamer Grade",saturation:10,contrast:5,highlights:5,shadows:-5,colorPalette:["#0F172A","#1E293B","#475569","#F97316","#FBBF24","#FDE68A","#38BDF8","#A855F7"],colorHarmony:Pu[0]},_a={movementType:Sh[0],startPos:{x:100,y:300},endPos:{x:700,y:150},duration:5,easing:"ease-in-out",focalLength:35},A_=La.memo(({composition:t,onAddCharacter:e,onRemoveCharacter:n,onDrag:s,onNameChange:o,onCameraAngleChange:l,onCameraHeightChange:u,onPositionChange:d})=>{const h=O.useCallback(()=>{e()},[e]),f=O.useCallback(E=>{n(E)},[n]),y=O.useCallback((E,C)=>{o(E,C)},[o]),b=O.useCallback(E=>{l(E)},[l]),T=O.useCallback(E=>{u(E)},[u]),w=O.useCallback((E,C)=>{const A=C.currentTarget.ownerSVGElement;if(!A)return;const R=A.getBoundingClientRect(),D=Fn/R.width,N=Bt/R.height,G=O.useCallback((F,ee)=>{const te=Math.max(0,Math.min(R.width,F-R.left)),ue=Math.max(0,Math.min(R.height,ee-R.top)),he=Math.max(20,Math.min(Fn-20,te*D)),Te=Math.max(20,Math.min(Bt-20,ue*N));return{stageX:he,stageY:Te}},[R,D,N]),q=O.useCallback(F=>{const{stageX:ee,stageY:te}=G(F.clientX,F.clientY);d(E,ee,te)},[E,d,G]),z=O.useCallback(()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",z)},[q]);return window.addEventListener("mousemove",q),window.addEventListener("mouseup",z),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",z)}},[d]);return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-semibold text-amber-400",children:"Composition Grid"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Arrange characters and camera posture."})]}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:"px-3 py-2 text-sm rounded-lg bg-amber-500/20 text-amber-400 border border-amber-500/40 hover:bg-amber-500/30",children:"Add Character"})]}),S.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[S.jsxs("div",{className:"md:col-span-2 bg-gray-950 border border-gray-800 rounded-xl p-4",children:[S.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Shot Stage"}),S.jsx("div",{className:"relative aspect-video bg-gradient-to-br from-gray-900 via-gray-950 to-black rounded-lg overflow-hidden",children:S.jsxs("svg",{viewBox:`0 0 ${Fn} ${Bt}`,className:"w-full h-full",onMouseLeave:()=>window.dispatchEvent(new MouseEvent("mouseup")),children:[S.jsx("defs",{children:S.jsx("pattern",{id:"grid",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:S.jsx("path",{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"#1f2937",strokeWidth:"1"})})}),S.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),S.jsx("rect",{width:"100%",height:"100%",fill:"none",stroke:"#374151",strokeWidth:"2"}),S.jsx("line",{x1:Fn/3,y1:0,x2:Fn/3,y2:Bt,stroke:"#1f2937",strokeWidth:"1",strokeDasharray:"4 4"}),S.jsx("line",{x1:Fn/3*2,y1:0,x2:Fn/3*2,y2:Bt,stroke:"#1f2937",strokeWidth:"1",strokeDasharray:"4 4"}),S.jsx("line",{x1:0,y1:Bt/3,x2:Fn,y2:Bt/3,stroke:"#1f2937",strokeWidth:"1",strokeDasharray:"4 4"}),S.jsx("line",{x1:0,y1:Bt/3*2,x2:Fn,y2:Bt/3*2,stroke:"#1f2937",strokeWidth:"1",strokeDasharray:"4 4"}),(()=>{const E=V4(t.cameraHeight,t.cameraAngle);return S.jsx("line",{x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:"8 6"})})(),t.characters.map(E=>S.jsxs("g",{children:[S.jsx("circle",{cx:E.x,cy:E.y,r:16,fill:"#f59e0b",className:"cursor-grab",onMouseDown:C=>w(E.id,C)}),S.jsx("text",{x:E.x,y:E.y-24,textAnchor:"middle",fill:"#f8fafc",fontSize:14,className:"pointer-events-none",children:E.name})]},E.id))]})})]}),S.jsxs("div",{className:"space-y-4",children:[t.characters.map(E=>S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("input",{value:E.name,onChange:C=>y(E.id,C.target.value),className:"w-full text-sm bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500",placeholder:"Character name"}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>f(E.id),className:"ml-2 p-2 rounded bg-gray-800 hover:bg-gray-700",children:S.jsx(ku,{className:"w-4 h-4 text-red-400"})})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[S.jsxs("span",{children:["X: ",Math.round(E.x)]}),S.jsxs("span",{children:["Y: ",Math.round(E.y)]})]})]},E.id)),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Camera Angle"}),S.jsx("select",{value:t.cameraAngle,onChange:E=>b(E.target.value),className:"mt-1 w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-amber-500",children:KI.map(E=>S.jsx("option",{value:E,children:E},E))})]}),S.jsxs("div",{children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Camera Height"}),S.jsx("select",{value:t.cameraHeight,onChange:E=>T(E.target.value),className:"mt-1 w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-amber-500",children:$I.map(E=>S.jsx("option",{value:E,children:E},E))})]})]})]})]})]})});A_.displayName="CompositionEditor";const R_=La.memo(({lighting:t,onChange:e})=>{const n=O.useCallback((o,l)=>{let u;switch(o){case"keyLightIntensity":case"fillLightIntensity":case"backLightIntensity":case"ambientIntensity":u=Math.min(100,Math.max(0,isNaN(l)?0:l));break;case"colorTemperature":u=Math.min(8e3,Math.max(2e3,isNaN(l)?4500:l));break;default:u=isNaN(l)?0:l}e(o,u)},[e]),s=O.useCallback(()=>{e("keyLightIntensity",oa.DEFAULT_KEY_LIGHT),e("fillLightIntensity",oa.DEFAULT_FILL_LIGHT),e("backLightIntensity",oa.DEFAULT_BACK_LIGHT),e("ambientIntensity",oa.DEFAULT_AMBIENT),e("keyLightColor","#FFD8A8"),e("fillLightColor","#89CFF0"),e("backLightColor","#FACC15"),e("colorTemperature",oa.DEFAULT_COLOR_TEMP),e("mood",bh[0])},[e]);return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-semibold text-amber-400",children:"Lighting Mixer"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Dial in key/fill/back ratios, temperature, and mood."})]}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-700",children:"Reset Lighting"})]}),S.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{label:"Key Light",field:"keyLightIntensity",colorField:"keyLightColor"},{label:"Fill Light",field:"fillLightIntensity",colorField:"fillLightColor"},{label:"Back Light",field:"backLightIntensity",colorField:"backLightColor"},{label:"Ambient",field:"ambientIntensity",colorField:null}].map(({label:o,field:l,colorField:u})=>S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between text-sm",children:[S.jsx("span",{className:"text-gray-300",children:o}),S.jsxs("span",{className:"text-amber-400",children:[t[l],"%"]})]}),S.jsx("input",{type:"range",min:0,max:100,value:t[l],onChange:d=>n(l,Number(d.target.value)),className:"w-full accent-amber-500"}),u&&S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("label",{className:"text-xs text-gray-400",children:"Color"}),S.jsx("input",{type:"color",value:t[u],onChange:d=>e(u,d.target.value),className:"w-10 h-10 rounded border border-gray-700 bg-gray-900"})]})]},l))}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-2",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Mood Preset"}),S.jsx("select",{value:t.mood,onChange:o=>e("mood",o.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500",children:bh.map(o=>S.jsx("option",{value:o,children:o},o))})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-2",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Color Temperature (K)"}),S.jsx("input",{type:"number",value:t.colorTemperature,onChange:o=>e("colorTemperature",Number(o.target.value)),min:2e3,max:8e3,step:100,className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500"})]})]})]})});R_.displayName="LightingEditor";const N_=La.memo(({color:t,onChange:e})=>{const n=(o,l)=>{if(zI.HEX_COLOR.test(l)){const u=[...t.colorPalette];u[o]=l,e("colorPalette",u)}},s=(o,l)=>{let u;switch(o){case"saturation":case"contrast":case"highlights":case"shadows":u=Math.max(-50,Math.min(50,isNaN(l)?0:l));break;default:u=isNaN(l)?0:l}e(o,u)};return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-semibold text-amber-400",children:"Color Grading Deck"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Shape palette, contrast, saturation, and harmony."})]}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{e("colorGrade","Dreamer Grade"),e("saturation",10),e("contrast",5),e("highlights",5),e("shadows",-5),e("colorPalette",["#0F172A","#1E293B","#475569","#F97316","#FBBF24","#FDE68A","#38BDF8","#A855F7"]),e("colorHarmony",Pu[0])},className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-700",children:"Reset Color"})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Grade Name"}),S.jsx("input",{value:t.colorGrade,onChange:o=>e("colorGrade",o.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500"})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Color Harmony"}),S.jsx("select",{value:t.colorHarmony,onChange:o=>e("colorHarmony",o.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500",children:Pu.map(o=>S.jsx("option",{value:o,children:o},o))})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-2",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Palette"}),S.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:t.colorPalette.map((o,l)=>S.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[S.jsx("input",{type:"color",value:o,onChange:u=>n(l,u.target.value),className:"w-full h-12 rounded border border-gray-700"}),S.jsx("input",{value:o,onChange:u=>n(l,u.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-2 py-1 text-xs text-white text-center focus:outline-none focus:border-amber-500"})]},l))})]}),S.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Saturation",field:"saturation"},{label:"Contrast",field:"contrast"},{label:"Highlights",field:"highlights"},{label:"Shadows",field:"shadows"}].map(({label:o,field:l})=>S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between text-sm",children:[S.jsx("span",{className:"text-gray-300",children:o}),S.jsx("span",{className:"text-amber-400",children:t[l]})]}),S.jsx("input",{type:"range",min:-50,max:50,value:t[l],onChange:u=>s(l,Number(u.target.value)),className:"w-full accent-amber-500"})]},l))})]})});N_.displayName="ColorGradingEditor";const M_=La.memo(({camera:t,onChange:e,onPathChange:n})=>{const s=(l,u)=>{l==="duration"&&typeof u=="number"?e(l,Math.min(30,Math.max(1,u))):l==="focalLength"&&typeof u=="number"?e(l,Math.min(200,Math.max(10,u))):e(l,u)},o=(l,u,d)=>{n(l,u,Math.min(800,Math.max(0,d)))};return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-semibold text-amber-400",children:"Camera Motion Lab"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Define movement, path, easing, and focal rhythm."})]}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{e("movementType",Sh[0]),e("duration",5),e("easing","ease-in-out"),e("focalLength",35),n("startPos","x",100),n("startPos","y",300),n("endPos","x",700),n("endPos","y",150)},className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-700",children:"Reset Motion"})]}),S.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Movement Type"}),S.jsx("select",{value:t.movementType,onChange:l=>s("movementType",l.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500",children:Sh.map(l=>S.jsx("option",{value:l,children:l},l))})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Duration (seconds)"}),S.jsx("input",{type:"number",value:t.duration,onChange:l=>s("duration",Number(l.target.value)),min:1,max:30,className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500"})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Easing"}),S.jsx("select",{value:t.easing,onChange:l=>s("easing",l.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500",children:JI.map(l=>S.jsx("option",{value:l,children:l},l))})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsx("label",{className:"text-xs text-gray-400 uppercase",children:"Focal Length (mm)"}),S.jsx("input",{type:"number",value:t.focalLength,onChange:l=>s("focalLength",Number(l.target.value)),min:10,max:200,className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500"})]})]}),S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-4",children:[S.jsx("h4",{className:"text-sm font-semibold text-amber-400 uppercase",children:"Path Coordinates"}),S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm text-gray-400",children:[["x","y"].map(l=>S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-xs uppercase",children:["Start ",l.toUpperCase()]}),S.jsx("input",{type:"number",value:t.startPos[l],onChange:u=>o("startPos",l,Number(u.target.value)),min:0,max:800,className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500"})]},`start-${l}`)),["x","y"].map(l=>S.jsxs("div",{className:"space-y-1",children:[S.jsxs("label",{className:"text-xs uppercase",children:["End ",l.toUpperCase()]}),S.jsx("input",{type:"number",value:t.endPos[l],onChange:u=>o("endPos",l,Number(u.target.value)),min:0,max:800,className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-amber-500"})]},`end-${l}`))]}),S.jsxs("div",{className:"bg-gray-950 border border-gray-800 rounded-lg p-4",children:[S.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Camera Path Preview"}),S.jsxs("svg",{viewBox:"0 0 200 120",className:"w-full h-32",children:[S.jsx("defs",{children:S.jsxs("linearGradient",{id:"cameraPathGradient",x1:"0%",x2:"100%",y1:"0%",y2:"100%",children:[S.jsx("stop",{offset:"0%",stopColor:"#38bdf8"}),S.jsx("stop",{offset:"100%",stopColor:"#f97316"})]})}),S.jsx("path",{d:`M ${t.startPos.x/4} ${t.startPos.y/4} L ${t.endPos.x/4} ${t.endPos.y/4}`,stroke:"url(#cameraPathGradient)",strokeWidth:"2",fill:"none",strokeDasharray:"6 4"}),S.jsx("circle",{cx:t.startPos.x/4,cy:t.startPos.y/4,r:4,fill:"#10B981"}),S.jsx("circle",{cx:t.endPos.x/4,cy:t.endPos.y/4,r:4,fill:"#EF4444"}),S.jsx(se.circle,{r:4,fill:"#FBBF24",animate:{cx:[t.startPos.x/4,t.endPos.x/4,t.startPos.x/4],cy:[t.startPos.y/4,t.endPos.y/4,t.startPos.y/4]},transition:{repeat:1/0,duration:Math.max(1,t.duration),ease:YI[t.easing]||"linear"}})]})]})]})]})});M_.displayName="CameraMovementEditor";const q4=({onStartBuilder:t,onStartStoryboard:e,onGenerateStory:n,isGenerating:s})=>{const[o,l]=O.useState(""),[u,d]=O.useState(!1),h=()=>{d(!0),setTimeout(()=>d(!1),2e3)};return S.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:S.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-3xl w-full text-center space-y-12",children:[S.jsxs(se.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.2,duration:.6},className:"space-y-6",children:[S.jsx("h1",{className:"text-7xl font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:"Dreamer"}),S.jsxs("div",{className:"space-y-3",children:[S.jsx("p",{className:"text-2xl text-gray-300 font-medium",children:" Your filmmaking buddy with serious cinematic chops"}),S.jsx("p",{className:"text-lg text-gray-400 leading-relaxed",children:"From initial spark to full framework, I'm here to help you craft prompts that make your visual story sing "})]})]}),S.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},className:"space-y-6",children:[S.jsx("div",{className:"space-y-4",children:S.jsx("textarea",{value:o,onChange:f=>l(f.target.value),placeholder:"Describe your cinematic vision, paste a script, or just share that wild idea you can't shake...",className:"w-full h-40 p-6 bg-gray-900 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none text-lg leading-relaxed"})}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(o),className:"py-5 px-6 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-xl hover:from-amber-600 hover:to-orange-700 transition-all flex items-center justify-center space-x-3 shadow-lg",children:[S.jsx("span",{className:"text-lg",children:"Prompt Builder"}),S.jsx(vh,{className:"w-6 h-6"})]}),S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e(o),className:"py-5 px-6 bg-gray-800 border-2 border-gray-700 hover:border-gray-600 text-white font-semibold rounded-xl transition-all flex items-center justify-center space-x-3",children:[S.jsx("span",{className:"text-lg",children:"Script to Storyboard"}),S.jsx(rs,{className:"w-6 h-6"})]})]}),S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(o),disabled:!o.trim()||s,className:"w-full py-5 px-6 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold rounded-xl transition-all flex items-center justify-center space-x-3 shadow-lg",children:s?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-6 h-6 animate-spin rounded-full border-2 border-gray-300 border-t-white"}),S.jsx("span",{className:"text-lg",children:"Dreaming up ideas..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(Da,{className:"w-6 h-6"}),S.jsx("span",{className:"text-lg",children:"Let AI Dream (Expand Idea)"})]})})]}),S.jsx(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},className:"pt-8 border-t border-gray-800",children:S.jsxs(se.button,{onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-sm text-gray-500 hover:text-amber-400 transition-colors cursor-pointer flex items-center space-x-2 mx-auto",children:[S.jsx("span",{children:"made with"}),S.jsx(se.span,{animate:u?{scale:[1,1.5,1],rotate:[0,10,-10,0]}:{},transition:{duration:.6},className:"text-red-400",children:""}),S.jsx("span",{children:"by Himanshu"})]})})]})})},G4=({promptData:t,handleAnswer:e,handleRandomAnswer:n,isGeneratingRandom:s,generatePrompt:o,savedConfigurations:l,knowledgeDocs:u,saveConfiguration:d,loadConfiguration:h,deleteConfiguration:f,deleteKnowledgeDoc:y,handleFileUpload:b,isProcessingDoc:T,currentQuestionIndex:w,setCurrentQuestionIndex:E,onBackToHome:C})=>{var Ln;const[A,R]=O.useState([]),[D,N]=O.useState(!1),[G,q]=O.useState(!1),[z,F]=O.useState([]),[ee,te]=O.useState(null),[ue,he]=O.useState(null),[Te,Pe]=O.useState([]),[$e,Ue]=O.useState(!1),[P,H]=O.useState(!1),[ne,re]=O.useState(!1),[ce,I]=O.useState(""),[J,ie]=O.useState(!1),W=es[w],le=(w+1)/es.length*100,Z=ve=>{const Ke=W.id,Ze=t[Ke];if(!(typeof Ze=="boolean"||!W.options))if(Array.isArray(Ze))if(Ze.includes(ve)){const Xt=Ze.filter(mt=>mt!==ve);e(Ke,Xt.length>0?Xt:"")}else e(Ke,[...Ze,ve]);else Ze?e(Ke,[String(Ze),ve]):e(Ke,[ve])};O.useEffect(()=>{let ve=!0;return(async()=>{try{await ei.initialize(),ve&&q(!0)}catch{we.info("HuggingFace not available, using fallback mode"),ve&&q(!1)}})(),()=>{if(ve=!1,ei.cleanup&&typeof ei.cleanup=="function")try{ei.cleanup()}catch(Ze){we.warn("Error cleaning up HuggingFace service:",Ze)}}},[]);const pe=async()=>{N(!0),R([]),F([]),te(null),he(null),Pe([]);const ve=es.filter(mt=>mt.id!==W.id&&t[mt.id]).map(mt=>`${mt.question}: ${Us(t[mt.id])}`).join(`
`),Ke=`KNOWLEDGE BASE:
`+u.map(mt=>{var yn,Gt;return`[${mt.name}]: Themes: ${(yn=mt.extractedKnowledge)==null?void 0:yn.themes.join(", ")}. Techniques: ${(Gt=mt.extractedKnowledge)==null?void 0:Gt.techniques.join(", ")}`}).join(`
`),Ze=t.scriptText?`

STORY SCRIPT:
${t.scriptText}`:"",Xt=`${Ke}

PREVIOUS ANSWERS:
${ve}${Ze}`;try{const{suggestions:mt,relevantKnowledge:yn}=await ZL(Xt,W.question,u);try{const Gt=await xh.detectGenre(t.scriptText||"",t);he(Gt);const ii=await xh.getContextualQuestionHelp(W.question,Gt);Pe(ii)}catch(Gt){we.warn("Genre intelligence failed:",Gt)}if(R(mt),F(yn),G){const Gt=await ei.analyzeNarrative(Xt);te(Gt)}}catch(mt){we.error("Enhanced suggestions failed, falling back to basic AI suggestions:",mt);const yn=await XL(Xt,W.question,u);R(yn)}N(!1)},je=()=>{if(!ce.trim()){alert("Please enter a name for this configuration");return}d(ce),I(""),H(!1)},Le=()=>{w<es.length-1&&(E(ve=>ve+1),R([]))},On=()=>{w>0&&(E(ve=>ve-1),R([]))};return S.jsxs("div",{className:"min-h-screen bg-black text-white",children:[S.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-8",children:[S.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:"Dreamer Builder"}),S.jsxs("div",{className:"flex space-x-3",children:[S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(!0),className:"p-3 bg-gray-800 hover:bg-gray-700 rounded-xl transition-colors",children:S.jsx(RI,{className:"w-5 h-5"})}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>re(!0),className:"p-3 bg-gray-800 hover:bg-gray-700 rounded-xl transition-colors",children:S.jsx(gb,{className:"w-5 h-5"})}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ie(!J),className:"p-3 bg-gray-800 hover:bg-gray-700 rounded-xl transition-colors",children:S.jsx(tw,{className:"w-5 h-5"})})]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between text-base text-gray-300",children:[S.jsxs("span",{children:["Step ",w+1," of ",es.length]}),S.jsxs("span",{className:"font-semibold",children:[Math.round(le),"%"]})]}),S.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 shadow-inner",children:S.jsx(se.div,{className:"bg-gradient-to-r from-amber-500 to-orange-600 h-3 rounded-full shadow-lg",style:{width:`${le}%`},initial:{width:0},animate:{width:`${le}%`},transition:{duration:.5,ease:"easeOut"}})})]})]}),S.jsx(ZI,{currentStep:W.step,totalSteps:es.length,promptData:t,questions:es}),S.jsx(Ra,{mode:"wait",children:S.jsxs(se.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.4},className:"space-y-8",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsx("div",{className:"flex items-center space-x-3",children:S.jsx("span",{className:"px-3 py-1 text-sm bg-amber-500/20 text-amber-400 rounded-full",children:W.category})}),S.jsx("h2",{className:"text-3xl font-semibold leading-tight",children:W.question})]}),S.jsx("div",{className:"space-y-6",children:W.type==="select"?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-900/50 border border-gray-800 rounded-xl",children:S.jsxs("label",{className:"flex items-center space-x-3 text-base text-gray-300 cursor-pointer",children:[S.jsx("input",{type:"checkbox",checked:$e,onChange:ve=>{const Ke=ve.target.checked;if(Ue(Ke),!Ke){const Ze=t[W.id];Array.isArray(Ze)&&Ze.length>0&&e(W.id,Ze[0])}},className:"w-5 h-5 rounded border-gray-600 bg-gray-800 text-amber-500 focus:ring-amber-500 focus:ring-offset-0"}),S.jsx("span",{children:"Enable multiple selection"})]})}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(Ln=W.options)==null?void 0:Ln.map(ve=>{const Ke=t[W.id],Ze=$e?Array.isArray(Ke)&&Ke.includes(ve):Us(Ke)===ve;return S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>$e?Z(ve):e(W.id,ve),className:`p-5 rounded-xl border-2 transition-all text-left ${Ze?"bg-amber-500/20 border-amber-500 text-amber-100":"bg-gray-900 border-gray-800 hover:border-gray-700 text-white hover:bg-gray-800"}`,children:S.jsx("span",{className:"text-base font-medium",children:ve})},ve)})})]}):W.type==="script"?S.jsx("div",{className:"space-y-3",children:S.jsx("textarea",{value:Us(t[W.id]),onChange:ve=>e(W.id,ve.target.value),placeholder:W.placeholder,className:"w-full h-40 p-5 bg-gray-900 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none text-lg leading-relaxed"})}):S.jsx("div",{className:"space-y-3",children:S.jsx("input",{type:"text",value:Us(t[W.id]),onChange:ve=>e(W.id,ve.target.value),placeholder:W.placeholder,className:"w-full p-5 bg-gray-900 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none text-lg"})})}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(W.id,W.question),disabled:s,className:"py-4 px-6 bg-gray-800 hover:bg-gray-700 text-white rounded-xl transition-colors flex items-center justify-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx(vh,{className:"w-5 h-5"}),S.jsx("span",{className:"text-base",children:"Inspire Me"})]}),S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:pe,disabled:D,className:`py-4 px-6 rounded-xl transition-all flex items-center justify-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed ${G?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700"}`,children:D?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 animate-spin rounded-full border-2 border-gray-300 border-t-white"}),S.jsx("span",{className:"text-base",children:"Dreamer is analyzing..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(Da,{className:"w-5 h-5"}),S.jsx("span",{className:"text-base",children:G?"Enhanced Insight":"Dreamer Insight"})]})})]}),G&&S.jsx(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-green-900/20 border border-green-700/30 rounded-xl",children:S.jsxs("div",{className:"flex items-center space-x-3 text-green-400",children:[S.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),S.jsx("span",{className:"font-medium",children:" Local AI Active - Enhanced Context Analysis"})]})}),z.length>0&&S.jsxs(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-amber-900/20 border border-amber-700/30 rounded-xl space-y-3",children:[S.jsx("h4",{className:"text-amber-400 text-base font-semibold",children:" Relevant Knowledge"}),S.jsx("div",{className:"space-y-2",children:z.map((ve,Ke)=>S.jsx("div",{className:"text-amber-300 text-sm leading-relaxed",children:ve},Ke))})]}),ue&&S.jsxs(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-purple-900/20 border border-purple-700/30 rounded-xl space-y-3",children:[S.jsx("h4",{className:"text-purple-400 text-base font-semibold",children:" Genre Intelligence"}),S.jsxs("div",{className:"flex items-center space-x-3",children:[S.jsx("span",{className:"text-purple-300 font-medium capitalize text-lg",children:ue.genre}),S.jsxs("span",{className:"text-purple-500 text-sm bg-purple-800/30 px-2 py-1 rounded-full",children:["(",Math.round(ue.confidence*100),"% confidence)"]})]}),ue.subgenres.length>0&&S.jsxs("div",{className:"text-purple-300 text-sm",children:[S.jsx("span",{className:"font-medium",children:"Subgenres:"})," ",ue.subgenres.join(", ")]}),S.jsxs("div",{className:"text-purple-200 text-sm",children:[S.jsx("span",{className:"font-medium",children:"Visual Style:"})," ",ue.characteristics.visualStyle.join(", ")]})]}),Te.length>0&&S.jsxs(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-blue-900/20 border border-blue-700/30 rounded-xl space-y-3",children:[S.jsx("h4",{className:"text-blue-400 text-base font-semibold",children:" Genre-Specific Tips"}),S.jsx("div",{className:"space-y-2",children:Te.map((ve,Ke)=>S.jsx("div",{className:"text-blue-300 text-sm leading-relaxed",children:ve},Ke))})]}),A.length>0&&S.jsx(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-3",children:A.map((ve,Ke)=>S.jsx(se.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:Ke*.1},whileHover:{scale:1.01,x:4},whileTap:{scale:.99},onClick:()=>e(W.id,ve),className:"w-full p-4 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-left transition-all group",children:S.jsxs("div",{className:"flex items-start space-x-3",children:[S.jsx("span",{className:"text-amber-400 text-lg group-hover:scale-110 transition-transform",children:""}),S.jsx("span",{className:"text-gray-200 text-base leading-relaxed group-hover:text-white transition-colors",children:ve})]})},Ke))})]},w)}),S.jsxs("div",{className:"pt-8 flex justify-between items-center",children:[w===0?S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:C,className:"px-8 py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl transition-colors flex items-center space-x-3 text-base",children:[S.jsx(fb,{className:"w-5 h-5"}),S.jsx("span",{children:"Back to Home"})]}):S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:On,className:"px-8 py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl transition-colors flex items-center space-x-3 text-base",children:[S.jsx(fb,{className:"w-5 h-5"}),S.jsx("span",{children:"Previous"})]}),w===es.length-1?S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"px-8 py-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl hover:from-amber-600 hover:to-orange-700 transition-all flex items-center space-x-3 text-base font-semibold shadow-lg",children:[S.jsx(vh,{className:"w-5 h-5"}),S.jsx("span",{children:"Generate Sequence"})]}):S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Le,className:"px-8 py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl transition-colors flex items-center space-x-3 text-base",children:[S.jsx("span",{children:"Next"}),S.jsx(ew,{className:"w-5 h-5"})]})]})]}),P&&S.jsx(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-6 z-50",onClick:()=>H(!1),children:S.jsxs(se.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 max-w-md w-full space-y-6",onClick:ve=>ve.stopPropagation(),children:[S.jsx("h3",{className:"text-2xl font-semibold text-center",children:"Save Configuration"}),S.jsx("input",{type:"text",value:ce,onChange:ve=>I(ve.target.value),placeholder:"Enter a memorable name...",className:"w-full p-4 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none text-lg",autoFocus:!0}),S.jsxs("div",{className:"flex space-x-4",children:[S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:je,className:"flex-1 py-4 bg-amber-500 hover:bg-amber-600 text-black font-semibold rounded-xl transition-colors text-base",children:"Save"}),S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>H(!1),className:"flex-1 py-4 bg-gray-800 hover:bg-gray-700 text-white rounded-xl transition-colors text-base",children:"Cancel"})]})]})}),ne&&S.jsx(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:()=>re(!1),children:S.jsxs(se.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-gray-900 border border-gray-800 rounded-lg p-6 max-w-md w-full max-h-[80vh] flex flex-col",onClick:ve=>ve.stopPropagation(),children:[S.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Load Configuration"}),S.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:l.length===0?S.jsx("p",{className:"text-gray-400 text-center py-8",children:"No saved configurations"}):S.jsx("div",{className:"space-y-2",children:l.map(ve=>S.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-medium",children:ve.name}),S.jsx("p",{className:"text-sm text-gray-400",children:new Date(ve.savedAt).toLocaleDateString()})]}),S.jsxs("div",{className:"flex space-x-2",children:[S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{h(ve),re(!1)},className:"p-2 bg-amber-500 hover:bg-amber-600 text-black rounded transition-colors",children:S.jsx(gb,{className:"w-4 h-4"})}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>f(ve.id),className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded transition-colors",children:S.jsx(ku,{className:"w-4 h-4"})})]})]},ve.id))})}),S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>re(!1),className:"w-full mt-4 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors flex-shrink-0",children:"Close"})]})}),J&&S.jsxs(se.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"fixed right-0 top-0 h-full w-80 bg-gray-900 border-l border-gray-800 p-6 overflow-y-auto z-40",children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsx("h3",{className:"text-lg font-semibold",children:"Knowledge Base"}),S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ie(!1),className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:S.jsx(FI,{className:"w-5 h-5"})})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload Documents"}),S.jsx("input",{type:"file",multiple:!0,accept:".txt,.md,.json,.pdf",onChange:b,disabled:T,className:"w-full p-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm file:mr-2 file:py-1 file:px-2 file:rounded file:border-0 file:text-sm file:font-medium disabled:opacity-50"}),T&&S.jsx("div",{className:"mt-2 text-center text-amber-400 text-sm",children:"Processing..."})]}),S.jsx("div",{className:"space-y-4",children:u.map(ve=>{var Ke;return S.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg",children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("h4",{className:"font-medium text-sm flex-1 truncate pr-2",children:ve.name}),S.jsx("div",{className:"flex items-center space-x-2",children:ve.id.startsWith("preloaded-")?S.jsx("span",{className:"text-xs bg-green-900 text-green-300 px-2 py-0.5 rounded-full",children:"Preloaded"}):S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(ve.id),className:"p-1 hover:bg-gray-700 rounded transition-colors",children:S.jsx(ku,{className:"w-3 h-3 text-red-400"})})})]}),S.jsxs("p",{className:"text-xs text-gray-400",children:["Themes: ",(Ke=ve.extractedKnowledge)==null?void 0:Ke.themes.slice(0,3).join(", ")]})]},ve.id)})})]})]})},pT=["Brewing cinematic coffee...","Warming up the script...","Finding the perfect lens flare...","Consulting with the gaffer...","Setting the key light...","Scouting virtual locations...","Reticulating splines for the dolly track...","Adjusting the Kuleshov effect...","Polishing the dailies...","Enhancing emotional subtext..."],H4=({setStage:t,setTimelineItems:e,scriptText:n,setCompositions:s,setLightingData:o,setColorGradingData:l,setCameraMovement:u})=>{const[d,h]=O.useState(n),[f,y]=O.useState(""),[b,T]=O.useState([]),[w,E]=O.useState("cinematic"),[C,A]=O.useState(null),[R,D]=O.useState(!1),[N,G]=O.useState(!1),[q,z]=O.useState(null),[F,ee]=O.useState(null),[te,ue]=O.useState(!1),he=O.useRef(null);O.useEffect(()=>()=>{he.current&&clearInterval(he.current)},[]),O.useEffect(()=>{const H=ne=>{ne.target.closest('[id^="dropdown-"]')||document.querySelectorAll('[id^="dropdown-"]').forEach(I=>{I.classList.add("hidden")})};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]);const Te=async()=>{if(!d.trim()||R)return;D(!0),T([]),A(null);const H=25e3;let ne=0;const re=250;he.current=window.setInterval(()=>{ne+=re;const ce=Math.min(.95,ne/H);A({completedChunks:Math.floor(ce*10),totalChunks:10,estimatedMsRemaining:Math.max(0,H-ne),progressRatio:ce,status:"processing",statusText:pT[Math.floor(Math.random()*pT.length)],partialShots:[]})},re);try{const ce=await nU(d,w,f.trim());he.current&&clearInterval(he.current),A({completedChunks:10,totalChunks:10,estimatedMsRemaining:0,progressRatio:1,status:"completed",statusText:"Storyboard ready!",partialShots:ce}),T(ce)}catch(ce){he.current&&clearInterval(he.current),we.error("Storyboard generation error:",ce);const I=ce instanceof Error?ce.message:"Storyboard generation failed.";A(J=>({...J||{completedChunks:0,totalChunks:10,estimatedMsRemaining:0,progressRatio:0,partialShots:[]},status:"error",statusText:I,errorMessage:I}))}finally{D(!1),he.current&&clearInterval(he.current)}},Pe=async(H,ne)=>{if(q===null){z(ne);try{const re=Ou.map(I=>`## ${I.name}
${I.content}`).join(`

`),ce=await iU(H,re);if(ce&&ce.screenplayLine&&ce.shotDetails)T(I=>{const J=[...I];return J[ne]=ce,J});else throw new Error("Received invalid shot data from enhancement API.")}catch(re){we.error("Failed to make shot cinematic:",re)}finally{z(null)}}},$e=async()=>{if(b.length===0||N)return;G(!0);const H=b.map((W,le)=>{const Z=`Cinematic shot ${le+1}: ${W.shotDetails.shotType}. Scene: ${W.screenplayLine}. Description: ${W.shotDetails.description}. Camera Angle: ${W.shotDetails.cameraAngle}. Camera Movement: ${W.shotDetails.cameraMovement}. Lighting: ${W.shotDetails.lightingMood}.`;return{id:crypto.randomUUID(),type:"shot",data:{shotNumber:le+1,prompt:Z,originalPrompt:Z,description:W.screenplayLine,role:W.shotDetails.shotType}}}),ne=b.map(W=>lU(W)),re=await Promise.all(ne),ce={},I={},J={},ie={};H.forEach((W,le)=>{const Z=re[le];ce[W.id]=Z.composition,I[W.id]=Z.lighting,J[W.id]=Z.color,ie[W.id]=Z.camera}),s(W=>({...W,...ce})),o(W=>({...W,...I})),l(W=>({...W,...J})),u(W=>({...W,...ie})),e(H),G(!1),t("final")},Ue=C?Math.max(0,Math.round(C.estimatedMsRemaining/1e3)):0,P=(H,ne)=>{const re=d.trim()?`${d}

--- STORY CONTEXT ---
${ne}`:ne;h(re),ue(!1),setTimeout(()=>{we.info("Story context added to script!")},500)};return S.jsxs("div",{className:"min-h-screen bg-black text-white p-4",children:[S.jsx("div",{className:"max-w-4xl mx-auto",children:S.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[S.jsx("h1",{className:"text-4xl font-bold text-center mb-2 bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:"Script to Storyboard"}),S.jsx("p",{className:"text-center text-gray-400 mb-6",children:"Paste your script and let Dreamer break it down into a visual sequence."}),S.jsx("div",{className:"flex justify-center mb-4",children:S.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-1 flex space-x-1",children:[S.jsx("button",{onClick:()=>E("cinematic"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${w==="cinematic"?"bg-amber-500 text-black":"text-gray-300 hover:bg-gray-700"}`,children:"Cinematic Style"}),S.jsx("button",{onClick:()=>E("explainer"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${w==="explainer"?"bg-amber-500 text-black":"text-gray-300 hover:bg-gray-700"}`,children:"Explainer Style"})]})}),S.jsx("textarea",{value:d,onChange:H=>h(H.target.value),placeholder:"Paste your script here...",className:"w-full h-48 p-4 bg-gray-900 border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none mb-4"}),S.jsxs("div",{className:"mb-6",children:[S.jsxs(se.button,{onClick:()=>ue(!0),whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg transition-all flex items-center justify-center space-x-2 mb-3",children:[S.jsx(Yu,{className:"w-5 h-5"}),S.jsx("span",{children:" Get Story Ideas (AI-Powered)"})]}),S.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Need help developing your story? Let Dreamer guide you through smart questions to build compelling characters, conflict, and narrative."})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Instructions (Optional)"}),S.jsx("textarea",{value:f,onChange:H=>y(H.target.value),placeholder:"Add specific instructions for your storyboard... (e.g., 'Use warmer color palette', 'Focus on close-up emotional shots', 'Include more action sequences', 'Emphasize the protagonist's perspective')",className:"w-full h-24 p-3 bg-gray-900 border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:border-amber-500 focus:outline-none resize-none"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These instructions will influence the visual style, composition, lighting, and overall approach of your storyboard shots."})]}),S.jsxs("div",{className:"flex justify-center space-x-4",children:[S.jsx(se.button,{onClick:()=>t("landing"),className:"px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg",children:"Back"}),S.jsxs(se.button,{onClick:Te,disabled:R,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg disabled:opacity-50 flex items-center space-x-2",children:[R&&S.jsx("div",{className:"w-5 h-5 animate-spin rounded-full border-2 border-gray-300 border-t-white"}),S.jsx("span",{children:"Generate Storyboard"})]})]}),C&&S.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 bg-gray-900 border border-gray-800 rounded-lg p-4 space-y-3",children:[S.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[S.jsx("span",{children:C.statusText}),S.jsx("span",{children:Ue>0?`~${Ue}s remaining`:C.status==="completed"?"Done":C.status==="error"?"Error":"Processing..."})]}),S.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:S.jsx(se.div,{className:"bg-gradient-to-r from-amber-500 to-orange-600 h-2",initial:{width:0},animate:{width:`${Math.min(100,Math.round((C.progressRatio||0)*100))}%`},transition:{duration:.3}})}),S.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[S.jsxs("span",{children:["Shots: ",C.status==="completed"?b.length:0]}),S.jsxs("span",{children:["Status: ",C.status]})]}),C.status==="error"&&S.jsx("div",{className:"text-xs text-red-400 space-y-1",children:C.errorMessage&&S.jsxs("p",{children:["Error: ",C.errorMessage]})})]}),b.length>0&&(C==null?void 0:C.status)==="completed"&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h2",{className:"text-2xl font-semibold mb-4 text-center",children:"Generated Storyboard"}),S.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto pr-2",children:b.map((H,ne)=>S.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:[S.jsx("p",{className:"text-sm font-mono text-gray-400 mb-2",children:H.screenplayLine}),S.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[S.jsxs("p",{children:[S.jsx("strong",{className:"text-amber-400",children:"Shot:"})," ",H.shotDetails.shotType," (",H.shotDetails.cameraAngle,")"]}),S.jsxs("p",{children:[S.jsx("strong",{className:"text-amber-400",children:"Movement:"})," ",H.shotDetails.cameraMovement]}),S.jsxs("p",{children:[S.jsx("strong",{className:"text-amber-400",children:"Description:"})," ",H.shotDetails.description]}),S.jsxs("p",{children:[S.jsx("strong",{className:"text-amber-400",children:"Lighting:"})," ",H.shotDetails.lightingMood]})]}),S.jsxs("div",{className:"mt-3 flex justify-between items-center gap-2",children:[S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{const re=`${H.shotDetails.shotType} ${H.shotDetails.cameraAngle}. ${H.shotDetails.description}. ${H.shotDetails.lightingMood} lighting. ${H.shotDetails.cameraMovement} camera movement.`;navigator.clipboard.writeText(re).then(()=>{ee(ne),setTimeout(()=>ee(null),2e3)})},className:"px-3 py-1 text-xs rounded-lg bg-amber-500/20 text-amber-300 border border-amber-500/40 hover:bg-amber-500/30 flex items-center space-x-1",children:F===ne?S.jsxs(S.Fragment,{children:[S.jsx(Em,{className:"w-3 h-3"}),S.jsx("span",{children:"Copied!"})]}):S.jsxs(S.Fragment,{children:[S.jsx(Am,{className:"w-3 h-3"}),S.jsx("span",{children:"Copy Prompt"})]})}),S.jsxs("div",{className:"relative",children:[S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{const re=`dropdown-${ne}`,ce=document.getElementById(re);ce&&ce.classList.toggle("hidden")},className:"px-3 py-1 text-xs rounded-lg bg-blue-500/20 text-blue-300 border border-blue-500/40 hover:bg-blue-500/30 flex items-center space-x-1",children:[S.jsx(gh,{className:"w-3 h-3"}),S.jsx("span",{children:"AI Models"}),S.jsx(nw,{className:"w-3 h-3"})]}),S.jsxs("div",{id:`dropdown-${ne}`,className:"hidden absolute right-0 top-full mt-1 w-64 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:[S.jsx("div",{className:"p-2 border-b border-gray-600",children:S.jsx("p",{className:"text-xs text-gray-300 font-medium",children:"Copy for AI Image Generation"})}),E_.map(re=>S.jsx(se.button,{whileHover:{backgroundColor:"rgba(55, 65, 81, 0.5)"},onClick:async()=>{const ce=C_(H,re);await navigator.clipboard.writeText(ce),re.name;const I=document.getElementById(`model-btn-${ne}-${re.id}`);if(I){const ie=I.innerHTML;I.innerHTML='<span class="text-green-400"> Copied!</span>',setTimeout(()=>{I.innerHTML=ie},1500)}const J=document.getElementById(`dropdown-${ne}`);J&&J.classList.add("hidden")},id:`model-btn-${ne}-${re.id}`,className:"w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-gray-700 flex items-center justify-between group",children:S.jsxs("div",{className:"flex-1",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("span",{className:"font-medium text-white",children:re.name}),S.jsx(gh,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-300"})]}),S.jsx("p",{className:"text-xs text-gray-400 mt-1",children:re.description}),re.website&&S.jsx("p",{className:"text-xs text-blue-400 mt-1",children:re.website})]})},re.id))]})]}),w==="explainer"&&S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Pe(H,ne),disabled:q===ne,className:"px-3 py-1 text-xs rounded-lg bg-indigo-500/20 text-indigo-300 border border-indigo-500/40 hover:bg-indigo-500/30 disabled:opacity-50 flex items-center space-x-2",children:q===ne?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-3 h-3 animate-spin rounded-full border-2 border-indigo-200 border-t-indigo-400"}),S.jsx("span",{children:"Enhancing..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(rs,{className:"w-3 h-3"}),S.jsx("span",{children:"Make Cinematic"})]})})]})]},ne))}),S.jsx("div",{className:"mt-6 flex justify-center",children:S.jsx(se.button,{onClick:$e,disabled:b.length===0||N,className:"px-8 py-4 text-lg bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-lg disabled:opacity-50 flex items-center justify-center space-x-2",children:N?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 animate-spin rounded-full border-2 border-gray-300 border-t-white"}),S.jsx("span",{children:"Initializing Visuals..."})]}):"Continue to Visual Editor"})})]})]})}),te&&S.jsx(sD,{onComplete:P,onClose:()=>ue(!1)})]})},j4=({item:t,updateItem:e,onEnhance:n,onRevert:s,onGenerateImage:o,onGenerateVideoPrompt:l,generatedContent:u,compositions:d,lightingData:h,colorGradingData:f,cameraMovement:y,updateVisuals:b,updatePromptFromVisuals:T,aspectRatios:w,setAspectRatios:E,styles:C,setStyles:A,castingData:R,setCastingData:D})=>{const[N,G]=O.useState("composition"),[q,z]=O.useState("photoreal"),[F,ee]=O.useState(!1),[te,ue]=O.useState(null),[he,Te]=O.useState(!1),Pe=async()=>{ee(!0);try{await T(t.id)}finally{ee(!1)}},$e=async(Z,pe)=>{const je=C_(pe.data,Z);try{await navigator.clipboard.writeText(je),ue(Z.id),setTimeout(()=>ue(null),2e3)}catch(Le){we.error("Failed to copy prompt:",Le)}};if(t.type!=="shot")return S.jsxs("div",{className:"flex-grow flex flex-col p-4 bg-gray-950 border border-gray-800 rounded-lg",children:[S.jsx("h2",{className:"text-xl font-semibold text-amber-400 mb-2",children:t.type==="b-roll"?"B-Roll Shot":t.type==="transition"?"Transition Note":"Title Card"}),t.type==="b-roll"&&S.jsx("textarea",{value:t.prompt,onChange:Z=>e({...t,prompt:Z.target.value}),className:"w-full flex-grow bg-gray-900 rounded p-2 text-gray-300"}),t.type==="transition"&&S.jsx("textarea",{value:t.note,onChange:Z=>e({...t,note:Z.target.value}),className:"w-full flex-grow bg-gray-900 rounded p-2 text-gray-300"}),t.type==="text"&&S.jsx("textarea",{value:t.title,onChange:Z=>e({...t,title:Z.target.value}),className:"w-full flex-grow bg-gray-900 rounded p-2 text-gray-300"})]});const Ue=t,P=Ue.data,H=P.prompt!==P.originalPrompt,ne=C[t.id]||"cinematic",re=Z=>{A(pe=>({...pe,[t.id]:Z}))},ce=(Z,pe)=>b(t.id,"compositions",{...le.composition,[Z]:pe}),I=(Z,pe)=>b(t.id,"lightingData",{...le.lighting,[Z]:pe}),J=(Z,pe)=>b(t.id,"colorGradingData",{...le.color,[Z]:pe}),ie=(Z,pe)=>b(t.id,"cameraMovement",{...le.camera,[Z]:pe}),W=(Z,pe,je)=>{const Le=le.camera[Z];b(t.id,"cameraMovement",{...le.camera,[Z]:{...Le,[pe]:je}})},le={composition:d[t.id]||Ta,lighting:h[t.id]||xa,color:f[t.id]||wa,camera:y[t.id]||_a};return S.jsxs("div",{className:"flex-grow flex flex-col p-4 md:p-6 lg:p-8 bg-gray-950/70 border border-gray-800 rounded-lg space-y-6 md:space-y-8 overflow-y-auto",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[S.jsxs("div",{className:"flex-grow",children:[S.jsxs("span",{className:"text-xs uppercase tracking-wider text-amber-500",children:["Shot ",P.shotNumber]}),S.jsx("h2",{className:"text-xl md:text-2xl lg:text-3xl font-semibold text-amber-400 mt-1",children:P.role}),S.jsx("p",{className:"text-sm md:text-base text-gray-400 mt-2 leading-relaxed",children:P.description})]}),S.jsxs("div",{className:"flex items-center space-x-3",children:[H&&S.jsx(se.button,{title:"Revert to Original Prompt",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>s(Ue),className:"p-2.5 md:p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:S.jsx(CI,{className:"w-4 h-4 md:w-5 md:h-5 text-amber-400"})}),S.jsx(se.button,{title:"Enhance with AI",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(Ue),className:"p-2.5 md:p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:S.jsx(Yu,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-400"})})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8",children:[S.jsxs("div",{className:"space-y-4 flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-300",children:"Cinematic Prompt"}),S.jsxs("div",{className:"relative",children:[S.jsxs(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Te(!he),className:"flex items-center space-x-2 px-3 py-2 bg-gray-800 hover:bg-gray-700 text-amber-400 rounded-lg transition-colors text-sm",title:"Copy prompt for AI models",children:[S.jsx(Am,{className:"w-4 h-4"}),S.jsx("span",{className:"hidden sm:inline",children:"Copy For AI"}),S.jsx(nw,{className:`w-3 h-3 transition-transform ${he?"rotate-180":""}`})]}),S.jsx(Ra,{children:he&&S.jsxs(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-64 bg-gray-900 border border-gray-700 rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",onClick:Z=>Z.stopPropagation(),children:[S.jsx("div",{className:"p-2 border-b border-gray-800",children:S.jsx("p",{className:"text-xs text-gray-400 px-2 py-1",children:"Copy prompt formatted for:"})}),S.jsx("div",{className:"p-2 space-y-1",children:E_.map(Z=>S.jsxs("button",{onClick:()=>{$e(Z,Ue),Te(!1)},className:"w-full flex items-center justify-between px-3 py-2.5 hover:bg-gray-800 rounded-lg transition-colors group",children:[S.jsxs("div",{className:"flex-grow text-left",children:[S.jsx("p",{className:"text-sm font-medium text-white",children:Z.name}),S.jsx("p",{className:"text-xs text-gray-400",children:Z.description})]}),te===Z.id?S.jsx(Em,{className:"w-4 h-4 text-green-400 flex-shrink-0 ml-2"}):Z.website?S.jsx(gh,{className:"w-3 h-3 text-gray-600 group-hover:text-amber-400 flex-shrink-0 ml-2"}):S.jsx(cI,{className:"w-3 h-3 text-gray-600 group-hover:text-amber-400 flex-shrink-0 ml-2"})]},Z.id))})]})})]})]}),S.jsx("textarea",{value:P.prompt,onChange:Z=>e({...t,data:{...P,prompt:Z.target.value}}),className:"w-full flex-grow min-h-[200px] md:min-h-[250px] bg-gray-900 border border-gray-700 rounded-lg p-4 md:p-5 text-sm md:text-base text-gray-200 resize-none focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/20 transition-all leading-relaxed",placeholder:"Enter your cinematic prompt here..."}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[S.jsxs("button",{onClick:()=>o(Ue,"photoreal"),className:"py-3 md:py-3.5 text-sm md:text-base bg-blue-500/20 text-blue-300 rounded-lg hover:bg-blue-500/30 flex items-center justify-center space-x-2 transition-colors font-medium",children:[S.jsx(yh,{className:"w-4 h-4 md:w-5 md:h-5"}),S.jsx("span",{children:"Generate Photoreal"})]}),S.jsxs("button",{onClick:()=>o(Ue,"stylized"),className:"py-3 md:py-3.5 text-sm md:text-base bg-teal-500/20 text-teal-300 rounded-lg hover:bg-teal-500/30 flex items-center justify-center space-x-2 transition-colors font-medium",children:[S.jsx(Du,{className:"w-4 h-4 md:w-5 md:h-5"}),S.jsx("span",{children:"Generate Stylized"})]})]}),S.jsxs("button",{onClick:()=>l(Ue),className:"w-full py-3 md:py-3.5 text-sm md:text-base bg-purple-500/20 text-purple-300 rounded-lg hover:bg-purple-500/30 flex items-center justify-center space-x-2 transition-colors font-medium",children:[S.jsx(rs,{className:"w-4 h-4 md:w-5 md:h-5"}),S.jsx("span",{children:"Generate Video Prompt"})]})]}),S.jsxs("div",{className:"space-y-4 flex flex-col",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[S.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-300",children:"Generated Content"}),S.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[S.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded p-0.5 flex text-xs",children:[S.jsx("button",{onClick:()=>re("cinematic"),className:`px-3 py-1.5 rounded transition-colors ${ne==="cinematic"?"bg-amber-500 text-black font-semibold":"text-gray-300 hover:bg-gray-700"}`,children:"Cinematic"}),S.jsx("button",{onClick:()=>re("explainer"),className:`px-3 py-1.5 rounded transition-colors ${ne==="explainer"?"bg-amber-500 text-black font-semibold":"text-gray-300 hover:bg-gray-700"}`,children:"Explainer"})]}),S.jsxs("select",{value:w[t.id]||"16:9",onChange:Z=>E(pe=>({...pe,[t.id]:Z.target.value})),className:"bg-gray-800 border border-gray-700 rounded px-3 py-1.5 text-xs text-white focus:outline-none focus:border-amber-500 transition-colors",children:[S.jsx("option",{value:"16:9",children:"16:9"}),S.jsx("option",{value:"9:16",children:"9:16"}),S.jsx("option",{value:"1:1",children:"1:1"}),S.jsx("option",{value:"4:3",children:"4:3"}),S.jsx("option",{value:"3:4",children:"3:4"})]})]})]}),S.jsxs("div",{className:"w-full flex-grow min-h-[250px] md:min-h-[300px] bg-gray-900 border border-gray-700 rounded-lg p-3 md:p-4 flex items-center justify-center relative group",children:[u.status==="loading"&&S.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[S.jsx("div",{className:"w-8 h-8 animate-spin rounded-full border-3 border-gray-400 border-t-amber-400"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Generating image..."})]}),u.status==="error"&&S.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[S.jsx("p",{className:"text-red-400 text-sm md:text-base font-medium",children:"Generation Failed"}),S.jsx("p",{className:"text-xs text-gray-500",children:"Please try again or check console for details"})]}),u.status==="idle"&&u.images[q]&&S.jsxs(S.Fragment,{children:[S.jsx("img",{src:q==="photoreal"?`data:image/jpeg;base64,${u.images.photoreal}`:`data:image/png;base64,${u.images.stylized}`,className:"max-w-full max-h-full object-contain rounded",alt:"Generated scene"}),S.jsx(se.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{const Z=u.images[q],pe=q==="photoreal"?"image/jpeg":"image/png",je=q==="photoreal"?"jpg":"png",Le=`dreamer-shot-${P.shotNumber}-${q}.${je}`;B4(Z,pe,Le)},className:"absolute top-3 right-3 p-2.5 md:p-3 bg-gray-900/80 hover:bg-gray-900/95 backdrop-blur-sm rounded-full opacity-0 group-hover:opacity-100 transition-all shadow-lg",title:"Download Image",children:S.jsx(fI,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})})]}),u.status==="idle"&&!u.images[q]&&S.jsxs("div",{className:"text-center space-y-2",children:[S.jsxs("p",{className:"text-gray-500 text-sm md:text-base",children:[q==="photoreal"?"Photoreal":"Stylized"," image will appear here"]}),S.jsx("p",{className:"text-xs text-gray-600",children:"Click generate button to create"})]})]}),S.jsxs("div",{className:"flex justify-center gap-3",children:[u.images.photoreal&&S.jsx("button",{onClick:()=>z("photoreal"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${q==="photoreal"?"bg-blue-500 text-white font-medium":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Photoreal"}),u.images.stylized&&S.jsx("button",{onClick:()=>z("stylized"),className:`px-4 py-2 text-sm rounded-lg transition-colors ${q==="stylized"?"bg-teal-500 text-white font-medium":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Stylized"})]})]})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("h3",{className:"text-lg font-semibold text-amber-400",children:"Visual Architecture"}),S.jsxs("button",{onClick:Pe,disabled:F,className:"px-3 py-1 text-sm rounded bg-amber-500/20 text-amber-400 hover:bg-amber-500/30 disabled:opacity-60 flex items-center space-x-2",children:[F&&S.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-amber-300 border-t-amber-500"}),S.jsx("span",{children:F?"Updating...":"Update Prompt from Visuals"})]})]}),S.jsx("div",{className:"flex items-center space-x-2 mb-2 border-b border-gray-800 overflow-x-auto",children:["composition","lighting","color","camera","casting"].map(Z=>S.jsx("button",{onClick:()=>G(Z),className:`px-4 py-2 text-sm capitalize rounded-t-lg transition-colors whitespace-nowrap ${N===Z?"bg-gray-800 text-amber-400":"text-gray-400 hover:bg-gray-900"}`,children:Z},Z))}),S.jsx(Ra,{mode:"wait",children:S.jsxs(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[N==="composition"&&S.jsx(A_,{composition:le.composition,onAddCharacter:()=>ce("characters",[...le.composition.characters,{id:crypto.randomUUID(),name:`Character ${le.composition.characters.length+1}`,x:Fn/2,y:Bt/2}]),onRemoveCharacter:Z=>ce("characters",le.composition.characters.filter(pe=>pe.id!==Z)),onDrag:()=>{},onPositionChange:(Z,pe,je)=>ce("characters",le.composition.characters.map(Le=>Le.id===Z?{...Le,x:pe,y:je}:Le)),onNameChange:(Z,pe)=>ce("characters",le.composition.characters.map(je=>je.id===Z?{...je,name:pe}:je)),onCameraAngleChange:Z=>ce("cameraAngle",Z),onCameraHeightChange:Z=>ce("cameraHeight",Z)}),N==="lighting"&&S.jsx(R_,{lighting:le.lighting,onChange:I}),N==="color"&&S.jsx(N_,{color:le.color,onChange:J}),N==="camera"&&S.jsx(M_,{camera:le.camera,onChange:ie,onPathChange:W}),N==="casting"&&S.jsx("div",{className:"text-center text-gray-400 p-8",children:S.jsx("p",{children:"Casting Assistant feature coming soon..."})})]},N)})]})]})},F4=t=>{var Ai,Ri,Js;const{timelineItems:e,setTimelineItems:n,setStage:s,updateVisuals:o,updatePromptFromVisuals:l,compositions:u,lightingData:d,colorGradingData:h,cameraMovement:f,aspectRatios:y,setAspectRatios:b,styles:T,setStyles:w,castingData:E,setCastingData:C,deleteTimelineItem:A}=t,[R,D]=O.useState(((Ai=e.find(oe=>oe.type==="shot"))==null?void 0:Ai.id)||null),[N,G]=O.useState(null),[q,z]=O.useState(!1),[F,ee]=O.useState(!1),[te,ue]=O.useState(null),[he,Te]=O.useState(!1),[Pe,$e]=O.useState(null),[Ue,P]=O.useState(""),[H,ne]=O.useState(!1),re=O.useRef(null),[ce,I]=O.useState(e.length);O.useEffect(()=>{I(e.length)},[]);const J=O.useRef({isScrolling:!1,queue:[],timeoutId:null}),ie=O.useCallback(()=>{const oe=J.current;if(oe.isScrolling){oe.queue.push(()=>{if(re.current){const ae=re.current,Ae=ae.scrollHeight-ae.clientHeight;we.debug("Queued scroll to bottom:",{scrollTop:Ae,scrollHeight:ae.scrollHeight,clientHeight:ae.clientHeight}),ae.scrollTo({top:Ae,behavior:"smooth"})}});return}if(oe.isScrolling=!0,re.current){const ae=re.current,Ae=ae.scrollHeight-ae.clientHeight;we.debug("Direct scroll to bottom:",{scrollTop:Ae,scrollHeight:ae.scrollHeight,clientHeight:ae.clientHeight}),ae.scrollTo({top:Ae,behavior:"smooth"})}oe.timeoutId&&clearTimeout(oe.timeoutId),oe.timeoutId=setTimeout(()=>{for(oe.isScrolling=!1,oe.timeoutId=null;oe.queue.length>0;){const ae=oe.queue.shift();ae&&ae()}},500)},[]);O.useEffect(()=>{typeof window<"u"&&(window.scrollTimelineToBottom=ie)},[ie]),O.useEffect(()=>()=>{J.current.timeoutId&&clearTimeout(J.current.timeoutId)},[]);const[W,le]=O.useState({}),Z=O.useMemo(()=>e.find(oe=>oe.id===R),[e,R]);O.useEffect(()=>{e.length>ce&&re.current&&setTimeout(()=>{ie()},100),I(e.length)},[e.length,ce,ie]);const pe=100,je=O.useCallback(oe=>{oe.length>pe&&(console.warn(` Timeline items exceeded limit (${pe}). Keeping first ${pe} items.`),oe=oe.slice(0,pe));let ae=1;const Ae=oe.map(Fe=>{if(Fe.type==="shot"){const Xe={...Fe,data:{...Fe.data,shotNumber:ae}};return ae++,Xe}return Fe});n(Ae)},[pe]),Le=async oe=>{we.debug("Adding new item:",oe,"Current timeline length:",e.length),ee(!1);const ae=crypto.randomUUID();let Ae;if(oe==="shot"){const at=e.filter(K=>K.type==="shot").length+1,U={shotNumber:at,prompt:`New Shot ${at}`,originalPrompt:`New Shot ${at}`,description:"A new scene",role:"medium shot"};Ae={id:ae,type:"shot",data:U},o(ae,"compositions",In(Ta)),o(ae,"lightingData",In(xa)),o(ae,"colorGradingData",In(wa)),o(ae,"cameraMovement",In(_a))}else if(oe==="b-roll"){const at=e.filter(K=>K.type==="shot").map(K=>K.data.prompt).join(`
`),U=await aU(at,N);Ae={id:ae,type:"b-roll",prompt:U}}else oe==="transition"?Ae={id:ae,type:"transition",note:"CUT TO:"}:Ae={id:ae,type:"text",title:"TITLE CARD"};const Fe=R?e.findIndex(at=>at.id===R):-1,Xe=[...e];Xe.splice(Fe+1,0,Ae),we.debug("About to add item, new timeline length will be:",Xe.length),je(Xe),setTimeout(()=>{ie()},200),Ae.type==="shot"&&D(Ae.id)},On=async()=>{z(!0);const oe=e.filter(ae=>ae.type==="shot").map(ae=>ae.data.prompt);if(oe.length>0){const ae=await oU(oe);G(ae)}z(!1)},Ln=async()=>{if(!Z||Z.type!=="shot")return;Te(!0),ue(null);const oe=e.findIndex(at=>at.id===Z.id),ae=e[oe-1],Ae=e[oe+1];let Fe=`CURRENT SHOT (${Z.data.shotNumber}): ${Z.data.prompt}`;(ae==null?void 0:ae.type)==="shot"&&(Fe=`PREVIOUS SHOT (${ae.data.shotNumber}): ${ae.data.prompt}

${Fe}`),(Ae==null?void 0:Ae.type)==="shot"&&(Fe=`${Fe}

NEXT SHOT (${Ae.data.shotNumber}): ${Ae.data.prompt}`);const Xe=await rU(Fe);ue(Xe),Te(!1)},ve=oe=>{n(ae=>ae.map(Ae=>Ae.id===oe.id?oe:Ae))},Ke=(oe,ae)=>{n(Ae=>Ae.map(Fe=>Fe.id===oe&&Fe.type==="shot"?{...Fe,data:{...Fe.data,...ae}}:Fe))},Ze=async oe=>{const ae=oe.id;le(Ae=>({...Ae,[ae]:{...Ae[ae]||{images:{}},status:"loading"}}));try{const Ae=e.map(Xe=>Xe.type==="shot"?`Shot ${Xe.data.shotNumber}: ${Xe.data.description}`:"").join(`
`),Fe=await eU(oe.data.prompt,Ae);Ke(ae,{prompt:Fe}),le(Xe=>({...Xe,[ae]:{...Xe[ae]||{images:{}},status:"idle",enhancedPrompt:Fe}}))}catch{le(Fe=>({...Fe,[ae]:{...Fe[ae]||{images:{}},status:"error"}}))}},Xt=oe=>{Ke(oe.id,{prompt:oe.data.originalPrompt})},mt=async(oe,ae)=>{const Ae=oe.id,Fe=T[Ae]||"cinematic";le(Xe=>({...Xe,[Ae]:{...Xe[Ae]||{images:{}},status:"loading"}}));try{const Xe=Fe==="explainer"?oe.data.description:oe.data.prompt,at=y[Ae]||"16:9";let U;ae==="photoreal"?U="data:image/svg+xml;base64,"+btoa('<svg width="400" height="300" xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="#1a1a2e"/><text x="200" y="150" font-family="Arial" font-size="16" fill="white" text-anchor="middle">Image generation coming soon...</text></svg>'):U="data:image/svg+xml;base64,"+btoa(`<svg width="400" height="300" xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="#0f0f23"/><text x="200" y="150" font-family="Arial" font-size="14" fill="#4fc3f7" text-anchor="middle">Placeholder: ${Xe.substring(0,50)}...</text></svg>`),le(K=>{var fe;return{...K,[Ae]:{...K[Ae]||{images:{}},status:"idle",images:{...(fe=K[Ae])==null?void 0:fe.images,[ae]:U}}}})}catch{le(at=>({...at,[Ae]:{...at[Ae]||{images:{}},status:"error"}}))}},yn=async()=>{var Ae,Fe;if(!Pe)return;const oe=Pe,ae=oe.id;le(Xe=>({...Xe,[ae]:{...Xe[ae]||{images:{}},status:"loading"}})),$e(null);try{const Xe=(Fe=(Ae=W[ae])==null?void 0:Ae.images)!=null&&Fe.photoreal?{base64:W[ae].images.photoreal,mimeType:"image/jpeg"}:void 0,at=await sU(oe.data.prompt,Xe,Ue);le(U=>({...U,[ae]:{...U[ae]||{images:{}},status:"idle",videoPrompt:at}})),P("")}catch{le(at=>({...at,[ae]:{...at[ae]||{images:{}},status:"error"}}))}},Gt=async()=>{var ae;if(!Pe)return;const oe=(ae=W[Pe.id])==null?void 0:ae.videoPrompt;if(oe)try{await navigator.clipboard.writeText(oe),ne(!0),setTimeout(()=>ne(!1),2e3)}catch(Ae){we.error("Failed to copy video prompt:",Ae)}},ii=oe=>{R===oe&&D(null),le(ae=>{const Ae={...ae};return delete Ae[oe],Ae}),A(oe)};return S.jsxs("div",{className:"min-h-screen bg-black text-white p-3 md:p-6 lg:p-8",children:[S.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col h-[calc(100vh-1.5rem)] md:h-[calc(100vh-3rem)] space-y-4 md:space-y-6",children:[S.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[S.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:"Visual Sequence Editor"}),S.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[S.jsx(se.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:On,disabled:q,className:"px-4 py-2.5 md:py-3 text-sm rounded-xl bg-gray-800 hover:bg-gray-700 flex items-center space-x-2 md:space-x-3 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:q?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-4 h-4 md:w-5 md:h-5 animate-spin rounded-full border-2 border-gray-400 border-t-white"}),S.jsx("span",{children:"Analyzing..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(Du,{className:"w-4 h-4 md:w-5 md:h-5"}),S.jsx("span",{children:"Analyze Style"})]})}),S.jsx(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>s("builder"),className:"px-4 md:px-6 py-2.5 md:py-3 text-sm bg-gray-800 hover:bg-gray-700 text-white rounded-xl transition-colors",children:"Back to Builder"})]})]}),N&&S.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex-shrink-0 bg-gray-900 border border-gray-800 rounded-xl p-4 md:p-5 space-y-2",children:S.jsxs("p",{className:"text-sm md:text-base leading-relaxed",children:[S.jsx("strong",{className:"text-amber-400",children:"Visual DNA:"})," ",N.visualDNA]})}),S.jsxs("div",{className:"flex-grow flex flex-col lg:flex-row gap-4 md:gap-6 overflow-hidden",children:[S.jsx("div",{className:"w-full lg:w-3/5 xl:w-2/3 flex-shrink-0 flex flex-col overflow-y-auto pr-0 lg:pr-2 space-y-4 md:space-y-6",children:Z?S.jsx(j4,{item:Z,updateItem:ve,onEnhance:Ze,onRevert:Xt,onGenerateImage:mt,onGenerateVideoPrompt:oe=>{P(""),$e(oe)},generatedContent:W[Z.id]||{images:{},status:"idle"},compositions:u,lightingData:d,colorGradingData:h,cameraMovement:f,updateVisuals:o,updatePromptFromVisuals:t.updatePromptFromVisuals,aspectRatios:y,setAspectRatios:b,styles:T,setStyles:w,castingData:E,setCastingData:C},Z.id):S.jsx("div",{className:"flex-grow flex items-center justify-center text-gray-500 bg-gray-950/70 border border-gray-800 rounded-xl",children:S.jsx("p",{className:"text-lg",children:"Select an item on the timeline to begin."})})}),S.jsxs("div",{className:"w-full lg:w-2/5 xl:w-1/3 flex flex-col bg-gray-900 border border-gray-800 rounded-xl p-4 md:p-6 space-y-4 md:space-y-6 min-h-[400px] lg:min-h-0",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[S.jsx("h3",{className:"text-lg md:text-xl font-semibold text-amber-400",children:"Sequence Timeline"}),S.jsx(se.button,{onClick:Ln,disabled:he,className:"text-sm text-purple-300 hover:text-purple-200 flex items-center space-x-2 px-3 py-2 bg-purple-900/20 hover:bg-purple-900/30 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:he?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-gray-400 border-t-purple-400"}),S.jsx("span",{className:"hidden sm:inline",children:"Getting suggestion..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(Yu,{className:"w-4 h-4"}),S.jsx("span",{children:"Dreamer Assist"})]})})]}),te&&S.jsx(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 md:p-5 bg-purple-900/50 border border-purple-800 rounded-lg",children:S.jsx("p",{className:"text-sm text-purple-200 leading-relaxed",children:te})}),S.jsx("div",{className:"flex-grow overflow-y-auto pr-2",ref:re,style:{maxHeight:"60vh",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"#374151 #1f2937"},children:S.jsx(qM,{axis:"y",values:e,onReorder:je,className:"space-y-3 md:space-y-4",children:e.map(oe=>S.jsx(FM,{value:oe,className:`bg-gray-800 rounded-xl border-2 shadow-lg cursor-grab active:cursor-grabbing transition-all duration-200 ${R===oe.id?"border-amber-500 shadow-amber-500/20 shadow-lg":"border-gray-800 hover:border-gray-700 hover:bg-gray-750"}`,children:S.jsxs("div",{className:"p-4 md:p-5 flex items-start space-x-3 md:space-x-4",children:[S.jsx(gI,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-600 flex-shrink-0 mt-1"}),S.jsxs("div",{className:"flex-grow cursor-pointer min-w-0",onClick:()=>D(oe.id),children:[S.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[oe.type==="shot"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-amber-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("span",{className:"text-amber-400 font-bold text-xs md:text-sm",children:oe.data.shotNumber})}),S.jsxs("p",{className:"font-bold text-sm md:text-base text-white truncate",children:["Shot ",oe.data.shotNumber,": ",oe.data.role]})]}),oe.type==="b-roll"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-cyan-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx(yh,{className:"w-3 h-3 md:w-4 md:h-4 text-cyan-400"})}),S.jsx("p",{className:"font-bold text-sm md:text-base italic text-cyan-400",children:"B-Roll"})]}),oe.type==="transition"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-purple-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx(mb,{className:"w-3 h-3 md:w-4 md:h-4 text-purple-400"})}),S.jsx("p",{className:"font-bold text-sm md:text-base italic text-purple-400",children:"Transition"})]}),oe.type==="text"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-green-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx(pb,{className:"w-3 h-3 md:w-4 md:h-4 text-green-400"})}),S.jsx("p",{className:"font-bold text-sm md:text-base italic text-green-400",children:"Text"})]})]}),S.jsx("p",{className:"text-xs md:text-sm text-gray-400 mt-2 leading-relaxed line-clamp-2",children:oe.type==="shot"?oe.data.description:oe.type==="b-roll"?oe.prompt:oe.type==="transition"?oe.note:oe.title})]}),S.jsx(se.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:ae=>{ae.stopPropagation(),ii(oe.id)},className:"ml-2 p-2 md:p-2.5 text-gray-500 hover:text-red-400 rounded-lg hover:bg-red-900/20 transition-all flex-shrink-0",title:"Delete Item",children:S.jsx(ku,{className:"w-4 h-4 md:w-5 md:h-5"})})]})},oe.id))})}),S.jsxs("div",{className:"relative flex-shrink-0",children:[S.jsxs(se.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{ee(oe=>!oe),setTimeout(()=>{ie()},50)},className:"w-full py-4 px-6 bg-amber-500/20 text-amber-400 rounded-xl hover:bg-amber-500/30 flex items-center justify-center space-x-3 transition-all shadow-lg",children:[S.jsx(_I,{className:"w-6 h-6"}),S.jsx("span",{className:"text-base font-medium",children:"Add to Timeline"})]}),S.jsx(Ra,{children:F&&S.jsxs(se.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute bottom-full mb-3 w-full bg-gray-800 border border-gray-700 rounded-xl p-3 space-y-2 shadow-2xl z-10",children:[S.jsxs(se.button,{whileHover:{x:4,backgroundColor:"rgb(55 65 81)"},onClick:()=>Le("shot"),className:"w-full text-left p-4 hover:bg-gray-700 rounded-lg flex items-center space-x-3 transition-all",children:[S.jsx("div",{className:"w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center",children:S.jsx(rs,{className:"w-5 h-5 text-amber-400"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-white",children:"New Shot"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Add a new cinematic shot"})]})]}),S.jsxs(se.button,{whileHover:{x:4,backgroundColor:"rgb(55 65 81)"},onClick:()=>Le("b-roll"),className:"w-full text-left p-4 hover:bg-gray-700 rounded-lg flex items-center space-x-3 transition-all",children:[S.jsx("div",{className:"w-8 h-8 bg-cyan-500/20 rounded-lg flex items-center justify-center",children:S.jsx(yh,{className:"w-5 h-5 text-cyan-400"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-white",children:"B-Roll"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Add supporting footage"})]})]}),S.jsxs(se.button,{whileHover:{x:4,backgroundColor:"rgb(55 65 81)"},onClick:()=>Le("transition"),className:"w-full text-left p-4 hover:bg-gray-700 rounded-lg flex items-center space-x-3 transition-all",children:[S.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center",children:S.jsx(mb,{className:"w-5 h-5 text-purple-400"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-white",children:"Transition Note"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Add a transition cue"})]})]}),S.jsxs(se.button,{whileHover:{x:4,backgroundColor:"rgb(55 65 81)"},onClick:()=>Le("text"),className:"w-full text-left p-4 hover:bg-gray-700 rounded-lg flex items-center space-x-3 transition-all",children:[S.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:S.jsx(pb,{className:"w-5 h-5 text-green-400"})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-medium text-white",children:"Title Card"}),S.jsx("p",{className:"text-sm text-gray-400",children:"Add text overlay"})]})]})]})})]})]})]})]}),Pe&&S.jsx(se.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:()=>$e(null),children:S.jsxs(se.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-gray-900 border border-gray-800 rounded-lg p-6 max-w-lg w-full",onClick:oe=>oe.stopPropagation(),children:[S.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Generate Video Prompt for Shot ",Pe.data.shotNumber]}),S.jsx("textarea",{value:Ue,onChange:oe=>P(oe.target.value),placeholder:"Optional: describe desired camera movement or action...",className:"w-full h-24 p-3 bg-gray-800 border border-gray-700 rounded-lg text-white mb-4"}),S.jsxs("div",{className:"flex space-x-2",children:[S.jsx(se.button,{onClick:()=>$e(null),className:"flex-1 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg",children:"Cancel"}),S.jsx(se.button,{onClick:yn,className:"flex-1 py-3 bg-amber-500 text-black rounded-lg",children:"Generate"})]}),((Ri=W[Pe.id])==null?void 0:Ri.videoPrompt)&&S.jsxs("div",{className:"relative mt-4 bg-gray-800 p-3 rounded text-sm text-gray-200",children:[S.jsx(se.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Gt,className:"absolute top-2 right-2 p-1 bg-gray-700 hover:bg-gray-600 rounded",title:"Copy Video Prompt",children:H?S.jsx(Em,{className:"w-4 h-4 text-green-400"}):S.jsx(Am,{className:"w-4 h-4 text-gray-300"})}),(Js=W[Pe.id])==null?void 0:Js.videoPrompt]})]})})]})};function z4(){const[t,e]=O.useState("landing"),[n,s]=O.useState({scriptText:"",sceneCore:"",emotion:"",numberOfShots:"3",cameraType:"Arri Alexa 65",shotTypes:"",focalLength:"35mm cinematic",depthOfField:"f/2.8 cinematic shallow",framing:"rule of thirds",mainCharacterBlocking:"",secondaryCharacterBlocking:"",antagonistBlocking:"",lightingStyle:"chiaroscuro contrast",lightingDetails:"",atmosphere:"",filmStock:"Kodak Vision3 500T 5219",filmEmulation:"",colorGrading:"teal-orange tension",colorPalette:"",storyBeat:"",visualToneKeywords:"",continuityMode:"tight continuity",seedLinking:"use previous seeds",resolution:"4K render",outputType:"cinematic frame",visualCompositionGuide:"",visualCameraSetup:"",visualLightingSetup:"",visualLightingMood:"",visualColorPalette:"",visualColorHarmony:"",visualCameraMovement:"",visualFocusMotion:""}),[o,l]=O.useState([]),[u,d]=O.useState([]),[h,f]=O.useState([]),[y,b]=O.useState([]),[T,w]=O.useState(!1),[E,C]=O.useState(!1),[A,R]=O.useState(!1),[D,N]=O.useState([]),[G,q]=O.useState({}),[z,F]=O.useState({}),[ee,te]=O.useState({}),[ue,he]=O.useState({}),[Te,Pe]=O.useState({}),[$e,Ue]=O.useState({}),[P,H]=O.useState({}),[ne,re]=O.useState(0),[ce,I]=O.useState(!0),J=O.useRef(null),ie=O.useRef(!1);O.useEffect(()=>{(async()=>{try{const K=await L4();if(K){re(K.currentQuestionIndex),s(K.promptData),f(K.savedConfigurations),N(K.visualPresets);const fe=Ou.map(Re=>({...Re,content:Re.content,uploadedAt:new Date("2025-01-01")})),xe=K.knowledgeDocs.map(Re=>({...Re,uploadedAt:new Date(Re.uploadedAt)}));b([...fe,...xe]),we.info("Progress loaded from Supabase")}else W()}catch(K){we.error("Failed to load progress from Supabase:",K),W()}finally{I(!1)}})()},[]);const W=()=>{we.info("Loading data from localStorage...");try{try{const U=localStorage.getItem("dreamerConfigs");if(U){const K=JSON.parse(U);Array.isArray(K)?(f(K),we.info("Loaded saved configurations:",K.length)):we.warn("Invalid saved configurations format, using empty array")}}catch(U){we.error("Failed to load saved configurations:",U)}try{const U=localStorage.getItem("dreamerKnowledge");let K=[];if(U){const xe=JSON.parse(U);Array.isArray(xe)&&(K=xe.map(Re=>{try{return{...Re,uploadedAt:new Date(Re.uploadedAt)}}catch(ge){return we.warn("Failed to parse knowledge doc uploadedAt:",Re,ge),{...Re,uploadedAt:new Date}}}))}const fe=Ou.map(xe=>({...xe,content:xe.content,uploadedAt:new Date("2025-01-01")}));b([...fe,...K]),we.info("Loaded knowledge documents:",K.length+fe.length)}catch(U){we.error("Failed to load knowledge documents:",U)}try{const U=localStorage.getItem("dreamerVisualPresets");if(U){const K=JSON.parse(U);Array.isArray(K)?(N(K),we.info("Loaded visual presets:",K.length)):we.warn("Invalid visual presets format, using empty array")}}catch(U){we.error("Failed to load visual presets:",U)}try{const U=localStorage.getItem("dreamerCompositions");if(U){const K=JSON.parse(U);typeof K=="object"&&K!==null?(q(K),we.info("Loaded compositions:",Object.keys(K).length)):we.warn("Invalid compositions format, using empty object")}}catch(U){we.error("Failed to load compositions:",U)}try{const U=localStorage.getItem("dreamerLighting");if(U){const K=JSON.parse(U);typeof K=="object"&&K!==null?(F(K),we.info("Loaded lighting data:",Object.keys(K).length)):we.warn("Invalid lighting data format, using empty object")}}catch(U){we.error("Failed to load lighting data:",U)}try{const U=localStorage.getItem("dreamerColor");if(U){const K=JSON.parse(U);typeof K=="object"&&K!==null?(te(K),we.info("Loaded color grading data:",Object.keys(K).length)):we.warn("Invalid color grading data format, using empty object")}}catch(U){we.error("Failed to load color grading data:",U)}try{const U=localStorage.getItem("dreamerMovement");if(U){const K=JSON.parse(U);typeof K=="object"&&K!==null?(he(K),we.info("Loaded camera movement data:",Object.keys(K).length)):we.warn("Invalid camera movement data format, using empty object")}}catch(U){we.error("Failed to load camera movement data:",U)}try{const U=localStorage.getItem("dreamerStyles");if(U){const K=JSON.parse(U);typeof K=="object"&&K!==null?(Ue(K),we.info("Loaded styles:",Object.keys(K).length)):we.warn("Invalid styles format, using empty object")}}catch(U){we.error("Failed to load styles:",U)}we.info("localStorage loading completed")}catch(U){we.error("Critical error in loadFromLocalStorage:",U)}};O.useEffect(()=>{!ce&&t==="builder"&&U4(async()=>{if(ie.current){we.debug("Auto-save skipped: save operation already in progress");return}ie.current=!0;try{await O4({currentQuestionIndex:ne,promptData:n,knowledgeDocs:y.filter(U=>!U.id.startsWith("preloaded-")),savedConfigurations:h,visualPresets:D}),we.info("Auto-save completed successfully")}catch(U){we.error("Auto-save failed:",U)}finally{ie.current=!1}},3e3)},[ne,n,h,D,ce,t]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.CONFIGS,JSON.stringify(h))}catch(U){qn(U,{showUserMessage:!1,context:"Save Configurations"})}},[h]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.KNOWLEDGE,JSON.stringify(y.filter(U=>!U.id.startsWith("preloaded-"))))}catch(U){qn(U,{showUserMessage:!1,context:"Save Knowledge"})}},[y]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.VISUAL_PRESETS,JSON.stringify(D))}catch(U){qn(U,{showUserMessage:!1,context:"Save Visual Presets"})}},[D]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.COMPOSITIONS,JSON.stringify(G))}catch(U){qn(U,{showUserMessage:!1,context:"Save Compositions"})}},[G]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.LIGHTING,JSON.stringify(z))}catch(U){qn(U,{showUserMessage:!1,context:"Save Lighting"})}},[z]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.COLOR,JSON.stringify(ee))}catch(U){qn(U,{showUserMessage:!1,context:"Save Color Grading"})}},[ee]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.MOVEMENT,JSON.stringify(ue))}catch(U){qn(U,{showUserMessage:!1,context:"Save Camera Movement"})}},[ue]),O.useEffect(()=>{try{localStorage.setItem(Zi.STORAGE_PREFIXES.STYLES,JSON.stringify($e))}catch(U){qn(U,{showUserMessage:!1,context:"Save Styles"})}},[$e]);const le=(U,K)=>{s(fe=>({...fe,[U]:K}))},Z=async(U,K)=>{R(!0);try{const fe=await QL(Us(n.sceneCore),K);le(U,fe)}catch(fe){an(fe,"Random Inspiration"),le(U,"A cinematic moment filled with emotion and visual storytelling")}finally{R(!1)}},pe=(U,K)=>{if(!U)return"";if(Array.isArray(U)){const fe=U.filter(xe=>xe&&xe.trim());return fe.length===0?"":fe[K%fe.length]||""}return U},je=(U,K)=>{if(!U||U.trim().length===0)return[];const fe=U.split(/\n\n+/).map(ge=>ge.trim()).filter(Boolean);if(fe.length===0)return[];const xe=Math.max(1,Math.ceil(fe.length/K)),Re=[];for(let ge=0;ge<K;ge++){const Ee=ge*xe,pt=Math.min(Ee+xe,fe.length);Re.push(fe.slice(Ee,pt).join(" ")||fe[ge]||"")}return Re},Le=async()=>{try{const U=parseInt(Us(n.numberOfShots))||3,K=(Us(n.shotTypes)||"medium shot, close up, wide shot").split(",").map(ge=>ge.trim()),fe=n.scriptText?je(n.scriptText,U):[],xe=[];for(let ge=0;ge<U;ge++){const Ee=crypto.randomUUID(),pt={shotNumber:ge+1,prompt:`Placeholder for Shot ${ge+1}`,originalPrompt:`Placeholder for Shot ${ge+1}`,description:fe[ge]||pe(n.sceneCore,ge),role:K[ge%K.length]};xe.push({id:Ee,type:"shot",data:pt})}const Re={comp:{},light:{},color:{},move:{}};xe.forEach(ge=>{Re.comp[ge.id]=In(Ta),Re.light[ge.id]=In(xa),Re.color[ge.id]=In(wa),Re.move[ge.id]=In(_a)}),q(ge=>({...ge,...Re.comp})),F(ge=>({...ge,...Re.light})),te(ge=>({...ge,...Re.color})),he(ge=>({...ge,...Re.move}));try{const ge=await Promise.all(xe.map(async Ee=>{try{const pt=await qS({composition:Re.comp[Ee.id],lighting:Re.light[Ee.id],color:Re.color[Ee.id],camera:Re.move[Ee.id]}),$t=`Cinematic shot ${Ee.data.shotNumber}: ${Ee.data.role}. Scene: ${Ee.data.description}. ${pt}`;return{...Ee,data:{...Ee.data,prompt:$t,originalPrompt:$t}}}catch(pt){we.error(`Failed to generate smart description for shot ${Ee.data.shotNumber}:`,pt);const $t=`Cinematic shot ${Ee.data.shotNumber}: ${Ee.data.role}. Scene: ${Ee.data.description}. A visually compelling scene with cinematic composition and lighting.`;return{...Ee,data:{...Ee.data,prompt:$t,originalPrompt:$t}}}}));d(ge),e("final")}catch(ge){we.error("Failed to generate visual descriptions:",ge),d(xe),e("final")}}catch(U){qn(U,{showUserMessage:!0,context:"Prompt Generation"})}},On=U=>f(K=>[{id:Date.now().toString(),name:U,data:n,savedAt:Date.now()},...K]),Ln=U=>{s(U.data),e("builder")},ve=U=>f(K=>K.filter(fe=>fe.id!==U)),Ke=async U=>{if(!U.target.files)return;const K=["text/plain","text/markdown","application/json","application/pdf"],fe=[".txt",".md",".json",".pdf"],xe=10*1024*1024,Re=[],ge=[];w(!0);try{for(const Ee of Array.from(U.target.files)){const pt=Ee.name.toLowerCase().substring(Ee.name.lastIndexOf("."));if(!fe.includes(pt)){ge.push(`File "${Ee.name}": Unsupported file type. Allowed types: ${fe.join(", ")}`);continue}if(Ee.size>xe){const $t=yb(Ee,xe,K);$t&&ge.push($t.message);continue}if(!K.includes(Ee.type)&&Ee.type!==""){const $t=yb(Ee,xe,K);$t&&ge.push($t.message);continue}try{const ja=(await Ee.text()).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"").replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<iframe[^>]*>.*?<\/iframe>/gi,"").replace(/javascript:/gi,"").substring(0,5e5),nc=await WL(ja);Re.push({id:crypto.randomUUID(),name:Ee.name,content:ja,uploadedAt:new Date,extractedKnowledge:nc||void 0})}catch{ge.push(`File "${Ee.name}": Failed to read file content`)}}ge.length>0&&(we.warn("File upload validation errors:",ge),alert(`Some files could not be uploaded:
${ge.join(`
`)}`)),Re.length>0&&b(Ee=>[...Ee,...Re])}finally{w(!1)}},Ze=U=>b(K=>K.filter(fe=>fe.id!==U)),Xt=(U,K)=>{const fe={id:crypto.randomUUID(),name:U,createdAt:Date.now(),composition:G[K]||Ta,lighting:z[K]||xa,color:ee[K]||wa,camera:ue[K]||_a};N(xe=>[fe,...xe])},mt=U=>{if(!U||typeof U!="object"||!U.composition||!U.lighting||!U.color||!U.camera)return!1;const K=U.composition;if(!Array.isArray(K.characters)||typeof K.cameraAngle!="string"||typeof K.cameraHeight!="string")return!1;const fe=U.lighting;if(typeof fe.keyLightIntensity!="number"||typeof fe.mood!="string"||typeof fe.colorTemperature!="number")return!1;const xe=U.color;if(typeof xe.colorGrade!="string"||typeof xe.saturation!="number"||!Array.isArray(xe.colorPalette))return!1;const Re=U.camera;return!(typeof Re.movementType!="string"||typeof Re.duration!="number"||typeof Re.startPos!="object"||typeof Re.endPos!="object")},yn=(U,K)=>{if(!mt(U)){we.error("Invalid preset structure:",U),alert("Error: Invalid preset data structure. Please check the preset file.");return}try{q(fe=>({...fe,[K]:In(U.composition)})),F(fe=>({...fe,[K]:In(U.lighting)})),te(fe=>({...fe,[K]:In(U.color)})),he(fe=>({...fe,[K]:In(U.camera)})),we.info("Preset applied successfully to timeline item:",K)}catch(fe){we.error("Failed to apply preset:",fe),alert("Error: Failed to apply preset. Please try again.")}},Gt=U=>N(K=>K.filter(fe=>fe.id!==U)),ii=U=>{const K=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),fe=URL.createObjectURL(K),xe=document.createElement("a");xe.href=fe,xe.download=`${U.name.replace(/\s+/g,"-")}.json`,xe.click(),URL.revokeObjectURL(fe)},Ai=()=>{var U;return(U=J.current)==null?void 0:U.click()},Ri=async U=>{var fe;const K=(fe=U.target.files)==null?void 0:fe[0];if(K)try{const xe=await K.text(),Re=JSON.parse(xe);if(!Re.name||!Re.composition)throw new Error("Invalid preset");N(ge=>[{...Re,id:crypto.randomUUID(),createdAt:Date.now()},...ge])}catch{alert("Failed to import preset.")}},Js=U=>{s(K=>({...K,sceneCore:U||K.sceneCore})),re(0),e("builder")},oe=U=>{s(K=>({...K,scriptText:U})),e("storyboard")},ae=async U=>{if(!U||U.trim().length===0){alert("Please enter an idea to generate a story.");return}C(!0);try{const K=await tU(U);K&&K.length>0?(s(fe=>({...fe,scriptText:K.join(`

`),sceneCore:K[0]})),re(0),e("builder")):(we.warn("No scenes generated from idea"),alert("No story could be generated from the provided idea. Please try a different concept."))}catch(K){qn(K,{showUserMessage:!0,context:"Story Generation"})}finally{C(!1)}},Ae=()=>{e("landing")},Fe=(U,K,fe)=>{K==="compositions"?q(xe=>({...xe,[U]:fe})):K==="lightingData"?F(xe=>({...xe,[U]:fe})):K==="colorGradingData"?te(xe=>({...xe,[U]:fe})):K==="cameraMovement"&&he(xe=>({...xe,[U]:fe}))},Xe=async U=>{try{const K=u.find(xe=>xe.id===U);if(!K||K.type!=="shot")return;const fe={composition:G[U]||Ta,lighting:z[U]||xa,color:ee[U]||wa,camera:ue[U]||_a};try{const xe=await qS(fe),Re=`Cinematic shot ${K.data.shotNumber}: ${K.data.role}. Scene: ${K.data.description}. ${xe}`;d(ge=>ge.map(Ee=>Ee.id===U&&Ee.type==="shot"?{...Ee,data:{...Ee.data,prompt:Re}}:Ee))}catch(xe){we.error("Failed to generate smart visual description:",xe);const Re=`Cinematic shot ${K.data.shotNumber}: ${K.data.role}. Scene: ${K.data.description}. A visually compelling scene with cinematic composition and professional lighting.`;d(ge=>ge.map(Ee=>Ee.id===U&&Ee.type==="shot"?{...Ee,data:{...Ee.data,prompt:Re}}:Ee))}}catch(K){we.error("Failed to update prompt from visuals:",K)}},at=U=>{d(fe=>fe.filter(xe=>xe.id!==U));const K=fe=>{fe(xe=>{const Re={...xe};return delete Re[U],Re})};K(q),K(F),K(te),K(he),K(Pe),K(Ue)};return t==="landing"?S.jsx(ua,{children:S.jsx(q4,{onStartBuilder:Js,onStartStoryboard:oe,onGenerateStory:ae,isGenerating:E})}):t==="builder"?S.jsx(ua,{children:S.jsx(G4,{promptData:n,handleAnswer:le,handleRandomAnswer:Z,isGeneratingRandom:A,generatePrompt:Le,savedConfigurations:h,knowledgeDocs:y,saveConfiguration:On,loadConfiguration:Ln,deleteConfiguration:ve,deleteKnowledgeDoc:Ze,handleFileUpload:Ke,isProcessingDoc:T,currentQuestionIndex:ne,setCurrentQuestionIndex:re,onBackToHome:Ae})}):t==="storyboard"?S.jsx(ua,{children:S.jsx(H4,{setStage:e,setGeneratedPrompts:l,scriptText:n.scriptText||"",setTimelineItems:d,setCompositions:q,setLightingData:F,setColorGradingData:te,setCameraMovement:he})}):t==="final"?S.jsx(ua,{children:S.jsx(F4,{timelineItems:u,setTimelineItems:d,promptData:n,setStage:e,visualPresets:D,savePreset:Xt,applyPresetToItem:yn,deletePreset:Gt,exportPreset:ii,triggerPresetImport:Ai,handlePresetImport:Ri,presetFileInputRef:J,compositions:G,lightingData:z,colorGradingData:ee,cameraMovement:ue,updateVisuals:Fe,updatePromptFromVisuals:Xe,aspectRatios:Te,setAspectRatios:Pe,styles:$e,setStyles:Ue,castingData:P,setCastingData:H,deleteTimelineItem:at,showCollaboration:!1,setShowCollaboration:()=>{}})}):null}eA.createRoot(document.getElementById("root")).render(S.jsx(O.StrictMode,{children:S.jsx(ua,{children:S.jsx(z4,{})})}));
